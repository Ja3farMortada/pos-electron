import{a as Ke}from"./chunk-NN6H7PU4.js";import{a as W}from"./chunk-IBNWSIW5.js";import{b as We}from"./chunk-SVHA7J7U.js";import"./chunk-TQK45RMZ.js";import{a as Oe,b as Fe}from"./chunk-I32A4TGG.js";import"./chunk-4ONBVWLA.js";import"./chunk-UIPYUTXU.js";import{a as F}from"./chunk-BMSQ5BCO.js";import{b as me}from"./chunk-23C7B2M2.js";import{c as O}from"./chunk-OX3TH2OU.js";import"./chunk-FPREGWMZ.js";import"./chunk-ARZ4TFMZ.js";import{a as z,b as Re,c as qe}from"./chunk-FSNTAQVM.js";import{a as Qe}from"./chunk-QLTNVVXU.js";import{a as ke,b as Ne,c as L}from"./chunk-OKPWRQQW.js";import"./chunk-IQTEOPEP.js";import{c as k}from"./chunk-6CXWHLUJ.js";import"./chunk-SBLJNY6Q.js";import"./chunk-KICUZIBO.js";import{a as Ve,b as Me}from"./chunk-FA4OBAKY.js";import"./chunk-EA4RMISB.js";import"./chunk-OY4T6UDA.js";import"./chunk-7ZNGIE4A.js";import{a as Le}from"./chunk-FO7TG3S7.js";import{a as He,b as De}from"./chunk-42BTCZ3Y.js";import{a as Ee,b as Pe}from"./chunk-7QYRFDGN.js";import"./chunk-PIXVAYN4.js";import"./chunk-7KO4RDVD.js";import"./chunk-UJ5JDQTE.js";import"./chunk-ZPRVI3IV.js";import{a as Ie}from"./chunk-UVEVFGTS.js";import"./chunk-P4HR6EQA.js";import{d as we,e as Be,f as N}from"./chunk-NEQPNYWW.js";import{a as _e,b as ge,c as Te}from"./chunk-AFTSMEUE.js";import{F as ve,f as he,g as ye,i as fe,j as Ce,l as xe,m as Se,u as be}from"./chunk-LBGQA5HW.js";import"./chunk-4A2WLUYH.js";import{b as de,c as ue}from"./chunk-VVKQAEX7.js";import{a as pe,b as ae}from"./chunk-FW7KDDDM.js";import{Ba as T,C as S,Ca as B,D as A,Da as E,E as D,Ea as M,Eb as j,Fa as _,Ga as x,Ha as f,Ia as X,Ja as v,Jb as te,K as s,Ka as w,L as c,La as V,Oa as K,S as Y,Sb as ie,Vb as ne,X as G,Xa as d,Y as p,Ya as u,a as U,ac as oe,fc as re,ga as I,ia as h,ib as Z,lc as le,mb as $,na as Q,nb as ee,oa as l,pa as o,qa as P,ua as b,va as y,wa as a,wc as se,xc as ce,z as H,za as J}from"./chunk-DSVZHE42.js";import{a as R,b as q}from"./chunk-GAL4ENT6.js";var Ye=["barcodeInput"],Ge=["invoiceTable"],Je=["editQty"],Xe=["editPrice"],Ze=["payment_input"],$e=["lira_input"],je=()=>({standalone:!0});function et(r,C){if(r&1&&(l(0,"h2",29),_(1),d(2,"currency"),o()),r&2){let e=a();p(),f(" USD: ",u(2,1,e.invoiceTotal.subtotal_dollar)," ")}}function tt(r,C){if(r&1){let e=b();l(0,"label",30),_(1),d(2,"translate"),o(),l(3,"p-dropdown",31),d(4,"translate"),d(5,"translate"),V("ngModelChange",function(t){s(e);let i=a();return w(i.selectedInventoryId,t)||(i.selectedInventoryId=t),c(t)}),y("ngModelChange",function(){s(e);let t=a();return c(t.stockService.getProducts())}),o(),l(6,"p-button",32),d(7,"translate"),y("onClick",function(){s(e);let t=a();return c(t.productDialogVisible=!0)}),o()}if(r&2){let e=a();p(),f("",u(2,8,"Select Inventory:")," "),p(2),h("autoOptionFocus",!1),v("ngModel",e.selectedInventoryId),h("options",e.inventories())("placeholder",u(4,10,"Select Inventory"))("emptyMessage",u(5,12,"No results found"))("filter",!0),p(3),h("label",u(7,14,"New Product"))}}function it(r,C){if(r&1&&(l(0,"h2",33),_(1),d(2,"dollar"),o()),r&2){let e=a();p(),f(" ",u(2,1,e.invoiceTotal.subtotal_dollar)," ")}}function nt(r,C){if(r&1){let e=b();l(0,"div",40)(1,"p-button",41),d(2,"translate"),y("onClick",function(){s(e);let t=a(2);return c(t.supplierDialogVisible=!0)}),o()()}r&2&&(p(),J("label",u(2,1,"New Supplier")))}function ot(r,C){if(r&1){let e=b();l(0,"div",34)(1,"div",35)(2,"label",42),_(3),d(4,"translate"),o(),l(5,"p-inputNumber",43,3),V("ngModelChange",function(t){s(e);let i=a(2);return w(i.payment_amount,t)||(i.payment_amount=t),c(t)}),y("ngModelChange",function(t){s(e);let i=a(2);return c(i.onUsdChange(t))}),o()()(),l(7,"div",34)(8,"div",35)(9,"label",44),_(10),d(11,"translate"),o(),l(12,"p-inputNumber",45,4),V("ngModelChange",function(t){s(e);let i=a(2);return w(i.lbp_payment_amount,t)||(i.lbp_payment_amount=t),c(t)}),y("ngModelChange",function(t){s(e);let i=a(2);return c(i.onLbpChange(t))}),o(),l(14,"small"),_(15),d(16,"translate"),o()()(),l(17,"div",46)(18,"label",47),_(19),d(20,"translate"),o(),l(21,"p-inputSwitch",48),V("ngModelChange",function(t){s(e);let i=a(2);return w(i.modify_cash,t)||(i.modify_cash=t),c(t)}),o()()}if(r&2){let e=a(2);p(3),x(u(4,15,"Payment")),p(2),v("ngModel",e.payment_amount),h("ngModelOptions",K(23,je))("buttonLayout","horizontal")("step",1)("min",0),p(5),x(u(11,17,"LBP amount")),p(2),v("ngModel",e.lbp_payment_amount),h("ngModelOptions",K(24,je))("buttonLayout","horizontal")("step",1e3)("min",0),p(3),x(u(16,19,"LBP payments are reference only, payments are always submitted in USD")),p(4),x(u(20,21,"Modify Cash")),p(2),v("ngModel",e.modify_cash)}}function rt(r,C){if(r&1&&(l(0,"div",39)(1,"table",49)(2,"tr")(3,"th",50),_(4),d(5,"translate"),o(),l(6,"th")(7,"text-with-loading",51)(8,"span"),_(9),d(10,"currency"),o()()()(),l(11,"tr")(12,"th",50),_(13),d(14,"translate"),o(),l(15,"th"),_(16),d(17,"currency"),o()(),l(18,"tr")(19,"td",52),P(20,"p-divider",53),o()(),l(21,"tr")(22,"th",50),_(23),d(24,"translate"),o(),l(25,"th"),_(26),d(27,"currency"),o()(),l(28,"tr")(29,"td",52),P(30,"p-divider",53),o()(),l(31,"tr")(32,"th",50),_(33),d(34,"translate"),o(),l(35,"th")(36,"text-with-loading",54)(37,"span"),_(38),d(39,"currency"),o()()()()()()),r&2){let e=a(2);p(4),f(" ",u(5,12,"Old Balance:")," "),p(3),h("isLoading",e.supplier_balance_loading())("loadingBar",!0),p(2),x(u(10,14,e.supplier_balance().balance)),p(4),f(" ",u(14,16,"Current Invoice:")," "),p(3),f(" ",u(17,18,e.invoiceTotal.subtotal_dollar)," "),p(7),f(" ",u(24,20,"Payment:")," "),p(3),f(" ",u(27,22,e.payment_amount())," "),p(7),f(" ",u(34,24,"New Balance:")," "),p(3),h("isLoading",e.supplier_balance_loading())("loadingBar",!0),p(2),x(u(39,26,e.calculateNewBalance(e.invoiceTotal.subtotal_dollar,e.supplier_balance().balance,e.payment_amount())))}}function lt(r,C){if(r&1){let e=b();l(0,"div",14)(1,"div",34)(2,"div",35)(3,"label",36),_(4),d(5,"translate"),o(),l(6,"p-dropdown",37),d(7,"translate"),d(8,"translate"),y("onShow",function(){s(e);let t=a();return c(t.dropDownVisible=!0)})("onHide",function(){s(e);let t=a();return c(t.dropDownVisible=!1)})("ngModelChange",function(t){s(e);let i=a();return c(i.onSupplierChange(t))}),o()()(),I(9,nt,3,3,"div",38)(10,ot,22,25)(11,rt,40,28,"div",39),o()}if(r&2){let e=a();p(4),x(u(5,12,"Supplier")),p(2),h("loading",e.suppliersLoading())("ngModel",e.selected_supplier_id())("options",e.suppliers())("placeholder",u(7,14,"Select Supplier"))("emptyMessage",u(8,16,"No results found"))("filter",!0)("showClear",!0)("autoOptionFocus",!1),p(3),h("ngIf",!e.selected_supplier_id()),p(),Q(e.selected_supplier_id()?10:-1),p(),Q(e.selected_supplier_id()?11:-1)}}function pt(r,C){r&1&&(l(0,"tr")(1,"th",55),_(2,"#"),o(),l(3,"th",56),_(4),d(5,"translate"),o(),l(6,"th",55),_(7),d(8,"translate"),o(),l(9,"th",55),_(10),d(11,"translate"),o(),l(12,"th",57),_(13),d(14,"translate"),o(),l(15,"th",56),_(16),d(17,"translate"),o(),l(18,"th",55),_(19),d(20,"translate"),o(),l(21,"th",58),_(22),d(23,"translate"),o(),l(24,"th",59),_(25),d(26,"translate"),o(),l(27,"th",55),_(28),d(29,"translate"),o()()),r&2&&(p(4),x(u(5,9,"Barcode")),p(3),x(u(8,11,"Print")),p(3),x(u(11,13,"SKU")),p(3),f(" ",u(14,15,"Description")," "),p(3),f(" ",u(17,17,"Purchased Price")," "),p(3),x(u(20,19,"Qty")),p(3),x(u(23,21,"Total")),p(3),f(" ",u(26,23,"Selling Price")," "),p(3),f(" ",u(29,25,"Del")," "))}function at(r,C){if(r&1){let e=b();l(0,"tr")(1,"td"),_(2),o(),l(3,"td"),_(4),o(),l(5,"td",60),y("click",function(){let t=s(e).$implicit,i=a();return c(i.openLabelPrint(t))}),P(6,"i",61),o(),l(7,"td"),_(8),o(),l(9,"td"),_(10),o(),l(11,"td",62),y("click",function(t){let i=s(e).rowIndex,m=a(),g=M(24);return c(m.openEdit(g,t,i,"price"))}),_(12),d(13,"currency"),o(),l(14,"td",62),y("click",function(t){let i=s(e).rowIndex,m=a(),g=M(24);return c(m.openEdit(g,t,i,"quantity"))}),_(15),o(),l(16,"td"),_(17),d(18,"currency"),o(),l(19,"td",62),y("click",function(t){let i=s(e).rowIndex,m=a(),g=M(24);return c(m.openEdit(g,t,i,"selling"))}),_(20),d(21,"currency"),o(),l(22,"td",63),y("click",function(){let t=s(e).rowIndex,i=a();return c(i.removeRow(t))}),P(23,"i",64),o()()}if(r&2){let e=C.$implicit,n=C.rowIndex;p(2),x(n+1),p(2),x(e.barcode||"---"),p(4),x(e.sku||"---"),p(2),x(e.product_name),p(2),f(" ",u(13,8,e.unit_price)," "),p(3),f(" ",e.quantity," "),p(2),f(" ",u(18,10,e.unit_price*e.quantity)," "),p(3),f(" ",u(21,12,e.selling_price)," ")}}function st(r,C){if(r&1&&(l(0,"h4",66),_(1),d(2,"translate"),o()),r&2){let e=a(2);p(),X(" ",u(2,2,"Total units:")," ",e.invoiceTotal.total_qty," ")}}function ct(r,C){if(r&1&&I(0,st,3,4,"h4",65),r&2){let e=a();h("ngIf",e.invoiceTotal.total_qty)}}function dt(r,C){r&1&&(l(0,"tr",67)(1,"td",68),_(2),d(3,"translate"),o()()),r&2&&(p(2),f(" ",u(3,1,"No data yet!")," "))}function ut(r,C){if(r&1){let e=b();l(0,"p-autoComplete",69,5),d(2,"translate"),d(3,"translate"),V("ngModelChange",function(t){s(e);let i=a();return w(i.search_product,t)||(i.search_product=t),c(t)}),y("completeMethod",function(t){s(e);let i=a();return c(i.searchItem(t))})("onKeyUp",function(t){s(e);let i=a();return c(i.submitInvoiceInput(t))}),o(),l(4,"p-button",70),d(5,"translate"),y("onClick",function(){s(e);let t=a();return c(t.dialog_products_visible=!0)}),o()}if(r&2){let e=a();v("ngModel",e.search_product),h("suggestions",e.searchedItems)("delay",150)("placeholder",u(2,6,"scan or search"))("emptyMessage",u(3,8,"No results found")),p(4),h("label",u(5,10,"Multi Select"))}}function mt(r,C){if(r&1){let e=b();l(0,"p-button",71),d(1,"translate"),y("onClick",function(){s(e);let t=a();return c(t.clearInvoice())}),o(),l(2,"p-button",72),d(3,"translate"),y("onClick",function(){s(e);let t=a();return c(t.checkout())}),o()}if(r&2){let e=a();h("label",u(1,5,"Clear"))("disabled",e.invoice().length==0),p(2),h("label",u(3,7,"Checkout"))("loading",e.loading())("disabled",e.invoice().length==0)}}function _t(r,C){if(r&1){let e=b();l(0,"p-inputNumber",73),V("ngModelChange",function(t){s(e);let i=a();return w(i.editingValue,t)||(i.editingValue=t),c(t)}),y("onBlur",function(){s(e);let t=a(),i=M(24);return c(t.applyEdit(i))})("onKeyDown",function(t){s(e);let i=a(),m=M(24);return c(i.submitEdit(t,m))}),o()}if(r&2){let e=a();v("ngModel",e.editingValue),h("maxFractionDigits",2)("min",0)("autofocus",!0)}}function gt(r,C){if(r&1){let e=b();l(0,"p-inputNumber",73),V("ngModelChange",function(t){s(e);let i=a();return w(i.editingValue,t)||(i.editingValue=t),c(t)}),y("onBlur",function(){s(e);let t=a(),i=M(24);return c(t.applyEdit(i))})("onKeyDown",function(t){s(e);let i=a(),m=M(24);return c(i.submitEdit(t,m))}),o()}if(r&2){let e=a();v("ngModel",e.editingValue),h("maxFractionDigits",2)("min",0)("autofocus",!0)}}function ht(r,C){if(r&1){let e=b();l(0,"p-inputNumber",74),V("ngModelChange",function(t){s(e);let i=a();return w(i.editingValue,t)||(i.editingValue=t),c(t)}),y("onBlur",function(){s(e);let t=a(),i=M(24);return c(t.applyEdit(i))})("onKeyDown",function(t){s(e);let i=a(),m=M(24);return c(i.submitEdit(t,m))}),o()}if(r&2){let e=a();v("ngModel",e.editingValue),h("maxFractionDigits",2)("minFractionDigits",0)("autofocus",!0)}}var Ue=(()=>{class r{constructor(){this.suppliersService=S(Qe),this.stockService=S(we),this.supplyService=S(qe),this.notificationsService=S(ne),this.confirmationService=S(te),this.localStorageService=S(_e),this.dollarPipe=S(N),this.dateService=S(Te),this.translate=S(de),this.decimalService=S(Be),this.currencyService=S(ge),this.dropDownVisible=!1,this.productDialogVisible=!1,this.supplierDialogVisible=!1,this.defaultCurrency=this.currencyService.defaultCurrency,this.exchangeRate=this.stockService.exchangeRate,this.vh=this.localStorageService.getSupplyPageViewHeight(),this.invoiceTotal=new z,this.search_product=null,this.searchedItems=[],this.suppliers=this.suppliersService.suppliers,this.view_currency="dollar",this.dialog_products_visible=!1,this.invoice=this.supplyService.invoice,this.submited=this.supplyService.signal_submited,this.products=this.stockService.products,this.loading=this.supplyService.signal_submit_loading,this.stockTableLoading=this.stockService.tableLoading,this.suppliersLoading=this.suppliersService.suppliersLoading,this.subscriptions=new U,this.priceTypes=Object.keys(Re),this.today=this.dateService.getCurrentDate(),this.payment_amount=this.supplyService.payment_amount,this.lbp_payment_amount=this.supplyService.lbp_payment_amount,this.modify_cash=this.supplyService.modify_cash,this.selected_supplier_id=this.supplyService.selected_supplier_id,this.supplier_balance_loading=this.suppliersService.signal_balanceLoading,this.supplier_balance=this.suppliersService.supplierTotalDebts$,this.editModeEnabled=!1,this.editingRowIndex=null,this.editingField="",this.labelPrintDialogVisible=!1,this.inventories=this.supplyService.inventories,this.loadingInventories=this.supplyService.loadingInventories,this.defaultInventory=this.supplyService.defaultInventory,this.selectedInventoryId=this.supplyService.selectedInventoryId}newSupplierCreated(e){this.suppliers.set([...this.suppliers(),e]),e&&this.onSupplierChange(e.account_id)}onSupplierChange(e){this.selected_supplier_id.set(e),this.getSupplierBalance()}onKeyDown(e){if(this.editModeEnabled||this.labelPrintDialogVisible||this.supplierDialogVisible||this.dropDownVisible||this.dialog_products_visible||this.productDialogVisible)return;let n=this.editPrice||this.editQty||this.payment_input,t=this.lira_input;(!n||!n.focused)&&(!t||!t.focused)&&this.focusBarcodeInput()}focusBarcodeInput(){this.barcodeInput.nativeElement.children[0].children[0].focus()}ngOnInit(){this.messages=[{severity:"info",detail:"No Invoice Yet!"}],this.calculateTotal(),this.subscriptions.add(this.supplyService.reset$.subscribe(e=>{e&&(this.init(),this.supplyService.reset$.next(!1))})),this.subscriptions.add(this.supplyService.barcodeResponse.subscribe(e=>{e&&(this.addProduct(e),this.supplyService.barcodeResponse.next(null))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}setPrice(e){this.updatedRowIndex=e}setQty(e){this.updatedRowIndex=e}onEditComplete(e){e.field=="unit_price"?this.invoice.update(n=>n.map((t,i)=>this.updatedRowIndex===i?q(R({},t),{unit_price:t.unit_price}):t)):e.field=="quantity"&&this.invoice.update(n=>n.map((t,i)=>this.updatedRowIndex===i?q(R({},t),{quantity:t.quantity}):t)),this.calculateTotal()}init(){this.supplyService.selected_supplier_id.set(null),this.supplyService.payment_amount.set(0),this.supplyService.modify_cash.set(!0),this.supplyService.invoice.set([]),this.submited.set(!1),this.calculateTotal()}clearInvoice(){this.confirmationService.confirm({key:"home",message:this.translate.instant("Are you sure you want to clear invoice?"),header:this.translate.instant("Warning"),acceptLabel:this.translate.instant("Yes"),rejectLabel:this.translate.instant("No"),icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.init()}})}searchItem(e){let n=this.products(),t=[],i=e.query;for(let m=0;m<n.length;m++){let g=n[m];g.product_name.toLowerCase().indexOf(i.toLowerCase())>-1&&t.push(g)}this.searchedItems=t}addProduct(e){let n=this.supplyService.factor(),t=structuredClone(this.invoice()),i=t.find(m=>m.product_id===e.product_id);if(i)i.quantity+=n;else{let m=e.unit_cost_usd,g=e.unit_price_usd;e.currency==="lira"&&(m=m/this.exchangeRate().rate_value,g=g/this.exchangeRate().rate_value),t.push({product_id:e.product_id,barcode:e.barcode,sku:e.sku,product_name:e.product_name,unit_cost:m,unit_price:m,selling_price:g,quantity:n,currency:e.currency})}this.invoice.set(t),this.supplyService.factor.set(1),this.calculateTotal()}submitInvoiceInput(e){e.key==="Enter"&&this.search_product&&(typeof this.search_product=="string"?this.submitBarcode(this.search_product):this.supplyService.barcodeResponse.next(this.search_product),this.search_product=null)}submitBarcode(e){if(e){let n=-1,t=["*","+"];for(let g=0;g<t.length;g++)if(e.indexOf(t[g])!==-1){n=e.indexOf(t[g]);break}let i=e.substring(0,n)||1,m=parseInt(e.substring(n+1,e.length));n!=-1&&n!=0?(this.supplyService.factor.set(parseInt(i)),this.supplyService.submitBarcode(m)):this.supplyService.submitBarcode(e)}}removeRow(e){this.invoice().splice(e,1),this.calculateTotal(),this.validateItems()}assignSelectedProducts(e){this.dialog_products_visible=!1,e.forEach(n=>{this.addProduct(n)})}calculateTotal(){let e=new z,n=this.invoice();return n.length>0&&(n.forEach(t=>{e.total_qty=this.decimalService.add(e.total_qty,t.quantity),e.cost_dollar=this.decimalService.add(e.cost_dollar,this.decimalService.multiply(t.unit_cost,t.quantity)),e.subtotal_dollar=this.decimalService.add(e.subtotal_dollar,this.decimalService.multiply(t.unit_price,t.quantity))}),e.total_dollar=e.subtotal_dollar),this.invoiceTotal=e,e}parseFloat(e){return parseFloat(e)}validateItems(){return!!this.invoice().find(n=>!n.unit_price||!n.quantity)}checkout(){let e=this.validateItems();e?(this.submited.set(!0),e&&this.notificationsService.showError("Please enter price for all items","home")):this.confirmationService.confirm({key:"home",message:this.translate.instant("Are you sure that you want to submit invoice ?"),header:this.translate.instant("Warning"),acceptLabel:this.translate.instant("Yes"),rejectLabel:this.translate.instant("No"),icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-success",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.supplyService.checkout({partner_id_fk:this.selected_supplier_id(),exchange_rate:this.stockService.exchangeRate().rate_value,total_cost:this.invoiceTotal.subtotal_dollar,currency:"dollar",inventory_id:this.selectedInventoryId(),items:this.invoice()},this.payment_amount(),this.modify_cash())}})}onUsdChange(e){this.lbp_payment_amount.set(this.dollarPipe.calculate(e))}onLbpChange(e){this.payment_amount.set(e/this.stockService.exchangeRate().rate_value)}getSupplierBalance(){this.payment_amount.set(0),this.lbp_payment_amount.set(0),this.selected_supplier_id()?this.suppliersService.getAccountTotalBalance(this.selected_supplier_id()):this.supplier_balance.set({id:0,balance:"0"})}calculateNewBalance(e,n=0,t=0){return n=parseFloat(n),n+e-t}onCreateProduct(e){this.addProduct(e),this.stockService.onCreateProduct(e)}openEdit(e,n,t,i){this.editingRowIndex=t,this.editingField=i;let m=this.invoice()[t];this.editingValue=i==="quantity"?m.quantity:i==="price"?m.unit_price:i==="selling"?m.selling_price:0,e.show(n)}applyEdit(e){if(this.editingRowIndex===null)return;let n=this.invoice()[this.editingRowIndex];this.editingField==="quantity"?n.quantity=this.editingValue:this.editingField==="price"?n.unit_price=this.editingValue:this.editingField==="selling"&&(n.selling_price=this.editingValue),this.editingRowIndex=null,this.editingField="",e.hide(),this.calculateTotal()}submitEdit(e,n){e.key=="Enter"&&this.applyEdit(n)}openLabelPrint(e){this.printData={barcode:e.barcode,shortName:e.product_name,price:e.unit_price},this.labelPrintDialogVisible=!0}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=A({type:r,selectors:[["app-return-purchase-home"]],viewQuery:function(n,t){if(n&1&&(T(Ye,5,Y),T(Ge,5),T(Je,5),T(Xe,5),T(Ze,5),T($e,5)),n&2){let i;B(i=E())&&(t.barcodeInput=i.first),B(i=E())&&(t.invoiceTable=i.first),B(i=E())&&(t.editQty=i.first),B(i=E())&&(t.editPrice=i.first),B(i=E())&&(t.payment_input=i.first),B(i=E())&&(t.lira_input=i.first)}},hostBindings:function(n,t){n&1&&y("keydown",function(m){return t.onKeyDown(m)},!1,G)},decls:35,vars:16,consts:[["desktopTable",""],["invoiceTable",""],["op",""],["payment_input",""],["lira_input",""],["barcodeInput",""],[1,"grid","m-1"],[1,"col-12"],["styleClass","mb-3 p-2"],["pTemplate","left"],["pTemplate","center"],["pTemplate","right"],["pTemplate","body"],["styleClass","mt-2"],[1,"grid"],["dataKey","product_id","styleClass","p-datatable-sm ","editMode","cell",3,"onEditComplete","value"],["pTemplate","header"],["pTemplate","summary"],["pTemplate","emptymessage"],["styleClass","mt-2 p-2"],["price","cost",3,"onHide","onSubmit","visible","products","tableLoading"],["mode","add",3,"visibleChange","onCreate","visible"],["appendTo","body",3,"onShow","onHide","dismissable"],[1,"formgrid","grid"],[1,"field","col-12"],["class","p-inputtext-sm","step","0","autoSelect","",3,"ngModel","maxFractionDigits","min","autofocus","ngModelChange","onBlur","onKeyDown",4,"ngIf"],["class","p-inputtext-sm","min","0.1","step","0.1","autoSelect","",3,"ngModel","maxFractionDigits","minFractionDigits","autofocus","ngModelChange","onBlur","onKeyDown",4,"ngIf"],[3,"visibleChange","visible","printData"],[3,"visibleChange","onCreate","visible","mode"],[1,"text-green-600","m-2"],[1,"mr-1"],["id","inventory_id","styleClass","p-inputtext-sm","scrollHeight","400px","appendTo","body","optionLabel","inventory_name","optionValue","inventory_id","filterBy","inventory_name",3,"ngModelChange","autoOptionFocus","ngModel","options","placeholder","emptyMessage","filter"],["icon","pi pi-plus","size","small","severity","success","styleClass","ml-3",3,"onClick","label"],[1,"text-primary","m-2"],[1,"col-2"],[1,"flex","flex-column","gap-2"],["for","supplier"],["id","supplier","styleClass","p-inputtext-sm","id","supplier","appendTo","body","optionLabel","name","optionValue","account_id","filterBy","name",3,"onShow","onHide","ngModelChange","loading","ngModel","options","placeholder","emptyMessage","filter","showClear","autoOptionFocus"],["class","col-2 align-self-end",4,"ngIf"],[1,"col-4","flex","justify-content-end"],[1,"col-2","align-self-end"],["icon","pi pi-plus","severity","success","size","small",3,"onClick","label"],["for","currency"],["id","currency","autoSelect","","mode","currency","currency","USD","locale","en-US","styleClass","w-full",1,"p-inputtext-sm",3,"ngModelChange","ngModel","ngModelOptions","buttonLayout","step","min"],["for","lira_input"],["id","lira_input","inputId","currency-lb","autoSelect","","mode","currency","currency","LBP","locale","en-LB","styleClass","w-full",1,"p-inputtext-sm","w-full",3,"ngModelChange","ngModel","ngModelOptions","buttonLayout","step","min"],[1,"col-2","flex","align-items-center","justify-content-center","gap-2"],["for","modifyCash"],["id","modifyCash",3,"ngModelChange","ngModel"],[1,"text-right"],[1,"text-green-500"],["loaderClass","flex-grow-1 flex-shrink-1",2,"width","50%",3,"isLoading","loadingBar"],["colspan","2"],["styleClass","m-0"],["loaderClass","flex-grow-1 flex-shrink-1",2,"width","63%",3,"isLoading","loadingBar"],["width","5%"],["width","10%"],["width","25%"],["width","15%"],["width","15%","pTooltip","This will update unit price","tooltipPosition","top"],[1,"help-color",3,"click"],[1,"pi","pi-barcode"],[1,"editable",3,"click"],[1,"danger-hover",3,"click"],[1,"pi","pi-trash"],["class","text-center m-0",4,"ngIf"],[1,"text-center","m-0"],[1,"surface-300"],["colspan","10"],["field","product_name","name","barcodeInput","spellcheck","false",1,"p-inputtext-sm",3,"ngModelChange","completeMethod","onKeyUp","ngModel","suggestions","delay","placeholder","emptyMessage"],["styleClass","mx-2","severity","warning","size","small","icon","pi pi-list",3,"onClick","label"],["icon","pi pi-times","severity","danger","size","small","styleClass","mx-2",3,"onClick","label","disabled"],["icon","pi pi-cart-plus","severity","success","size","small",3,"onClick","label","loading","disabled"],["step","0","autoSelect","",1,"p-inputtext-sm",3,"ngModelChange","onBlur","onKeyDown","ngModel","maxFractionDigits","min","autofocus"],["min","0.1","step","0.1","autoSelect","",1,"p-inputtext-sm",3,"ngModelChange","onBlur","onKeyDown","ngModel","maxFractionDigits","minFractionDigits","autofocus"]],template:function(n,t){if(n&1){let i=b();l(0,"div",6)(1,"div",7)(2,"p-toolbar",8),I(3,et,3,3,"ng-template",9)(4,tt,8,16,"ng-template",10)(5,it,3,3,"ng-template",11),o(),l(6,"p-card"),I(7,lt,12,18,"ng-template",12),o(),l(8,"p-card",13,0)(10,"div",14)(11,"div",7)(12,"p-table",15,1),y("onEditComplete",function(g){return s(i),c(t.onEditComplete(g))}),I(14,pt,30,27,"ng-template",16)(15,at,24,14,"ng-template",12)(16,ct,1,1,"ng-template",17)(17,dt,4,3,"ng-template",18),o(),l(18,"p-toolbar",19),I(19,ut,6,12,"ng-template",9)(20,mt,4,9,"ng-template",11),o()()()()()(),l(21,"products-dialog",20),y("onHide",function(){return s(i),c(t.dialog_products_visible=!1)})("onSubmit",function(g){return s(i),c(t.assignSelectedProducts(g))}),o(),l(22,"product-form",21),V("visibleChange",function(g){return s(i),w(t.productDialogVisible,g)||(t.productDialogVisible=g),c(g)}),y("onCreate",function(g){return s(i),c(t.onCreateProduct(g))}),o(),l(23,"p-overlayPanel",22,2),y("onShow",function(){return s(i),c(t.editModeEnabled=!0)})("onHide",function(){return s(i),c(t.editModeEnabled=!1)}),l(25,"div",23)(26,"div",24)(27,"label"),_(28),d(29,"translate"),o(),I(30,_t,1,4,"p-inputNumber",25)(31,gt,1,4,"p-inputNumber",25)(32,ht,1,4,"p-inputNumber",26),o()()(),l(33,"label-print",27),V("visibleChange",function(g){return s(i),w(t.labelPrintDialogVisible,g)||(t.labelPrintDialogVisible=g),c(g)}),o(),l(34,"supplier-dialog",28),V("visibleChange",function(g){return s(i),w(t.supplierDialogVisible,g)||(t.supplierDialogVisible=g),c(g)}),y("onCreate",function(g){return s(i),c(t.newSupplierCreated(g))}),o()}n&2&&(p(12),h("value",t.invoice()),p(9),h("visible",t.dialog_products_visible)("products",t.products)("tableLoading",t.stockTableLoading()),p(),v("visible",t.productDialogVisible),p(),h("dismissable",!0),p(5),f("",u(29,14,t.editingField),": "),p(2),h("ngIf",t.editingField==="price"),p(),h("ngIf",t.editingField==="selling"),p(),h("ngIf",t.editingField==="quantity"),p(),v("visible",t.labelPrintDialogVisible),h("printData",t.printData),p(),v("visible",t.supplierDialogVisible),h("mode","add"))},dependencies:[Z,L,pe,ie,Ve,se,ke,He,xe,be,k,fe,oe,re,O,Oe,F,he,Ee,W,Ie,$,N,ue],styles:["[_nghost-%COMP%]  .p-fieldset .p-fieldset-content{padding:.5rem}[_nghost-%COMP%]  .p-inputnumber-input{width:100%}td[_ngcontent-%COMP%]:has(span.p-inputnumber.p-component){padding:0}td[_ngcontent-%COMP%]:has(.no-padding){padding:0}.input-align-center[_ngcontent-%COMP%], [_nghost-%COMP%]   .editable[_ngcontent-%COMP%]     span.p-inputnumber.p-component .p-inputnumber-input{text-align:center}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{appearance:textfield;-moz-appearance:textfield}[_nghost-%COMP%]  .small-button{font-size:.5rem!important;padding:.2rem .4rem!important;width:2rem!important}[_nghost-%COMP%]  .small-input>span>input{padding:.3rem!important;width:2rem!important;text-align:center}[_nghost-%COMP%]  .invoice-body>div>div{padding:0!important}[_nghost-%COMP%]  .p-dataview-emptymessage{display:none}[_nghost-%COMP%]  .p-card-content{padding:0!important}.invalid[_ngcontent-%COMP%]{border-color:var(--red-500)!important}.category-cards[_ngcontent-%COMP%]{border-radius:6px;color:#343a40;text-align:center;padding:1rem;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f}.selected[_ngcontent-%COMP%]{background-color:#343a40;color:#fff}.editable-cell[_ngcontent-%COMP%]{cursor:pointer;background-color:#f8f9fa}.editable[_ngcontent-%COMP%]{cursor:pointer;background-color:#e6e6e6}.editable[_ngcontent-%COMP%]:hover{background-color:#bebebe}"]})}}return r})();var yt=[{path:"",component:Ue}],Ae=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=D({type:r})}static{this.\u0275inj=H({imports:[j.forChild(yt),j]})}}return r})();var Ri=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=D({type:r})}static{this.\u0275inj=H({imports:[ee,Ae,L,ae,Me,me,ce,Le,Ne,De,Se,ve,k,Ce,We,Ke,le,O,Fe,F,ye,Pe,W]})}}return r})();export{Ri as SupplyModule};
