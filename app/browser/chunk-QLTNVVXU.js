import{C as o,Vb as p,Wb as c,d as n,da as i,pb as h,y as l}from"./chunk-DSVZHE42.js";var $=(()=>{class s{constructor(){this.http=o(h),this.notificationService=o(p),this.api=o(c),this.suppliers=i([]),this.supplierTotalDebts$=i({id:0,balance:"0"}),this.selectedSupplier=i(null),this.supplierBalance$=new n([]),this.tableLoading=i(!1),this.suppliersLoading=i(!1),this.signal_balanceLoading=i(!1),this.submitLoading=i(!1),this.host=this.api.host,this.getSuppliers()}getSuppliers(){this.suppliersLoading.set(!0),this.http.get(`${this.host()}/suppliers`).subscribe({next:t=>{this.suppliers.set(t)},error:t=>{this.notificationService.handleError(t.error,"suppliers"),this.suppliersLoading.set(!1)},complete:()=>{this.suppliersLoading.set(!1)}})}deleteSupplier(t){this.submitLoading.set(!0),this.http.delete(`${this.host()}/suppliers/${t.account_id}`).subscribe({next:e=>{this.notificationService.showSuccess(e.message),this.suppliers.update(a=>{let r=this.suppliers().findIndex(u=>u.account_id===t.account_id);return a.splice(r,1),[...a]})},error:e=>{this.notificationService.handleError(e.error,"home"),this.submitLoading.set(!1)},complete:()=>{this.submitLoading.set(!1)}})}getSupplierTransactions(t,e,a){this.tableLoading.set(!0),this.http.get(`${this.host()}/suppliers/transactions/${t}&${e}&${a}`).subscribe({next:r=>{this.supplierBalance$.next(r)},error:r=>{this.notificationService.handleError(r.error,"home"),this.tableLoading.set(!1)},complete:()=>{this.tableLoading.set(!1)}})}getAccountTotalBalance(t){this.signal_balanceLoading.set(!0),this.http.get(`${this.host()}/suppliers/${t}/balance`).subscribe({next:e=>{this.supplierTotalDebts$.set(e)},error:e=>{this.notificationService.handleError(e.error,"home"),this.signal_balanceLoading.set(!1)},complete:()=>{this.signal_balanceLoading.set(!1)}})}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=l({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{$ as a};
