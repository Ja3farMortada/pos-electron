import{a as g}from"./chunk-AFTSMEUE.js";import{C as s,Vb as h,Wb as c,da as i,pb as n,y as o}from"./chunk-DSVZHE42.js";import{g as a}from"./chunk-GAL4ENT6.js";var v=(()=>{class r{constructor(){this.http=s(n),this.notificationService=s(h),this.api=s(c),this.localStorageService=s(g),this.printPageDialogVisible=i(!1),this.printPageSettingsLoading=i(!1),this.printPageSettings=i(null),this.formSubmitLoading=i(!1),this.printerDialogVisible=i(!1),this.printerSettings=i(this.localStorageService.getThermalSettings()),this.normalPrinterEnabled=i(this.getNormalPrinterStatus()),this.thermalPrinterEnabled=i(this.getThermalPrinterStatus()),this.getPrintPageSettings()}getPrintPageSettings(){this.printPageSettingsLoading.set(!0),this.http.get(`${this.api.host()}/settings/printpage-settings`).subscribe({next:t=>{this.printPageSettings.set(t),this.printPageSettingsLoading.set(!1)},error:t=>{this.notificationService.showError(t.error),this.printPageSettingsLoading.set(!1)}})}submitPrintPageForm(t){this.formSubmitLoading.set(!0),this.http.put(`${this.api.host()}/settings/printpage-settings`,t).subscribe({next:e=>{this.notificationService.showSuccess(e.message),this.getPrintPageSettings(),this.formSubmitLoading.set(!1),this.printPageDialogVisible.set(!1)},error:e=>{this.notificationService.showError(e.error),this.formSubmitLoading.set(!1)}})}submitThermalPrinterSettings(t){return a(this,null,function*(){try{yield this.localStorageService.setThermalSettings(t),this.printerSettings.set(this.localStorageService.getThermalSettings()),this.printerDialogVisible.set(!1),this.notificationService.showSuccess("Printer settings updates successfully!")}catch(e){this.notificationService.showError(e)}})}getNormalPrinterStatus(){return this.localStorageService.getFromStorage("normal-printer-status",!0)}updateNormalPrinterStatus(t){try{this.localStorageService.setToStorage("normal-printer-status",t),this.normalPrinterEnabled.set(this.getNormalPrinterStatus()),this.notificationService.showSuccess("Printer settings updates successfully!")}catch(e){this.notificationService.showError(e)}}getThermalPrinterStatus(){return this.localStorageService.getFromStorage("thermal-printer-status",!1)}updateThermalPrinterStatus(t){try{this.localStorageService.setToStorage("thermal-printer-status",t),this.thermalPrinterEnabled.set(this.getThermalPrinterStatus()),this.notificationService.showSuccess("Printer settings updates successfully!")}catch(e){this.notificationService.showError(e)}}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275prov=o({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{v as a};
