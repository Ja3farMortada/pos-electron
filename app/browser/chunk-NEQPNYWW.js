import{a as Pt}from"./chunk-AFTSMEUE.js";import{b as Pe}from"./chunk-4A2WLUYH.js";import{A as Tt,C as O,E as At,G as Rt,Vb as xe,Wb as Oe,b as Et,d as St,da as k,pb as xt,r as Re,s as Nt,y as j,yb as Ot,z as Ct}from"./chunk-DSVZHE42.js";import{e as kt}from"./chunk-GAL4ENT6.js";var mt={};kt(mt,{Fetch:()=>ve,Manager:()=>oe,NodeWebSocket:()=>J,NodeXHR:()=>X,Socket:()=>ne,WebSocket:()=>J,WebTransport:()=>re,XHR:()=>X,connect:()=>ce,default:()=>ce,io:()=>ce,protocol:()=>pt});var M=Object.create(null);M.open="0";M.close="1";M.ping="2";M.pong="3";M.message="4";M.upgrade="5";M.noop="6";var pe=Object.create(null);Object.keys(M).forEach(i=>{pe[M[i]]=i});var ge={type:"error",data:"parser error"};var It=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",qt=typeof ArrayBuffer=="function",Dt=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer,me=({type:i,data:t},e,r)=>It&&t instanceof Blob?e?r(t):Lt(t,r):qt&&(t instanceof ArrayBuffer||Dt(t))?e?r(t):Lt(new Blob([t]),r):r(M[i]+(t||"")),Lt=(i,t)=>{let e=new FileReader;return e.onload=function(){let r=e.result.split(",")[1];t("b"+(r||""))},e.readAsDataURL(i)};function Bt(i){return i instanceof Uint8Array?i:i instanceof ArrayBuffer?new Uint8Array(i):new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}var tt;function Ft(i,t){if(It&&i.data instanceof Blob)return i.data.arrayBuffer().then(Bt).then(t);if(qt&&(i.data instanceof ArrayBuffer||Dt(i.data)))return t(Bt(i.data));me(i,!1,e=>{tt||(tt=new TextEncoder),t(tt.encode(e))})}var Mt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",we=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let i=0;i<Mt.length;i++)we[Mt.charCodeAt(i)]=i;var Ut=i=>{let t=i.length*.75,e=i.length,r,n=0,s,o,c,h;i[i.length-1]==="="&&(t--,i[i.length-2]==="="&&t--);let a=new ArrayBuffer(t),u=new Uint8Array(a);for(r=0;r<e;r+=4)s=we[i.charCodeAt(r)],o=we[i.charCodeAt(r+1)],c=we[i.charCodeAt(r+2)],h=we[i.charCodeAt(r+3)],u[n++]=s<<2|o>>4,u[n++]=(o&15)<<4|c>>2,u[n++]=(c&3)<<6|h&63;return a};var ki=typeof ArrayBuffer=="function",ye=(i,t)=>{if(typeof i!="string")return{type:"message",data:Vt(i,t)};let e=i.charAt(0);return e==="b"?{type:"message",data:Ei(i.substring(1),t)}:pe[e]?i.length>1?{type:pe[e],data:i.substring(1)}:{type:pe[e]}:ge},Ei=(i,t)=>{if(ki){let e=Ut(i);return Vt(e,t)}else return{base64:!0,data:i}},Vt=(i,t)=>{switch(t){case"blob":return i instanceof Blob?i:new Blob([i]);case"arraybuffer":default:return i instanceof ArrayBuffer?i:i.buffer}};var Ht="",$t=(i,t)=>{let e=i.length,r=new Array(e),n=0;i.forEach((s,o)=>{me(s,!1,c=>{r[o]=c,++n===e&&t(r.join(Ht))})})},Wt=(i,t)=>{let e=i.split(Ht),r=[];for(let n=0;n<e.length;n++){let s=ye(e[n],t);if(r.push(s),s.type==="error")break}return r};function Kt(){return new TransformStream({transform(i,t){Ft(i,e=>{let r=e.length,n;if(r<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,r);else if(r<65536){n=new Uint8Array(3);let s=new DataView(n.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{n=new Uint8Array(9);let s=new DataView(n.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}i.data&&typeof i.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(e)})}})}var it;function Le(i){return i.reduce((t,e)=>t+e.length,0)}function Be(i,t){if(i[0].length===t)return i.shift();let e=new Uint8Array(t),r=0;for(let n=0;n<t;n++)e[n]=i[0][r++],r===i[0].length&&(i.shift(),r=0);return i.length&&r<i[0].length&&(i[0]=i[0].slice(r)),e}function Zt(i,t){it||(it=new TextDecoder);let e=[],r=0,n=-1,s=!1;return new TransformStream({transform(o,c){for(e.push(o);;){if(r===0){if(Le(e)<1)break;let h=Be(e,1);s=(h[0]&128)===128,n=h[0]&127,n<126?r=3:n===126?r=1:r=2}else if(r===1){if(Le(e)<2)break;let h=Be(e,2);n=new DataView(h.buffer,h.byteOffset,h.length).getUint16(0),r=3}else if(r===2){if(Le(e)<8)break;let h=Be(e,8),a=new DataView(h.buffer,h.byteOffset,h.length),u=a.getUint32(0);if(u>Math.pow(2,21)-1){c.enqueue(ge);break}n=u*Math.pow(2,32)+a.getUint32(4),r=3}else{if(Le(e)<n)break;let h=Be(e,n);c.enqueue(ye(s?h:it.decode(h),t)),r=0}if(n===0||n>i){c.enqueue(ge);break}}}})}var rt=4;function N(i){if(i)return Si(i)}function Si(i){for(var t in N.prototype)i[t]=N.prototype[t];return i}N.prototype.on=N.prototype.addEventListener=function(i,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(t),this};N.prototype.once=function(i,t){function e(){this.off(i,e),t.apply(this,arguments)}return e.fn=t,this.on(i,e),this};N.prototype.off=N.prototype.removeListener=N.prototype.removeAllListeners=N.prototype.removeEventListener=function(i,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+i];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var r,n=0;n<e.length;n++)if(r=e[n],r===t||r.fn===t){e.splice(n,1);break}return e.length===0&&delete this._callbacks["$"+i],this};N.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+i],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(e){e=e.slice(0);for(var r=0,n=e.length;r<n;++r)e[r].apply(this,t)}return this};N.prototype.emitReserved=N.prototype.emit;N.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]};N.prototype.hasListeners=function(i){return!!this.listeners(i).length};var K=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),B=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Yt="arraybuffer";function Ie(i,...t){return t.reduce((e,r)=>(i.hasOwnProperty(r)&&(e[r]=i[r]),e),{})}var Ni=B.setTimeout,Ci=B.clearTimeout;function Z(i,t){t.useNativeTimers?(i.setTimeoutFn=Ni.bind(B),i.clearTimeoutFn=Ci.bind(B)):(i.setTimeoutFn=B.setTimeout.bind(B),i.clearTimeoutFn=B.clearTimeout.bind(B))}var Ti=1.33;function Xt(i){return typeof i=="string"?Ai(i):Math.ceil((i.byteLength||i.size)*Ti)}function Ai(i){let t=0,e=0;for(let r=0,n=i.length;r<n;r++)t=i.charCodeAt(r),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(r++,e+=4);return e}function qe(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Jt(i){let t="";for(let e in i)i.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(i[e]));return t}function zt(i){let t={},e=i.split("&");for(let r=0,n=e.length;r<n;r++){let s=e[r].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}var De=class extends Error{constructor(t,e,r){super(t),this.description=e,this.context=r,this.type="TransportError"}},Y=class extends N{constructor(t){super(),this.writable=!1,Z(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,r){return super.emitReserved("error",new De(t,e,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){let e=ye(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){let t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){let e=Jt(t);return e.length?"?"+e:""}};var ae=class extends Y{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";let e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||e()})),this.writable||(r++,this.once("drain",function(){--r||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){let e=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Wt(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){let t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,$t(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=qe()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}};var jt=!1;try{jt=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}var Qt=jt;function Ri(){}var nt=class extends ae{constructor(t){if(super(t),typeof location<"u"){let e=location.protocol==="https:",r=location.port;r||(r=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,e){let r=this.request({method:"POST",data:t});r.on("success",e),r.on("error",(n,s)=>{this.onError("xhr post error",n,s)})}doPoll(){let t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,r)=>{this.onError("xhr poll error",e,r)}),this.pollXhr=t}},Fe=(()=>{class i extends N{constructor(e,r,n){super(),this.createRequest=e,Z(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;let r=Ie(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;let n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=i.requestsCount++,i.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Ri,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete i.requests[this._index],this._xhr=null}}_onLoad(){let e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}return i.requestsCount=0,i.requests={},i})();if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Gt);else if(typeof addEventListener=="function"){let i="onpagehide"in B?"pagehide":"unload";addEventListener(i,Gt,!1)}}function Gt(){for(let i in Fe.requests)Fe.requests.hasOwnProperty(i)&&Fe.requests[i].abort()}var xi=function(){let i=ei({xdomain:!1});return i&&i.responseType!==null}(),X=class extends nt{constructor(t){super(t);let e=t&&t.forceBase64;this.supportsBinary=xi&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Fe(ei,this.uri(),t)}};function ei(i){let t=i.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Qt))return new XMLHttpRequest}catch{}if(!t)try{return new B[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}var ti=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",ot=class extends Y{get name(){return"websocket"}doOpen(){let t=this.uri(),e=this.opts.protocols,r=ti?{}:Ie(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,r)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let r=t[e],n=e===t.length-1;me(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}n&&K(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=qe()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}},st=B.WebSocket||B.MozWebSocket,J=class extends ot{createSocket(t,e,r){return ti?new st(t,e,r):e?new st(t,e):new st(t)}doWrite(t,e){this.ws.send(e)}};var re=class extends Y{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{let e=Zt(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(e).getReader(),n=Kt();n.readable.pipeTo(t.writable),this._writer=n.writable.getWriter();let s=()=>{r.read().then(({done:c,value:h})=>{c||(this.onPacket(h),s())}).catch(c=>{})};s();let o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let r=t[e],n=e===t.length-1;this._writer.write(r).then(()=>{n&&K(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}};var ct={websocket:J,webtransport:re,polling:X};var Oi=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Pi=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function he(i){if(i.length>8e3)throw"URI too long";let t=i,e=i.indexOf("["),r=i.indexOf("]");e!=-1&&r!=-1&&(i=i.substring(0,e)+i.substring(e,r).replace(/:/g,";")+i.substring(r,i.length));let n=Oi.exec(i||""),s={},o=14;for(;o--;)s[Pi[o]]=n[o]||"";return e!=-1&&r!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=Li(s,s.path),s.queryKey=Bi(s,s.query),s}function Li(i,t){let e=/\/{2,9}/g,r=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Bi(i,t){let e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,n,s){n&&(e[n]=s)}),e}var at=typeof addEventListener=="function"&&typeof removeEventListener=="function",Me=[];at&&addEventListener("offline",()=>{Me.forEach(i=>i())},!1);var Ue=(()=>{class i extends N{constructor(e,r){if(super(),this.binaryType=Yt,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(r=e,e=null),e){let n=he(e);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=he(r.host).host);Z(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{let s=n.prototype.name;this.transports.push(s),this._transportsByName[s]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=zt(this.opts.query)),at&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Me.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){let r=Object.assign({},this.opts.query);r.EIO=rt,r.transport=e,this.id&&(r.sid=this.id);let n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let e=this.opts.rememberUpgrade&&i.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";let r=this.createTransport(e);r.open(),this.setTransport(r)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",i.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let r=new Error("server error");r.code=e.data,this._onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){let s=this.writeBuffer[n].data;if(s&&(r+=Xt(s)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,K(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,r,n){return this._sendPacket("message",e,r,n),this}send(e,r,n){return this._sendPacket("message",e,r,n),this}_sendPacket(e,r,n,s){if(typeof r=="function"&&(s=r,r=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;let o={type:e,data:r,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){let e=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(i.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),at&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let n=Me.indexOf(this._offlineEventListener);n!==-1&&Me.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this._prevBufferLen=0}}}return i.protocol=rt,i})(),Ve=class extends Ue{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),r=!1;Ue.priorWebsocketSuccess=!1;let n=()=>{r||(e.send([{type:"ping",data:"probe"}]),e.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Ue.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{let l=new Error("probe error");l.transport=e.name,this.emitReserved("upgradeError",l)}}))};function s(){r||(r=!0,u(),e.close(),e=null)}let o=f=>{let l=new Error("probe error: "+f);l.transport=e.name,s(),this.emitReserved("upgradeError",l)};function c(){o("transport closed")}function h(){o("socket closed")}function a(f){e&&f.name!==e.name&&s()}let u=()=>{e.removeListener("open",n),e.removeListener("error",o),e.removeListener("close",c),this.off("close",h),this.off("upgrading",a)};e.once("open",n),e.once("error",o),e.once("close",c),this.once("close",h),this.once("upgrading",a),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){let e=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&e.push(t[r]);return e}},ue=class extends Ve{constructor(t,e={}){let r=typeof t=="object"?t:e;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(n=>ct[n]).filter(n=>!!n)),super(t,r)}};var ve=class extends ae{doPoll(){this._fetch().then(t=>{if(!t.ok)return this.onError("fetch read error",t.status,t);t.text().then(e=>this.onData(e))}).catch(t=>{this.onError("fetch read error",t)})}doWrite(t,e){this._fetch(t).then(r=>{if(!r.ok)return this.onError("fetch write error",r.status,r);e()}).catch(r=>{this.onError("fetch write error",r)})}_fetch(t){var e;let r=t!==void 0,n=new Headers(this.opts.extraHeaders);return r&&n.set("content-type","text/plain;charset=UTF-8"),(e=this.socket._cookieJar)===null||e===void 0||e.appendCookies(n),fetch(this.uri(),{method:r?"POST":"GET",body:r?t:null,headers:n,credentials:this.opts.withCredentials?"include":"omit"}).then(s=>{var o;return(o=this.socket._cookieJar)===null||o===void 0||o.parseCookies(s.headers.getSetCookie()),s})}};var Un=ue.protocol;function ii(i,t="",e){let r=i;e=e||typeof location<"u"&&location,i==null&&(i=e.protocol+"//"+e.host),typeof i=="string"&&(i.charAt(0)==="/"&&(i.charAt(1)==="/"?i=e.protocol+i:i=e.host+i),/^(https?|wss?):\/\//.test(i)||(typeof e<"u"?i=e.protocol+"//"+i:i="https://"+i),r=he(i)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";let s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(e&&e.port===r.port?"":":"+r.port),r}var gt={};kt(gt,{Decoder:()=>lt,Encoder:()=>ft,PacketType:()=>v,protocol:()=>pt});var Ii=typeof ArrayBuffer=="function",qi=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer,ri=Object.prototype.toString,Di=typeof Blob=="function"||typeof Blob<"u"&&ri.call(Blob)==="[object BlobConstructor]",Fi=typeof File=="function"||typeof File<"u"&&ri.call(File)==="[object FileConstructor]";function be(i){return Ii&&(i instanceof ArrayBuffer||qi(i))||Di&&i instanceof Blob||Fi&&i instanceof File}function _e(i,t){if(!i||typeof i!="object")return!1;if(Array.isArray(i)){for(let e=0,r=i.length;e<r;e++)if(_e(i[e]))return!0;return!1}if(be(i))return!0;if(i.toJSON&&typeof i.toJSON=="function"&&arguments.length===1)return _e(i.toJSON(),!0);for(let e in i)if(Object.prototype.hasOwnProperty.call(i,e)&&_e(i[e]))return!0;return!1}function ni(i){let t=[],e=i.data,r=i;return r.data=ht(e,t),r.attachments=t.length,{packet:r,buffers:t}}function ht(i,t){if(!i)return i;if(be(i)){let e={_placeholder:!0,num:t.length};return t.push(i),e}else if(Array.isArray(i)){let e=new Array(i.length);for(let r=0;r<i.length;r++)e[r]=ht(i[r],t);return e}else if(typeof i=="object"&&!(i instanceof Date)){let e={};for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=ht(i[r],t));return e}return i}function si(i,t){return i.data=ut(i.data,t),delete i.attachments,i}function ut(i,t){if(!i)return i;if(i&&i._placeholder===!0){if(typeof i.num=="number"&&i.num>=0&&i.num<t.length)return t[i.num];throw new Error("illegal attachments")}else if(Array.isArray(i))for(let e=0;e<i.length;e++)i[e]=ut(i[e],t);else if(typeof i=="object")for(let e in i)Object.prototype.hasOwnProperty.call(i,e)&&(i[e]=ut(i[e],t));return i}var Mi=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],pt=5,v=function(i){return i[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK",i}(v||{}),ft=class{constructor(t){this.replacer=t}encode(t){return(t.type===v.EVENT||t.type===v.ACK)&&_e(t)?this.encodeAsBinary({type:t.type===v.EVENT?v.BINARY_EVENT:v.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===v.BINARY_EVENT||t.type===v.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){let e=ni(t),r=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(r),n}};function oi(i){return Object.prototype.toString.call(i)==="[object Object]"}var lt=class i extends N{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);let r=e.type===v.BINARY_EVENT;r||e.type===v.BINARY_ACK?(e.type=r?v.EVENT:v.ACK,this.reconstructor=new dt(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(be(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0,r={type:Number(t.charAt(0))};if(v[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===v.BINARY_EVENT||r.type===v.BINARY_ACK){let s=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);let o=t.substring(s,e);if(o!=Number(o)||t.charAt(e)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(t.charAt(e+1)==="/"){let s=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););r.nsp=t.substring(s,e)}else r.nsp="/";let n=t.charAt(e+1);if(n!==""&&Number(n)==n){let s=e+1;for(;++e;){let o=t.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===t.length)break}r.id=Number(t.substring(s,e+1))}if(t.charAt(++e)){let s=this.tryParse(t.substr(e));if(i.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case v.CONNECT:return oi(e);case v.DISCONNECT:return e===void 0;case v.CONNECT_ERROR:return typeof e=="string"||oi(e);case v.EVENT:case v.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&Mi.indexOf(e[0])===-1);case v.ACK:case v.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},dt=class{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){let e=si(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function q(i,t,e){return i.on(t,e),function(){i.off(t,e)}}var Ui=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),ne=class extends N{constructor(t,e,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let t=this.io;this.subs=[q(t,"open",this.onopen.bind(this)),q(t,"packet",this.onpacket.bind(this)),q(t,"error",this.onerror.bind(this)),q(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var r,n,s;if(Ui.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;let o={type:v.EVENT,data:e};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){let u=this.ids++,f=e.pop();this._registerAckCallback(u,f),o.id=u}let c=(n=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||n===void 0?void 0:n.writable,h=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!c||(h?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,e){var r;let n=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(n===void 0){this.acks[t]=e;return}let s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);e.call(this,new Error("operation has timed out"))},n),o=(...c)=>{this.io.clearTimeoutFn(s),e.apply(this,c)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...e){return new Promise((r,n)=>{let s=(o,c)=>o?n(o):r(c);s.withError=!0,e.push(s),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());let r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...s)=>r!==this._queue[0]?void 0:(n!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(n)):(this._queue.shift(),e&&e(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;let e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:v.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){let r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case v.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case v.EVENT:case v.BINARY_EVENT:this.onevent(t);break;case v.ACK:case v.BINARY_ACK:this.onack(t);break;case v.DISCONNECT:this.ondisconnect();break;case v.CONNECT_ERROR:this.destroy();let r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){let e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){let e=this._anyListeners.slice();for(let r of e)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){let e=this,r=!1;return function(...n){r||(r=!0,e.packet({type:v.ACK,id:t,data:n}))}}onack(t){let e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:v.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){let e=this._anyListeners;for(let r=0;r<e.length;r++)if(t===e[r])return e.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){let e=this._anyOutgoingListeners;for(let r=0;r<e.length;r++)if(t===e[r])return e.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let e=this._anyOutgoingListeners.slice();for(let r of e)r.apply(this,t.data)}}};function se(i){i=i||{},this.ms=i.min||100,this.max=i.max||1e4,this.factor=i.factor||2,this.jitter=i.jitter>0&&i.jitter<=1?i.jitter:0,this.attempts=0}se.prototype.duration=function(){var i=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*i);i=Math.floor(t*10)&1?i+e:i-e}return Math.min(i,this.max)|0};se.prototype.reset=function(){this.attempts=0};se.prototype.setMin=function(i){this.ms=i};se.prototype.setMax=function(i){this.max=i};se.prototype.setJitter=function(i){this.jitter=i};var oe=class extends N{constructor(t,e){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Z(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((r=e.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new se({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;let n=e.parser||gt;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new ue(this.uri,this.opts);let e=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;let n=q(e,"open",function(){r.onopen(),t&&t()}),s=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),t?t(c):this.maybeReconnectOnOpen()},o=q(e,"error",s);if(this._timeout!==!1){let c=this._timeout,h=this.setTimeoutFn(()=>{n(),s(new Error("timeout")),e.close()},c);this.opts.autoUnref&&h.unref(),this.subs.push(()=>{this.clearTimeoutFn(h)})}return this.subs.push(n),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let t=this.engine;this.subs.push(q(t,"ping",this.onping.bind(this)),q(t,"data",this.ondata.bind(this)),q(t,"error",this.onerror.bind(this)),q(t,"close",this.onclose.bind(this)),q(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){K(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new ne(this,t,e),this.nsps[t]=r),r}_destroy(t){let e=Object.keys(this.nsps);for(let r of e)if(this.nsps[r].active)return;this._close()}_packet(t){let e=this.encoder.encode(t);for(let r=0;r<e.length;r++)this.engine.write(e[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let e=this.backoff.duration();this._reconnecting=!0;let r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},e);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){let t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}};var ke={};function ce(i,t){typeof i=="object"&&(t=i,i=void 0),t=t||{};let e=ii(i,t.path||"/socket.io"),r=e.source,n=e.id,s=e.path,o=ke[n]&&s in ke[n].nsps,c=t.forceNew||t["force new connection"]||t.multiplex===!1||o,h;return c?h=new oe(r,t):(ke[n]||(ke[n]=new oe(r,t)),h=ke[n]),e.query&&!t.query&&(t.query=e.queryKey),h.socket(e.path,t)}Object.assign(ce,{Manager:oe,Socket:ne,io:ce,connect:ce});var Q=class{config;subscribersCounter={};eventObservables$={};ioSocket;emptyConfig={url:"",options:{}};constructor(t){this.config=t,t===void 0&&(t=this.emptyConfig);let e=t.url,r=t.options,n=ce?ce:mt;this.ioSocket=n(e,r)}of(t){this.ioSocket.of(t)}on(t,e){this.ioSocket.on(t,e)}once(t,e){this.ioSocket.once(t,e)}connect(t){return this.ioSocket.connect(t)}disconnect(t){return this.ioSocket.disconnect.apply(this.ioSocket,arguments)}emit(t,...e){return this.ioSocket.emit.apply(this.ioSocket,arguments)}removeListener(t,e){return this.ioSocket.removeListener.apply(this.ioSocket,arguments)}removeAllListeners(t){return this.ioSocket.removeAllListeners.apply(this.ioSocket,arguments)}fromEvent(t){return this.subscribersCounter[t]||(this.subscribersCounter[t]=0),this.subscribersCounter[t]++,this.eventObservables$[t]||(this.eventObservables$[t]=new Et(e=>{let r=n=>{e.next(n)};return this.ioSocket.on(t,r),()=>{this.subscribersCounter[t]--,this.subscribersCounter[t]===0&&(this.ioSocket.removeListener(t,r),delete this.eventObservables$[t])}}).pipe(Nt())),this.eventObservables$[t]}fromOneTimeEvent(t){return new Promise(e=>this.once(t,e))}listeners(t){return this.ioSocket.listeners(t)}listenersAny(){return this.ioSocket.listenersAny()}listenersAnyOutgoing(){return this.ioSocket.listenersAnyOutgoing()}off(t,e){return t?t&&!e?this.ioSocket.off(t):this.ioSocket.off(t,e):this.ioSocket.offAny()}onAny(t){return this.ioSocket.onAny(t)}onAnyOutgoing(t){return this.ioSocket.onAnyOutgoing(t)}prependAny(t){return this.ioSocket.prependAny(t)}prependAnyOutgoing(t){return this.ioSocket.prependAnyOutgoing(t)}timeout(t){return this.ioSocket.timeout(t)}volatile(){return this.ioSocket.volatile}};function Vi(i){return new Q(i)}var ci=new Tt("__SOCKET_IO_CONFIG__"),Rs=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[{provide:ci,useValue:e},{provide:Q,useFactory:Vi,deps:[ci]}]}}static \u0275fac=function(r){return new(r||i)};static \u0275mod=At({type:i});static \u0275inj=Ct({})}return i})();var $e=(()=>{class i{constructor(){this.api=O(Oe),this.notification=O(xe),this.socket=O(Q),this.userService=O(Pe),this.socketId=this.userService.socketId,this.exchangeRate=k({rate_value:0}),this.recentRates=k([]),this.rateDialogVisible=k(!1),this.getExchangeRate()}getExchangeRate(){this.api.get("rate").subscribe({next:e=>{this.exchangeRate.set(e)}})}updateExchangeRate(e){this.api.post("rate",e).subscribe({next:r=>{this.notification.showSuccess(),this.exchangeRate.set(r),this.rateDialogVisible.set(!1)}})}initializeSocket(){this.socket.on("exchangeRateUpdated",e=>{let r=e[0];e[1].user_id!=this.socketId()&&(this.notification.showSocketMessage("Exchange rate has been updated"),this.exchangeRate.set(r))})}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Hs=(()=>{class i{constructor(){this.rateService=O($e),this.exchangeRate=this.rateService.exchangeRate}transform(e){return new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(Number(Math.round(e*this.exchangeRate().rate_value/1e3)*1e3)||0)+" L.L"}calculate(e){return Math.round(e*this.exchangeRate().rate_value/1e3)*1e3||0}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275pipe=Rt({name:"dollar",type:i,pure:!1,standalone:!0})}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var io=(()=>{class i{constructor(){this.http=O(xt),this.notificationService=O(xe),this.api=O(Oe),this.localStorageService=O(Pt),this.socket=O(Q),this.userService=O(Pe),this.router=O(Ot),this.rateService=O($e),this.exchangeRate=this.rateService.exchangeRate,this.socketId=this.userService.socketId,this.rowsPerPage=k(this.localStorageService.getStockRowsPerPage()),this.categories=k([]),this.categoriesLoading=k(!1),this.selectedProduct=k(null),this.selectedCategoryProduct=k(null),this.selectedCategory=k(null),this.selectedCategorySell=k(null),this.itemSidebarVisible=k(!1),this.products=k([]),this.tableLoading=k(!1),this.sellProductsLoading=k(!1),this.stockHistory=k([]),this.historyLoading=k(!1),this.historyDialogVisible=k(!1),this.generatedBarcode=new St(null),this.brands=k([]),this.brandsLoading=k(!1),this.selectedBrand=k(null),this.glowingRowIndex=k(null),this.inventories=k([]),this.loadingInventories=k(!1),this.selectedInventoryId=k(null),this.defaultInventory=k(null),this.getCategories(),this.getBrands(),this.getInventories(),this.initializeSockets()}updateRowsPerPage(e){this.localStorageService.setStockRowsPerPage(e),this.rowsPerPage.set(this.localStorageService.getStockRowsPerPage())}getCategories(){this.categoriesLoading.set(!0),this.http.get(`${this.api.host()}/stock/categories`).pipe(Re(()=>{this.categoriesLoading.set(!1)})).subscribe({next:e=>{this.categories.set(e)},error:e=>{this.notificationService.handleError(e.error,"home")}})}sortCategories(){this.http.patch(`${this.api.host()}/stock/categories/sort`,this.categories()).subscribe({next:e=>{this.categories.set(e),this.notificationService.showSuccess("Rows reordered successfully!","home")},error:e=>{this.notificationService.handleError(e.error,"home")}})}deleteCategory(e){this.http.delete(`${this.api.host()}/stock/categories/${e}`).subscribe({next:r=>{this.notificationService.showSuccess(r.message,"home"),this.getCategories(),this.selectedCategory.set(null)},error:r=>{this.notificationService.handleError(r.error,"home")}})}getProducts(e=this.defaultInventory()){this.tableLoading.set(!0),this.http.get(`${this.api.host()}/stock/products/${e}`).subscribe({next:r=>{this.products.set(r),this.tableLoading.set(!1)},error:r=>{this.notificationService.handleError(r.error,"home"),this.tableLoading.set(!1)}})}onCreateProduct(e){this.products.set([...this.products(),e])}onUpdateProduct(e){this.products.update(r=>{let n=this.products().findIndex(s=>s.product_id===e.product_id);return[...r.slice(0,n),e,...r.slice(n+1)]}),this.selectedProduct.set(e)}deleteItem(e){this.tableLoading.set(!0),this.http.delete(`${this.api.host()}/stock/items/${e.product_id}`).subscribe({next:r=>{this.products.update(n=>{let s=this.products().findIndex(o=>o.product_id===e.product_id);return n.splice(s,1),[...n]}),this.notificationService.showSuccess(r.message,"home"),this.tableLoading.set(!1),this.selectedProduct.set(null),this.selectedCategoryProduct.set(null)},error:r=>{this.notificationService.handleError(r.error,"home"),this.tableLoading.set(!1)}})}fetchStockHistory(e){this.historyLoading.set(!0),this.http.get(`${this.api.host()}/stock/history/${e}/${this.defaultInventory()}`).subscribe({next:r=>{this.historyLoading.set(!1),this.stockHistory.set(r),this.historyDialogVisible.set(!0)},error:r=>{this.historyLoading.set(!1),this.notificationService.handleError(r.error,"home")}})}generateBarcode(){this.http.get(`${this.api.host()}/stock/generate-barcode`).subscribe({next:e=>{this.generatedBarcode.next(e)},error:e=>{this.notificationService.showError(e.error,"home")}})}resetSellPage(){this.selectedCategorySell.set(null)}getBrands(){this.brandsLoading.set(!0),this.api.get("stock/brands").pipe(Re(()=>{this.brandsLoading.set(!1)})).subscribe({next:e=>{this.brands.set(e)}})}deleteBrand(e){this.api.delete(`stock/brands/${e}`).subscribe({next:r=>{this.brands.update(n=>{let s=this.brands().findIndex(o=>o.brand_id===e);return n.splice(s,1),[...n]}),this.notificationService.showSuccess(r.message,"home"),this.selectedBrand.set(null),this.getProducts()}})}highlightRow(e){this.glowingRowIndex.set(e),setTimeout(()=>{this.glowingRowIndex.set(null)},2e3)}initializeSockets(){this.socket.on("productCreated",e=>{let r=e[0];e[1].user_id!=this.socketId()&&(this.products.set([...this.products(),r]),this.notificationService.showSocketMessage("New product created!","home"),this.highlightRow(this.products().length-1))}),this.socket.on("productUpdated",e=>{let r=e[0];if(e[1].user_id!=this.socketId()){let s=this.products().findIndex(o=>o.product_id===r.product_id);this.products.update(o=>[...o.slice(0,s),r,...o.slice(s+1)]),this.notificationService.showSocketMessage("A product has been updated!","home"),r.product_id==this.selectedProduct()?.product_id&&this.selectedProduct.set(r),this.highlightRow(s)}}),this.socket.on("productDeleted",e=>{let r=e[0];e[1].user_id!=this.socketId()&&(this.products.update(s=>{let o=this.products().findIndex(c=>c.product_id===r.product_id);return s.splice(o,1),[...s]}),this.notificationService.showSocketMessage("A product has been deleted!","home"),r.product_id==this.selectedProduct()?.product_id&&this.selectedProduct.set(null))}),this.socket.on("categoryCreated",e=>{let r=e[0];e[1].user_id!=this.socketId()&&(this.categories.set([...this.categories(),r]),this.notificationService.showSocketMessage("New category created!","home"))}),this.socket.on("categoryUpdated",e=>{let r=e[0];if(e[1].user_id!=this.socketId()){let s=this.categories().findIndex(o=>o.category_id===r.category_id);this.categories.update(o=>[...o.slice(0,s),r,...o.slice(s+1)]),this.selectedCategory()&&this.selectedCategory.set(r),this.selectedCategorySell()?.category_id==r.category_id&&this.selectedCategorySell.set(r),this.notificationService.showSocketMessage("A category has been updated!","home")}}),this.socket.on("categoryDeleted",e=>{let r=e[0];e[1].user_id!=this.socketId()&&(this.categories.update(s=>{let o=this.categories().findIndex(c=>c.category_id===r.category_id);return s.splice(o,1),[...s]}),this.notificationService.showSocketMessage("A category has been deleted!","home"),r.category_id==this.selectedCategory()?.category_id&&(this.selectedCategory.set(null),this.selectedCategorySell.set(null)))})}getInventories(){this.loadingInventories.set(!0),this.api.get("inventory").pipe(Re(()=>{this.loadingInventories.set(!1)})).subscribe({next:e=>{this.inventories.set(e),this.selectedInventoryId.set(this.getDefaultInventory()),this.getProducts()}})}getDefaultInventory(){let e=this.localStorageService.getFromStorage("default-inventory",this.inventories()[0].inventory_id);return this.defaultInventory.set(e),e}setDefaultInventory(e){try{this.localStorageService.setToStorage("default-inventory",e),this.defaultInventory.set(this.getDefaultInventory())}catch(r){this.notificationService.showError(r,"home")}}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var fe=9e15,ie=1e9,wt="0123456789abcdef",Ze="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Ye="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",yt={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-fe,maxE:fe,crypto:!1},fi,z,w=!0,Je="[DecimalError] ",te=Je+"Invalid argument: ",li=Je+"Precision limit exceeded",di=Je+"crypto unavailable",pi="[object Decimal]",P=Math.floor,T=Math.pow,Hi=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,$i=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Wi=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,gi=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,U=1e7,m=7,Ki=9007199254740991,Zi=Ze.length-1,vt=Ye.length-1,d={toStringTag:pi};d.absoluteValue=d.abs=function(){var i=new this.constructor(this);return i.s<0&&(i.s=1),p(i)};d.ceil=function(){return p(new this.constructor(this),this.e+1,2)};d.clampedTo=d.clamp=function(i,t){var e,r=this,n=r.constructor;if(i=new n(i),t=new n(t),!i.s||!t.s)return new n(NaN);if(i.gt(t))throw Error(te+t);return e=r.cmp(i),e<0?i:r.cmp(t)>0?t:new n(r)};d.comparedTo=d.cmp=function(i){var t,e,r,n,s=this,o=s.d,c=(i=new s.constructor(i)).d,h=s.s,a=i.s;if(!o||!c)return!h||!a?NaN:h!==a?h:o===c?0:!o^h<0?1:-1;if(!o[0]||!c[0])return o[0]?h:c[0]?-a:0;if(h!==a)return h;if(s.e!==i.e)return s.e>i.e^h<0?1:-1;for(r=o.length,n=c.length,t=0,e=r<n?r:n;t<e;++t)if(o[t]!==c[t])return o[t]>c[t]^h<0?1:-1;return r===n?0:r>n^h<0?1:-1};d.cosine=d.cos=function(){var i,t,e=this,r=e.constructor;return e.d?e.d[0]?(i=r.precision,t=r.rounding,r.precision=i+Math.max(e.e,e.sd())+m,r.rounding=1,e=Yi(r,_i(r,e)),r.precision=i,r.rounding=t,p(z==2||z==3?e.neg():e,i,t,!0)):new r(1):new r(NaN)};d.cubeRoot=d.cbrt=function(){var i,t,e,r,n,s,o,c,h,a,u=this,f=u.constructor;if(!u.isFinite()||u.isZero())return new f(u);for(w=!1,s=u.s*T(u.s*u,1/3),!s||Math.abs(s)==1/0?(e=A(u.d),i=u.e,(s=(i-e.length+1)%3)&&(e+=s==1||s==-2?"0":"00"),s=T(e,1/3),i=P((i+1)/3)-(i%3==(i<0?-1:2)),s==1/0?e="5e"+i:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+i),r=new f(e),r.s=u.s):r=new f(s.toString()),o=(i=f.precision)+3;;)if(c=r,h=c.times(c).times(c),a=h.plus(u),r=E(a.plus(u).times(c),a.plus(h),o+2,1),A(c.d).slice(0,o)===(e=A(r.d)).slice(0,o))if(e=e.slice(o-3,o+1),e=="9999"||!n&&e=="4999"){if(!n&&(p(c,i+1,0),c.times(c).times(c).eq(u))){r=c;break}o+=4,n=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(p(r,i+1,1),t=!r.times(r).times(r).eq(u));break}return w=!0,p(r,i,f.rounding,t)};d.decimalPlaces=d.dp=function(){var i,t=this.d,e=NaN;if(t){if(i=t.length-1,e=(i-P(this.e/m))*m,i=t[i],i)for(;i%10==0;i/=10)e--;e<0&&(e=0)}return e};d.dividedBy=d.div=function(i){return E(this,new this.constructor(i))};d.dividedToIntegerBy=d.divToInt=function(i){var t=this,e=t.constructor;return p(E(t,new e(i),0,1,1),e.precision,e.rounding)};d.equals=d.eq=function(i){return this.cmp(i)===0};d.floor=function(){return p(new this.constructor(this),this.e+1,3)};d.greaterThan=d.gt=function(i){return this.cmp(i)>0};d.greaterThanOrEqualTo=d.gte=function(i){var t=this.cmp(i);return t==1||t===0};d.hyperbolicCosine=d.cosh=function(){var i,t,e,r,n,s=this,o=s.constructor,c=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return c;e=o.precision,r=o.rounding,o.precision=e+Math.max(s.e,s.sd())+4,o.rounding=1,n=s.d.length,n<32?(i=Math.ceil(n/3),t=(1/je(4,i)).toString()):(i=16,t="2.3283064365386962890625e-10"),s=le(o,1,s.times(t),new o(1),!0);for(var h,a=i,u=new o(8);a--;)h=s.times(s),s=c.minus(h.times(u.minus(h.times(u))));return p(s,o.precision=e,o.rounding=r,!0)};d.hyperbolicSine=d.sinh=function(){var i,t,e,r,n=this,s=n.constructor;if(!n.isFinite()||n.isZero())return new s(n);if(t=s.precision,e=s.rounding,s.precision=t+Math.max(n.e,n.sd())+4,s.rounding=1,r=n.d.length,r<3)n=le(s,2,n,n,!0);else{i=1.4*Math.sqrt(r),i=i>16?16:i|0,n=n.times(1/je(5,i)),n=le(s,2,n,n,!0);for(var o,c=new s(5),h=new s(16),a=new s(20);i--;)o=n.times(n),n=n.times(c.plus(o.times(h.times(o).plus(a))))}return s.precision=t,s.rounding=e,p(n,t,e,!0)};d.hyperbolicTangent=d.tanh=function(){var i,t,e=this,r=e.constructor;return e.isFinite()?e.isZero()?new r(e):(i=r.precision,t=r.rounding,r.precision=i+7,r.rounding=1,E(e.sinh(),e.cosh(),r.precision=i,r.rounding=t)):new r(e.s)};d.inverseCosine=d.acos=function(){var i=this,t=i.constructor,e=i.abs().cmp(1),r=t.precision,n=t.rounding;return e!==-1?e===0?i.isNeg()?V(t,r,n):new t(0):new t(NaN):i.isZero()?V(t,r+4,n).times(.5):(t.precision=r+6,t.rounding=1,i=new t(1).minus(i).div(i.plus(1)).sqrt().atan(),t.precision=r,t.rounding=n,i.times(2))};d.inverseHyperbolicCosine=d.acosh=function(){var i,t,e=this,r=e.constructor;return e.lte(1)?new r(e.eq(1)?0:NaN):e.isFinite()?(i=r.precision,t=r.rounding,r.precision=i+Math.max(Math.abs(e.e),e.sd())+4,r.rounding=1,w=!1,e=e.times(e).minus(1).sqrt().plus(e),w=!0,r.precision=i,r.rounding=t,e.ln()):new r(e)};d.inverseHyperbolicSine=d.asinh=function(){var i,t,e=this,r=e.constructor;return!e.isFinite()||e.isZero()?new r(e):(i=r.precision,t=r.rounding,r.precision=i+2*Math.max(Math.abs(e.e),e.sd())+6,r.rounding=1,w=!1,e=e.times(e).plus(1).sqrt().plus(e),w=!0,r.precision=i,r.rounding=t,e.ln())};d.inverseHyperbolicTangent=d.atanh=function(){var i,t,e,r,n=this,s=n.constructor;return n.isFinite()?n.e>=0?new s(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(i=s.precision,t=s.rounding,r=n.sd(),Math.max(r,i)<2*-n.e-1?p(new s(n),i,t,!0):(s.precision=e=r-n.e,n=E(n.plus(1),new s(1).minus(n),e+i,1),s.precision=i+4,s.rounding=1,n=n.ln(),s.precision=i,s.rounding=t,n.times(.5))):new s(NaN)};d.inverseSine=d.asin=function(){var i,t,e,r,n=this,s=n.constructor;return n.isZero()?new s(n):(t=n.abs().cmp(1),e=s.precision,r=s.rounding,t!==-1?t===0?(i=V(s,e+4,r).times(.5),i.s=n.s,i):new s(NaN):(s.precision=e+6,s.rounding=1,n=n.div(new s(1).minus(n.times(n)).sqrt().plus(1)).atan(),s.precision=e,s.rounding=r,n.times(2)))};d.inverseTangent=d.atan=function(){var i,t,e,r,n,s,o,c,h,a=this,u=a.constructor,f=u.precision,l=u.rounding;if(a.isFinite()){if(a.isZero())return new u(a);if(a.abs().eq(1)&&f+4<=vt)return o=V(u,f+4,l).times(.25),o.s=a.s,o}else{if(!a.s)return new u(NaN);if(f+4<=vt)return o=V(u,f+4,l).times(.5),o.s=a.s,o}for(u.precision=c=f+10,u.rounding=1,e=Math.min(28,c/m+2|0),i=e;i;--i)a=a.div(a.times(a).plus(1).sqrt().plus(1));for(w=!1,t=Math.ceil(c/m),r=1,h=a.times(a),o=new u(a),n=a;i!==-1;)if(n=n.times(h),s=o.minus(n.div(r+=2)),n=n.times(h),o=s.plus(n.div(r+=2)),o.d[t]!==void 0)for(i=t;o.d[i]===s.d[i]&&i--;);return e&&(o=o.times(2<<e-1)),w=!0,p(o,u.precision=f,u.rounding=l,!0)};d.isFinite=function(){return!!this.d};d.isInteger=d.isInt=function(){return!!this.d&&P(this.e/m)>this.d.length-2};d.isNaN=function(){return!this.s};d.isNegative=d.isNeg=function(){return this.s<0};d.isPositive=d.isPos=function(){return this.s>0};d.isZero=function(){return!!this.d&&this.d[0]===0};d.lessThan=d.lt=function(i){return this.cmp(i)<0};d.lessThanOrEqualTo=d.lte=function(i){return this.cmp(i)<1};d.logarithm=d.log=function(i){var t,e,r,n,s,o,c,h,a=this,u=a.constructor,f=u.precision,l=u.rounding,g=5;if(i==null)i=new u(10),t=!0;else{if(i=new u(i),e=i.d,i.s<0||!e||!e[0]||i.eq(1))return new u(NaN);t=i.eq(10)}if(e=a.d,a.s<0||!e||!e[0]||a.eq(1))return new u(e&&!e[0]?-1/0:a.s!=1?NaN:e?0:1/0);if(t)if(e.length>1)s=!0;else{for(n=e[0];n%10===0;)n/=10;s=n!==1}if(w=!1,c=f+g,o=ee(a,c),r=t?Xe(u,c+10):ee(i,c),h=E(o,r,c,1),Ee(h.d,n=f,l))do if(c+=10,o=ee(a,c),r=t?Xe(u,c+10):ee(i,c),h=E(o,r,c,1),!s){+A(h.d).slice(n+1,n+15)+1==1e14&&(h=p(h,f+1,0));break}while(Ee(h.d,n+=10,l));return w=!0,p(h,f,l)};d.minus=d.sub=function(i){var t,e,r,n,s,o,c,h,a,u,f,l,g=this,_=g.constructor;if(i=new _(i),!g.d||!i.d)return!g.s||!i.s?i=new _(NaN):g.d?i.s=-i.s:i=new _(i.d||g.s!==i.s?g:NaN),i;if(g.s!=i.s)return i.s=-i.s,g.plus(i);if(a=g.d,l=i.d,c=_.precision,h=_.rounding,!a[0]||!l[0]){if(l[0])i.s=-i.s;else if(a[0])i=new _(g);else return new _(h===3?-0:0);return w?p(i,c,h):i}if(e=P(i.e/m),u=P(g.e/m),a=a.slice(),s=u-e,s){for(f=s<0,f?(t=a,s=-s,o=l.length):(t=l,e=u,o=a.length),r=Math.max(Math.ceil(c/m),o)+2,s>r&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for(r=a.length,o=l.length,f=r<o,f&&(o=r),r=0;r<o;r++)if(a[r]!=l[r]){f=a[r]<l[r];break}s=0}for(f&&(t=a,a=l,l=t,i.s=-i.s),o=a.length,r=l.length-o;r>0;--r)a[o++]=0;for(r=l.length;r>s;){if(a[--r]<l[r]){for(n=r;n&&a[--n]===0;)a[n]=U-1;--a[n],a[r]+=U}a[r]-=l[r]}for(;a[--o]===0;)a.pop();for(;a[0]===0;a.shift())--e;return a[0]?(i.d=a,i.e=ze(a,e),w?p(i,c,h):i):new _(h===3?-0:0)};d.modulo=d.mod=function(i){var t,e=this,r=e.constructor;return i=new r(i),!e.d||!i.s||i.d&&!i.d[0]?new r(NaN):!i.d||e.d&&!e.d[0]?p(new r(e),r.precision,r.rounding):(w=!1,r.modulo==9?(t=E(e,i.abs(),0,3,1),t.s*=i.s):t=E(e,i,0,r.modulo,1),t=t.times(i),w=!0,e.minus(t))};d.naturalExponential=d.exp=function(){return _t(this)};d.naturalLogarithm=d.ln=function(){return ee(this)};d.negated=d.neg=function(){var i=new this.constructor(this);return i.s=-i.s,p(i)};d.plus=d.add=function(i){var t,e,r,n,s,o,c,h,a,u,f=this,l=f.constructor;if(i=new l(i),!f.d||!i.d)return!f.s||!i.s?i=new l(NaN):f.d||(i=new l(i.d||f.s===i.s?f:NaN)),i;if(f.s!=i.s)return i.s=-i.s,f.minus(i);if(a=f.d,u=i.d,c=l.precision,h=l.rounding,!a[0]||!u[0])return u[0]||(i=new l(f)),w?p(i,c,h):i;if(s=P(f.e/m),r=P(i.e/m),a=a.slice(),n=s-r,n){for(n<0?(e=a,n=-n,o=u.length):(e=u,r=s,o=a.length),s=Math.ceil(c/m),o=s>o?s+1:o+1,n>o&&(n=o,e.length=1),e.reverse();n--;)e.push(0);e.reverse()}for(o=a.length,n=u.length,o-n<0&&(n=o,e=u,u=a,a=e),t=0;n;)t=(a[--n]=a[n]+u[n]+t)/U|0,a[n]%=U;for(t&&(a.unshift(t),++r),o=a.length;a[--o]==0;)a.pop();return i.d=a,i.e=ze(a,r),w?p(i,c,h):i};d.precision=d.sd=function(i){var t,e=this;if(i!==void 0&&i!==!!i&&i!==1&&i!==0)throw Error(te+i);return e.d?(t=mi(e.d),i&&e.e+1>t&&(t=e.e+1)):t=NaN,t};d.round=function(){var i=this,t=i.constructor;return p(new t(i),i.e+1,t.rounding)};d.sine=d.sin=function(){var i,t,e=this,r=e.constructor;return e.isFinite()?e.isZero()?new r(e):(i=r.precision,t=r.rounding,r.precision=i+Math.max(e.e,e.sd())+m,r.rounding=1,e=Ji(r,_i(r,e)),r.precision=i,r.rounding=t,p(z>2?e.neg():e,i,t,!0)):new r(NaN)};d.squareRoot=d.sqrt=function(){var i,t,e,r,n,s,o=this,c=o.d,h=o.e,a=o.s,u=o.constructor;if(a!==1||!c||!c[0])return new u(!a||a<0&&(!c||c[0])?NaN:c?o:1/0);for(w=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=A(c),(t.length+h)%2==0&&(t+="0"),a=Math.sqrt(t),h=P((h+1)/2)-(h<0||h%2),a==1/0?t="5e"+h:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+h),r=new u(t)):r=new u(a.toString()),e=(h=u.precision)+3;;)if(s=r,r=s.plus(E(o,s,e+2,1)).times(.5),A(s.d).slice(0,e)===(t=A(r.d)).slice(0,e))if(t=t.slice(e-3,e+1),t=="9999"||!n&&t=="4999"){if(!n&&(p(s,h+1,0),s.times(s).eq(o))){r=s;break}e+=4,n=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(p(r,h+1,1),i=!r.times(r).eq(o));break}return w=!0,p(r,h,u.rounding,i)};d.tangent=d.tan=function(){var i,t,e=this,r=e.constructor;return e.isFinite()?e.isZero()?new r(e):(i=r.precision,t=r.rounding,r.precision=i+10,r.rounding=1,e=e.sin(),e.s=1,e=E(e,new r(1).minus(e.times(e)).sqrt(),i+10,0),r.precision=i,r.rounding=t,p(z==2||z==4?e.neg():e,i,t,!0)):new r(NaN)};d.times=d.mul=function(i){var t,e,r,n,s,o,c,h,a,u=this,f=u.constructor,l=u.d,g=(i=new f(i)).d;if(i.s*=u.s,!l||!l[0]||!g||!g[0])return new f(!i.s||l&&!l[0]&&!g||g&&!g[0]&&!l?NaN:!l||!g?i.s/0:i.s*0);for(e=P(u.e/m)+P(i.e/m),h=l.length,a=g.length,h<a&&(s=l,l=g,g=s,o=h,h=a,a=o),s=[],o=h+a,r=o;r--;)s.push(0);for(r=a;--r>=0;){for(t=0,n=h+r;n>r;)c=s[n]+g[r]*l[n-r-1]+t,s[n--]=c%U|0,t=c/U|0;s[n]=(s[n]+t)%U|0}for(;!s[--o];)s.pop();return t?++e:s.shift(),i.d=s,i.e=ze(s,e),w?p(i,f.precision,f.rounding):i};d.toBinary=function(i,t){return bt(this,2,i,t)};d.toDecimalPlaces=d.toDP=function(i,t){var e=this,r=e.constructor;return e=new r(e),i===void 0?e:(I(i,0,ie),t===void 0?t=r.rounding:I(t,0,8),p(e,i+e.e+1,t))};d.toExponential=function(i,t){var e,r=this,n=r.constructor;return i===void 0?e=H(r,!0):(I(i,0,ie),t===void 0?t=n.rounding:I(t,0,8),r=p(new n(r),i+1,t),e=H(r,!0,i+1)),r.isNeg()&&!r.isZero()?"-"+e:e};d.toFixed=function(i,t){var e,r,n=this,s=n.constructor;return i===void 0?e=H(n):(I(i,0,ie),t===void 0?t=s.rounding:I(t,0,8),r=p(new s(n),i+n.e+1,t),e=H(r,!1,i+r.e+1)),n.isNeg()&&!n.isZero()?"-"+e:e};d.toFraction=function(i){var t,e,r,n,s,o,c,h,a,u,f,l,g=this,_=g.d,y=g.constructor;if(!_)return new y(g);if(a=e=new y(1),r=h=new y(0),t=new y(r),s=t.e=mi(_)-g.e-1,o=s%m,t.d[0]=T(10,o<0?m+o:o),i==null)i=s>0?t:a;else{if(c=new y(i),!c.isInt()||c.lt(a))throw Error(te+c);i=c.gt(t)?s>0?t:a:c}for(w=!1,c=new y(A(_)),u=y.precision,y.precision=s=_.length*m*2;f=E(c,t,0,1,1),n=e.plus(f.times(r)),n.cmp(i)!=1;)e=r,r=n,n=a,a=h.plus(f.times(n)),h=n,n=t,t=c.minus(f.times(n)),c=n;return n=E(i.minus(e),r,0,1,1),h=h.plus(n.times(a)),e=e.plus(n.times(r)),h.s=a.s=g.s,l=E(a,r,s,1).minus(g).abs().cmp(E(h,e,s,1).minus(g).abs())<1?[a,r]:[h,e],y.precision=u,w=!0,l};d.toHexadecimal=d.toHex=function(i,t){return bt(this,16,i,t)};d.toNearest=function(i,t){var e=this,r=e.constructor;if(e=new r(e),i==null){if(!e.d)return e;i=new r(1),t=r.rounding}else{if(i=new r(i),t===void 0?t=r.rounding:I(t,0,8),!e.d)return i.s?e:i;if(!i.d)return i.s&&(i.s=e.s),i}return i.d[0]?(w=!1,e=E(e,i,0,t,1).times(i),w=!0,p(e)):(i.s=e.s,e=i),e};d.toNumber=function(){return+this};d.toOctal=function(i,t){return bt(this,8,i,t)};d.toPower=d.pow=function(i){var t,e,r,n,s,o,c=this,h=c.constructor,a=+(i=new h(i));if(!c.d||!i.d||!c.d[0]||!i.d[0])return new h(T(+c,a));if(c=new h(c),c.eq(1))return c;if(r=h.precision,s=h.rounding,i.eq(1))return p(c,r,s);if(t=P(i.e/m),t>=i.d.length-1&&(e=a<0?-a:a)<=Ki)return n=wi(h,c,e,r),i.s<0?new h(1).div(n):p(n,r,s);if(o=c.s,o<0){if(t<i.d.length-1)return new h(NaN);if(i.d[t]&1||(o=1),c.e==0&&c.d[0]==1&&c.d.length==1)return c.s=o,c}return e=T(+c,a),t=e==0||!isFinite(e)?P(a*(Math.log("0."+A(c.d))/Math.LN10+c.e+1)):new h(e+"").e,t>h.maxE+1||t<h.minE-1?new h(t>0?o/0:0):(w=!1,h.rounding=c.s=1,e=Math.min(12,(t+"").length),n=_t(i.times(ee(c,r+e)),r),n.d&&(n=p(n,r+5,1),Ee(n.d,r,s)&&(t=r+10,n=p(_t(i.times(ee(c,t+e)),t),t+5,1),+A(n.d).slice(r+1,r+15)+1==1e14&&(n=p(n,r+1,0)))),n.s=o,w=!0,h.rounding=s,p(n,r,s))};d.toPrecision=function(i,t){var e,r=this,n=r.constructor;return i===void 0?e=H(r,r.e<=n.toExpNeg||r.e>=n.toExpPos):(I(i,1,ie),t===void 0?t=n.rounding:I(t,0,8),r=p(new n(r),i,t),e=H(r,i<=r.e||r.e<=n.toExpNeg,i)),r.isNeg()&&!r.isZero()?"-"+e:e};d.toSignificantDigits=d.toSD=function(i,t){var e=this,r=e.constructor;return i===void 0?(i=r.precision,t=r.rounding):(I(i,1,ie),t===void 0?t=r.rounding:I(t,0,8)),p(new r(e),i,t)};d.toString=function(){var i=this,t=i.constructor,e=H(i,i.e<=t.toExpNeg||i.e>=t.toExpPos);return i.isNeg()&&!i.isZero()?"-"+e:e};d.truncated=d.trunc=function(){return p(new this.constructor(this),this.e+1,1)};d.valueOf=d.toJSON=function(){var i=this,t=i.constructor,e=H(i,i.e<=t.toExpNeg||i.e>=t.toExpPos);return i.isNeg()?"-"+e:e};function A(i){var t,e,r,n=i.length-1,s="",o=i[0];if(n>0){for(s+=o,t=1;t<n;t++)r=i[t]+"",e=m-r.length,e&&(s+=G(e)),s+=r;o=i[t],r=o+"",e=m-r.length,e&&(s+=G(e))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function I(i,t,e){if(i!==~~i||i<t||i>e)throw Error(te+i)}function Ee(i,t,e,r){var n,s,o,c;for(s=i[0];s>=10;s/=10)--t;return--t<0?(t+=m,n=0):(n=Math.ceil((t+1)/m),t%=m),s=T(10,m-t),c=i[n]%s|0,r==null?t<3?(t==0?c=c/100|0:t==1&&(c=c/10|0),o=e<4&&c==99999||e>3&&c==49999||c==5e4||c==0):o=(e<4&&c+1==s||e>3&&c+1==s/2)&&(i[n+1]/s/100|0)==T(10,t-2)-1||(c==s/2||c==0)&&(i[n+1]/s/100|0)==0:t<4?(t==0?c=c/1e3|0:t==1?c=c/100|0:t==2&&(c=c/10|0),o=(r||e<4)&&c==9999||!r&&e>3&&c==4999):o=((r||e<4)&&c+1==s||!r&&e>3&&c+1==s/2)&&(i[n+1]/s/1e3|0)==T(10,t-3)-1,o}function We(i,t,e){for(var r,n=[0],s,o=0,c=i.length;o<c;){for(s=n.length;s--;)n[s]*=t;for(n[0]+=wt.indexOf(i.charAt(o++)),r=0;r<n.length;r++)n[r]>e-1&&(n[r+1]===void 0&&(n[r+1]=0),n[r+1]+=n[r]/e|0,n[r]%=e)}return n.reverse()}function Yi(i,t){var e,r,n;if(t.isZero())return t;r=t.d.length,r<32?(e=Math.ceil(r/3),n=(1/je(4,e)).toString()):(e=16,n="2.3283064365386962890625e-10"),i.precision+=e,t=le(i,1,t.times(n),new i(1));for(var s=e;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return i.precision-=e,t}var E=function(){function i(r,n,s){var o,c=0,h=r.length;for(r=r.slice();h--;)o=r[h]*n+c,r[h]=o%s|0,c=o/s|0;return c&&r.unshift(c),r}function t(r,n,s,o){var c,h;if(s!=o)h=s>o?1:-1;else for(c=h=0;c<s;c++)if(r[c]!=n[c]){h=r[c]>n[c]?1:-1;break}return h}function e(r,n,s,o){for(var c=0;s--;)r[s]-=c,c=r[s]<n[s]?1:0,r[s]=c*o+r[s]-n[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,n,s,o,c,h){var a,u,f,l,g,_,y,L,C,D,b,R,Ne,W,Qe,Ce,de,Ge,F,Te,Ae=r.constructor,et=r.s==n.s?1:-1,x=r.d,S=n.d;if(!x||!x[0]||!S||!S[0])return new Ae(!r.s||!n.s||(x?S&&x[0]==S[0]:!S)?NaN:x&&x[0]==0||!S?et*0:et/0);for(h?(g=1,u=r.e-n.e):(h=U,g=m,u=P(r.e/g)-P(n.e/g)),F=S.length,de=x.length,C=new Ae(et),D=C.d=[],f=0;S[f]==(x[f]||0);f++);if(S[f]>(x[f]||0)&&u--,s==null?(W=s=Ae.precision,o=Ae.rounding):c?W=s+(r.e-n.e)+1:W=s,W<0)D.push(1),_=!0;else{if(W=W/g+2|0,f=0,F==1){for(l=0,S=S[0],W++;(f<de||l)&&W--;f++)Qe=l*h+(x[f]||0),D[f]=Qe/S|0,l=Qe%S|0;_=l||f<de}else{for(l=h/(S[0]+1)|0,l>1&&(S=i(S,l,h),x=i(x,l,h),F=S.length,de=x.length),Ce=F,b=x.slice(0,F),R=b.length;R<F;)b[R++]=0;Te=S.slice(),Te.unshift(0),Ge=S[0],S[1]>=h/2&&++Ge;do l=0,a=t(S,b,F,R),a<0?(Ne=b[0],F!=R&&(Ne=Ne*h+(b[1]||0)),l=Ne/Ge|0,l>1?(l>=h&&(l=h-1),y=i(S,l,h),L=y.length,R=b.length,a=t(y,b,L,R),a==1&&(l--,e(y,F<L?Te:S,L,h))):(l==0&&(a=l=1),y=S.slice()),L=y.length,L<R&&y.unshift(0),e(b,y,R,h),a==-1&&(R=b.length,a=t(S,b,F,R),a<1&&(l++,e(b,F<R?Te:S,R,h))),R=b.length):a===0&&(l++,b=[0]),D[f++]=l,a&&b[0]?b[R++]=x[Ce]||0:(b=[x[Ce]],R=1);while((Ce++<de||b[0]!==void 0)&&W--);_=b[0]!==void 0}D[0]||D.shift()}if(g==1)C.e=u,fi=_;else{for(f=1,l=D[0];l>=10;l/=10)f++;C.e=f+u*g-1,p(C,c?s+C.e+1:s,o,_)}return C}}();function p(i,t,e,r){var n,s,o,c,h,a,u,f,l,g=i.constructor;e:if(t!=null){if(f=i.d,!f)return i;for(n=1,c=f[0];c>=10;c/=10)n++;if(s=t-n,s<0)s+=m,o=t,u=f[l=0],h=u/T(10,n-o-1)%10|0;else if(l=Math.ceil((s+1)/m),c=f.length,l>=c)if(r){for(;c++<=l;)f.push(0);u=h=0,n=1,s%=m,o=s-m+1}else break e;else{for(u=c=f[l],n=1;c>=10;c/=10)n++;s%=m,o=s-m+n,h=o<0?0:u/T(10,n-o-1)%10|0}if(r=r||t<0||f[l+1]!==void 0||(o<0?u:u%T(10,n-o-1)),a=e<4?(h||r)&&(e==0||e==(i.s<0?3:2)):h>5||h==5&&(e==4||r||e==6&&(s>0?o>0?u/T(10,n-o):0:f[l-1])%10&1||e==(i.s<0?8:7)),t<1||!f[0])return f.length=0,a?(t-=i.e+1,f[0]=T(10,(m-t%m)%m),i.e=-t||0):f[0]=i.e=0,i;if(s==0?(f.length=l,c=1,l--):(f.length=l+1,c=T(10,m-s),f[l]=o>0?(u/T(10,n-o)%T(10,o)|0)*c:0),a)for(;;)if(l==0){for(s=1,o=f[0];o>=10;o/=10)s++;for(o=f[0]+=c,c=1;o>=10;o/=10)c++;s!=c&&(i.e++,f[0]==U&&(f[0]=1));break}else{if(f[l]+=c,f[l]!=U)break;f[l--]=0,c=1}for(s=f.length;f[--s]===0;)f.pop()}return w&&(i.e>g.maxE?(i.d=null,i.e=NaN):i.e<g.minE&&(i.e=0,i.d=[0])),i}function H(i,t,e){if(!i.isFinite())return vi(i);var r,n=i.e,s=A(i.d),o=s.length;return t?(e&&(r=e-o)>0?s=s.charAt(0)+"."+s.slice(1)+G(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i.e<0?"e":"e+")+i.e):n<0?(s="0."+G(-n-1)+s,e&&(r=e-o)>0&&(s+=G(r))):n>=o?(s+=G(n+1-o),e&&(r=e-n-1)>0&&(s=s+"."+G(r))):((r=n+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),e&&(r=e-o)>0&&(n+1===o&&(s+="."),s+=G(r))),s}function ze(i,t){var e=i[0];for(t*=m;e>=10;e/=10)t++;return t}function Xe(i,t,e){if(t>Zi)throw w=!0,e&&(i.precision=e),Error(li);return p(new i(Ze),t,1,!0)}function V(i,t,e){if(t>vt)throw Error(li);return p(new i(Ye),t,e,!0)}function mi(i){var t=i.length-1,e=t*m+1;if(t=i[t],t){for(;t%10==0;t/=10)e--;for(t=i[0];t>=10;t/=10)e++}return e}function G(i){for(var t="";i--;)t+="0";return t}function wi(i,t,e,r){var n,s=new i(1),o=Math.ceil(r/m+4);for(w=!1;;){if(e%2&&(s=s.times(t),hi(s.d,o)&&(n=!0)),e=P(e/2),e===0){e=s.d.length-1,n&&s.d[e]===0&&++s.d[e];break}t=t.times(t),hi(t.d,o)}return w=!0,s}function ai(i){return i.d[i.d.length-1]&1}function yi(i,t,e){for(var r,n,s=new i(t[0]),o=0;++o<t.length;){if(n=new i(t[o]),!n.s){s=n;break}r=s.cmp(n),(r===e||r===0&&s.s===e)&&(s=n)}return s}function _t(i,t){var e,r,n,s,o,c,h,a=0,u=0,f=0,l=i.constructor,g=l.rounding,_=l.precision;if(!i.d||!i.d[0]||i.e>17)return new l(i.d?i.d[0]?i.s<0?0:1/0:1:i.s?i.s<0?0:i:NaN);for(t==null?(w=!1,h=_):h=t,c=new l(.03125);i.e>-2;)i=i.times(c),f+=5;for(r=Math.log(T(2,f))/Math.LN10*2+5|0,h+=r,e=s=o=new l(1),l.precision=h;;){if(s=p(s.times(i),h,1),e=e.times(++u),c=o.plus(E(s,e,h,1)),A(c.d).slice(0,h)===A(o.d).slice(0,h)){for(n=f;n--;)o=p(o.times(o),h,1);if(t==null)if(a<3&&Ee(o.d,h-r,g,a))l.precision=h+=10,e=s=c=new l(1),u=0,a++;else return p(o,l.precision=_,g,w=!0);else return l.precision=_,o}o=c}}function ee(i,t){var e,r,n,s,o,c,h,a,u,f,l,g=1,_=10,y=i,L=y.d,C=y.constructor,D=C.rounding,b=C.precision;if(y.s<0||!L||!L[0]||!y.e&&L[0]==1&&L.length==1)return new C(L&&!L[0]?-1/0:y.s!=1?NaN:L?0:y);if(t==null?(w=!1,u=b):u=t,C.precision=u+=_,e=A(L),r=e.charAt(0),Math.abs(s=y.e)<15e14){for(;r<7&&r!=1||r==1&&e.charAt(1)>3;)y=y.times(i),e=A(y.d),r=e.charAt(0),g++;s=y.e,r>1?(y=new C("0."+e),s++):y=new C(r+"."+e.slice(1))}else return a=Xe(C,u+2,b).times(s+""),y=ee(new C(r+"."+e.slice(1)),u-_).plus(a),C.precision=b,t==null?p(y,b,D,w=!0):y;for(f=y,h=o=y=E(y.minus(1),y.plus(1),u,1),l=p(y.times(y),u,1),n=3;;){if(o=p(o.times(l),u,1),a=h.plus(E(o,new C(n),u,1)),A(a.d).slice(0,u)===A(h.d).slice(0,u))if(h=h.times(2),s!==0&&(h=h.plus(Xe(C,u+2,b).times(s+""))),h=E(h,new C(g),u,1),t==null)if(Ee(h.d,u-_,D,c))C.precision=u+=_,a=o=y=E(f.minus(1),f.plus(1),u,1),l=p(y.times(y),u,1),n=c=1;else return p(h,C.precision=b,D,w=!0);else return C.precision=b,h;h=a,n+=2}}function vi(i){return String(i.s*i.s/0)}function Ke(i,t){var e,r,n;for((e=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(e<0&&(e=r),e+=+t.slice(r+1),t=t.substring(0,r)):e<0&&(e=t.length),r=0;t.charCodeAt(r)===48;r++);for(n=t.length;t.charCodeAt(n-1)===48;--n);if(t=t.slice(r,n),t){if(n-=r,i.e=e=e-r-1,i.d=[],r=(e+1)%m,e<0&&(r+=m),r<n){for(r&&i.d.push(+t.slice(0,r)),n-=m;r<n;)i.d.push(+t.slice(r,r+=m));t=t.slice(r),r=m-t.length}else r-=n;for(;r--;)t+="0";i.d.push(+t),w&&(i.e>i.constructor.maxE?(i.d=null,i.e=NaN):i.e<i.constructor.minE&&(i.e=0,i.d=[0]))}else i.e=0,i.d=[0];return i}function Xi(i,t){var e,r,n,s,o,c,h,a,u;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),gi.test(t))return Ke(i,t)}else if(t==="Infinity"||t==="NaN")return+t||(i.s=NaN),i.e=NaN,i.d=null,i;if($i.test(t))e=16,t=t.toLowerCase();else if(Hi.test(t))e=2;else if(Wi.test(t))e=8;else throw Error(te+t);for(s=t.search(/p/i),s>0?(h=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),s=t.indexOf("."),o=s>=0,r=i.constructor,o&&(t=t.replace(".",""),c=t.length,s=c-s,n=wi(r,new r(e),s,s*2)),a=We(t,e,U),u=a.length-1,s=u;a[s]===0;--s)a.pop();return s<0?new r(i.s*0):(i.e=ze(a,u),i.d=a,w=!1,o&&(i=E(i,n,c*4)),h&&(i=i.times(Math.abs(h)<54?T(2,h):Se.pow(2,h))),w=!0,i)}function Ji(i,t){var e,r=t.d.length;if(r<3)return t.isZero()?t:le(i,2,t,t);e=1.4*Math.sqrt(r),e=e>16?16:e|0,t=t.times(1/je(5,e)),t=le(i,2,t,t);for(var n,s=new i(5),o=new i(16),c=new i(20);e--;)n=t.times(t),t=t.times(s.plus(n.times(o.times(n).minus(c))));return t}function le(i,t,e,r,n){var s,o,c,h,a=1,u=i.precision,f=Math.ceil(u/m);for(w=!1,h=e.times(e),c=new i(r);;){if(o=E(c.times(h),new i(t++*t++),u,1),c=n?r.plus(o):r.minus(o),r=E(o.times(h),new i(t++*t++),u,1),o=c.plus(r),o.d[f]!==void 0){for(s=f;o.d[s]===c.d[s]&&s--;);if(s==-1)break}s=c,c=r,r=o,o=s,a++}return w=!0,o.d.length=f+1,o}function je(i,t){for(var e=i;--t;)e*=i;return e}function _i(i,t){var e,r=t.s<0,n=V(i,i.precision,1),s=n.times(.5);if(t=t.abs(),t.lte(s))return z=r?4:1,t;if(e=t.divToInt(n),e.isZero())z=r?3:2;else{if(t=t.minus(e.times(n)),t.lte(s))return z=ai(e)?r?2:3:r?4:1,t;z=ai(e)?r?1:4:r?3:2}return t.minus(n).abs()}function bt(i,t,e,r){var n,s,o,c,h,a,u,f,l,g=i.constructor,_=e!==void 0;if(_?(I(e,1,ie),r===void 0?r=g.rounding:I(r,0,8)):(e=g.precision,r=g.rounding),!i.isFinite())u=vi(i);else{for(u=H(i),o=u.indexOf("."),_?(n=2,t==16?e=e*4-3:t==8&&(e=e*3-2)):n=t,o>=0&&(u=u.replace(".",""),l=new g(1),l.e=u.length-o,l.d=We(H(l),10,n),l.e=l.d.length),f=We(u,10,n),s=h=f.length;f[--h]==0;)f.pop();if(!f[0])u=_?"0p+0":"0";else{if(o<0?s--:(i=new g(i),i.d=f,i.e=s,i=E(i,l,e,r,0,n),f=i.d,s=i.e,a=fi),o=f[e],c=n/2,a=a||f[e+1]!==void 0,a=r<4?(o!==void 0||a)&&(r===0||r===(i.s<0?3:2)):o>c||o===c&&(r===4||a||r===6&&f[e-1]&1||r===(i.s<0?8:7)),f.length=e,a)for(;++f[--e]>n-1;)f[e]=0,e||(++s,f.unshift(1));for(h=f.length;!f[h-1];--h);for(o=0,u="";o<h;o++)u+=wt.charAt(f[o]);if(_){if(h>1)if(t==16||t==8){for(o=t==16?4:3,--h;h%o;h++)u+="0";for(f=We(u,n,t),h=f.length;!f[h-1];--h);for(o=1,u="1.";o<h;o++)u+=wt.charAt(f[o])}else u=u.charAt(0)+"."+u.slice(1);u=u+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)u="0"+u;u="0."+u}else if(++s>h)for(s-=h;s--;)u+="0";else s<h&&(u=u.slice(0,s)+"."+u.slice(s))}u=(t==16?"0x":t==2?"0b":t==8?"0o":"")+u}return i.s<0?"-"+u:u}function hi(i,t){if(i.length>t)return i.length=t,!0}function zi(i){return new this(i).abs()}function ji(i){return new this(i).acos()}function Qi(i){return new this(i).acosh()}function Gi(i,t){return new this(i).plus(t)}function er(i){return new this(i).asin()}function tr(i){return new this(i).asinh()}function ir(i){return new this(i).atan()}function rr(i){return new this(i).atanh()}function nr(i,t){i=new this(i),t=new this(t);var e,r=this.precision,n=this.rounding,s=r+4;return!i.s||!t.s?e=new this(NaN):!i.d&&!t.d?(e=V(this,s,1).times(t.s>0?.25:.75),e.s=i.s):!t.d||i.isZero()?(e=t.s<0?V(this,r,n):new this(0),e.s=i.s):!i.d||t.isZero()?(e=V(this,s,1).times(.5),e.s=i.s):t.s<0?(this.precision=s,this.rounding=1,e=this.atan(E(i,t,s,1)),t=V(this,s,1),this.precision=r,this.rounding=n,e=i.s<0?e.minus(t):e.plus(t)):e=this.atan(E(i,t,s,1)),e}function sr(i){return new this(i).cbrt()}function or(i){return p(i=new this(i),i.e+1,2)}function cr(i,t,e){return new this(i).clamp(t,e)}function ar(i){if(!i||typeof i!="object")throw Error(Je+"Object expected");var t,e,r,n=i.defaults===!0,s=["precision",1,ie,"rounding",0,8,"toExpNeg",-fe,0,"toExpPos",0,fe,"maxE",0,fe,"minE",-fe,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(e=s[t],n&&(this[e]=yt[e]),(r=i[e])!==void 0)if(P(r)===r&&r>=s[t+1]&&r<=s[t+2])this[e]=r;else throw Error(te+e+": "+r);if(e="crypto",n&&(this[e]=yt[e]),(r=i[e])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[e]=!0;else throw Error(di);else this[e]=!1;else throw Error(te+e+": "+r);return this}function hr(i){return new this(i).cos()}function ur(i){return new this(i).cosh()}function bi(i){var t,e,r;function n(s){var o,c,h,a=this;if(!(a instanceof n))return new n(s);if(a.constructor=n,ui(s)){a.s=s.s,w?!s.d||s.e>n.maxE?(a.e=NaN,a.d=null):s.e<n.minE?(a.e=0,a.d=[0]):(a.e=s.e,a.d=s.d.slice()):(a.e=s.e,a.d=s.d?s.d.slice():s.d);return}if(h=typeof s,h==="number"){if(s===0){a.s=1/s<0?-1:1,a.e=0,a.d=[0];return}if(s<0?(s=-s,a.s=-1):a.s=1,s===~~s&&s<1e7){for(o=0,c=s;c>=10;c/=10)o++;w?o>n.maxE?(a.e=NaN,a.d=null):o<n.minE?(a.e=0,a.d=[0]):(a.e=o,a.d=[s]):(a.e=o,a.d=[s]);return}if(s*0!==0){s||(a.s=NaN),a.e=NaN,a.d=null;return}return Ke(a,s.toString())}if(h==="string")return(c=s.charCodeAt(0))===45?(s=s.slice(1),a.s=-1):(c===43&&(s=s.slice(1)),a.s=1),gi.test(s)?Ke(a,s):Xi(a,s);if(h==="bigint")return s<0?(s=-s,a.s=-1):a.s=1,Ke(a,s.toString());throw Error(te+s)}if(n.prototype=d,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=ar,n.clone=bi,n.isDecimal=ui,n.abs=zi,n.acos=ji,n.acosh=Qi,n.add=Gi,n.asin=er,n.asinh=tr,n.atan=ir,n.atanh=rr,n.atan2=nr,n.cbrt=sr,n.ceil=or,n.clamp=cr,n.cos=hr,n.cosh=ur,n.div=fr,n.exp=lr,n.floor=dr,n.hypot=pr,n.ln=gr,n.log=mr,n.log10=yr,n.log2=wr,n.max=vr,n.min=_r,n.mod=br,n.mul=kr,n.pow=Er,n.random=Sr,n.round=Nr,n.sign=Cr,n.sin=Tr,n.sinh=Ar,n.sqrt=Rr,n.sub=xr,n.sum=Or,n.tan=Pr,n.tanh=Lr,n.trunc=Br,i===void 0&&(i={}),i&&i.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<r.length;)i.hasOwnProperty(e=r[t++])||(i[e]=this[e]);return n.config(i),n}function fr(i,t){return new this(i).div(t)}function lr(i){return new this(i).exp()}function dr(i){return p(i=new this(i),i.e+1,3)}function pr(){var i,t,e=new this(0);for(w=!1,i=0;i<arguments.length;)if(t=new this(arguments[i++]),t.d)e.d&&(e=e.plus(t.times(t)));else{if(t.s)return w=!0,new this(1/0);e=t}return w=!0,e.sqrt()}function ui(i){return i instanceof Se||i&&i.toStringTag===pi||!1}function gr(i){return new this(i).ln()}function mr(i,t){return new this(i).log(t)}function wr(i){return new this(i).log(2)}function yr(i){return new this(i).log(10)}function vr(){return yi(this,arguments,-1)}function _r(){return yi(this,arguments,1)}function br(i,t){return new this(i).mod(t)}function kr(i,t){return new this(i).mul(t)}function Er(i,t){return new this(i).pow(t)}function Sr(i){var t,e,r,n,s=0,o=new this(1),c=[];if(i===void 0?i=this.precision:I(i,1,ie),r=Math.ceil(i/m),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)n=t[s],n>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:c[s++]=n%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(r*=4);s<r;)n=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((t[s+3]&127)<<24),n>=214e7?crypto.randomBytes(4).copy(t,s):(c.push(n%1e7),s+=4);s=r/4}else throw Error(di);else for(;s<r;)c[s++]=Math.random()*1e7|0;for(r=c[--s],i%=m,r&&i&&(n=T(10,m-i),c[s]=(r/n|0)*n);c[s]===0;s--)c.pop();if(s<0)e=0,c=[0];else{for(e=-1;c[0]===0;e-=m)c.shift();for(r=1,n=c[0];n>=10;n/=10)r++;r<m&&(e-=m-r)}return o.e=e,o.d=c,o}function Nr(i){return p(i=new this(i),i.e+1,this.rounding)}function Cr(i){return i=new this(i),i.d?i.d[0]?i.s:0*i.s:i.s||NaN}function Tr(i){return new this(i).sin()}function Ar(i){return new this(i).sinh()}function Rr(i){return new this(i).sqrt()}function xr(i,t){return new this(i).sub(t)}function Or(){var i=0,t=arguments,e=new this(t[i]);for(w=!1;e.s&&++i<t.length;)e=e.plus(t[i]);return w=!0,p(e,this.precision,this.rounding)}function Pr(i){return new this(i).tan()}function Lr(i){return new this(i).tanh()}function Br(i){return p(i=new this(i),i.e+1,1)}d[Symbol.for("nodejs.util.inspect.custom")]=d.toString;d[Symbol.toStringTag]="Decimal";var Se=d.constructor=bi(yt);Ze=new Se(Ze);Ye=new Se(Ye);var $=Se;var oo=(()=>{class i{add(e,r){let n=new $(e),s=new $(r);return n.add(s).toNumber()}subtract(e,r){let n=new $(e),s=new $(r);return n.sub(s).toNumber()}multiply(e,r){let n=new $(e),s=new $(r);return n.mul(s).toNumber()}divide(e,r){let n=new $(e),s=new $(r);return n.div(s).toNumber()}decimal(e){return new $(e).toNumber()}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{Q as a,Rs as b,$e as c,io as d,oo as e,Hs as f};
