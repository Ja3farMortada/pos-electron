import{a as pe,b as ue}from"./chunk-4ONBVWLA.js";import{a as ae,b as le}from"./chunk-UIPYUTXU.js";import{a as se}from"./chunk-XFMQNLNY.js";import{a as me}from"./chunk-ZOJPJJYV.js";import{l as ne,m as re}from"./chunk-LBGQA5HW.js";import{c as te}from"./chunk-VVKQAEX7.js";import{C as p,D as F,Fa as d,Ga as _,J as I,Ja as N,Jb as P,K as f,Ka as V,L as g,La as E,Na as k,Oa as D,P as C,Pa as M,Qc as ie,Rc as oe,Sb as U,Vb as z,Wb as A,Xa as l,Y as s,Ya as m,Yb as H,_b as O,ac as R,bc as W,ga as x,gb as B,gc as j,hc as L,ia as a,ib as q,ic as J,jc as K,kc as Q,la as T,mc as X,nb as G,oa as n,pa as o,qa as S,r as y,ua as h,va as c,wa as u,wc as Y,xc as Z,yc as $,zc as ee}from"./chunk-DSVZHE42.js";var ce=()=>({width:"55vw"}),de=()=>({"1199px":"55vw","575px":"95vw"}),fe=t=>({"ng-invalid ng-dirty":t});function ge(t,w){if(t&1){let e=h();n(0,"div",6)(1,"label",15),d(2),l(3,"translate"),o(),n(4,"p-inputNumber",16,0),c("onFocus",function(i){f(e);let v=u(2);return g(v.select(i.target))}),o()()}t&2&&(s(2),_(m(3,4,"Default Discount %")),s(2),a("maxFractionDigits",2)("min",0)("max",100))}function _e(t,w){if(t&1){let e=h();n(0,"form",4),c("ngSubmit",function(){f(e);let i=u();return g(i.submitCustomer())}),n(1,"div",5)(2,"div",6)(3,"label",7),d(4),l(5,"translate"),o(),S(6,"input",8),o(),n(7,"div",6)(8,"label",9),d(9),l(10,"translate"),o(),S(11,"p-inputMask",10),o(),x(12,ge,6,6,"div",11),n(13,"div",12)(14,"label",13),d(15),l(16,"translate"),o(),n(17,"textarea",14),d(18,"                    "),o()()()()}if(t&2){let e=u();a("formGroup",e.customerForm),s(4),_(m(5,6,"Customer Name")),s(2),a("ngClass",M(12,fe,e.f.name.invalid&&(e.f.name.dirty||e.f.name.touched))),s(3),_(m(10,8,"Customer Phone")),s(3),a("ngIf",e.discountInputEnabled()),s(3),_(m(16,10,"Address"))}}function Ce(t,w){if(t&1){let e=h();n(0,"p-button",17),l(1,"translate"),c("onClick",function(){f(e);let i=u();return g(i.closeDialog())}),o(),n(2,"p-button",18),l(3,"translate"),c("onClick",function(){f(e);let i=u();return g(i.submitCustomer())}),o()}if(t&2){let e=u();a("label",m(1,3,"Cancel")),s(2),a("label",m(3,5,"Save"))("loading",e.loading)}}var Je=(()=>{class t{constructor(){this.customersService=p(se),this.confirmationService=p(P),this.fb=p(Q),this.discountSettingService=p(me),this.apiService=p(A),this.notification=p(z),this.visible=!1,this.mode="add",this.customer=null,this.visibleChange=new C,this.onCreate=new C,this.onUpdate=new C,this.discountInputEnabled=this.discountSettingService.discountInputEnabled,this.customerForm=this.fb.group({account_id:[null],name:[null,O.required],phone:[null],address:[null],default_discount:[0]}),this.loading=!1,this.submitted=!1}ngOnChanges(e){e.visible&&(this.mode==="edit"?this.customerForm.patchValue(this.customer):this.customerForm.reset({default_discount:0}))}get f(){return this.customerForm.controls}closeDialog(){this.submitted=!1,this.visibleChange.emit(!1)}submitCustomer(){if(this.submitted=!0,this.customerForm.valid){this.loading=!0;let e=this.customerForm.getRawValue();(this.mode=="add"?this.apiService.post("customers",e):this.apiService.put("customers",e)).pipe(y(()=>{this.loading=!1})).subscribe({next:i=>{this.mode=="add"?this.onCreate.emit(i):this.onUpdate.emit(i),this.closeDialog(),this.notification.showSuccess()}})}}select(e){e.select()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=F({type:t,selectors:[["customer-dialog"]],inputs:{visible:"visible",mode:"mode",customer:"customer"},outputs:{visibleChange:"visibleChange",onCreate:"onCreate",onUpdate:"onUpdate"},standalone:!0,features:[I,k],decls:4,vars:10,consts:[["discountInput",""],["position","top","styleClass","p-fluid",3,"visibleChange","onHide","visible","header","modal","breakpoints"],["pTemplate","content"],["pTemplate","footer"],[3,"ngSubmit","formGroup"],[1,"formgrid","grid"],[1,"field","col-12","md:col-6"],["for","name"],["id","name","type","text","pInputText","","formControlName","name","autocomplete","off","required","","autofocus","","spellcheck","false",3,"ngClass"],["for","phone"],["mask","99 999 999","formControlName","phone"],["class","field col-12 md:col-6",4,"ngIf"],[1,"field","col-12","md:col-12"],["for","address"],["id","address","name","address","rows","3","pInputTextarea","","formControlName","address","spellcheck","false"],["for","discount"],["styleClass","input-align-center","formControlName","default_discount","suffix"," %","step","0",1,"p-inputtext-sm","w-full",3,"onFocus","maxFractionDigits","min","max"],["icon","pi pi-times","severity","secondary","size","small",3,"onClick","label"],["icon","pi pi-check","severity","success","size","small",3,"onClick","label","loading"]],template:function(r,i){r&1&&(n(0,"p-dialog",1),l(1,"translate"),E("visibleChange",function(b){return V(i.visible,b)||(i.visible=b),b}),c("onHide",function(){return i.closeDialog()}),x(2,_e,19,14,"ng-template",2)(3,Ce,4,7,"ng-template",3),o()),r&2&&(T(D(8,ce)),N("visible",i.visible),a("header",m(1,6,"Customer"))("modal",!0)("breakpoints",D(9,de)))},dependencies:[oe,ie,U,Z,Y,X,j,H,R,W,K,L,J,G,B,q,ee,$,ue,pe,le,ae,re,ne,te]})}}return t})();export{Je as a};
