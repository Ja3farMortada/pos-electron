import{a as Pt}from"./chunk-G5UOHYUM.js";import{b as Oe}from"./chunk-4A2WLUYH.js";import{A as Tt,C as O,E as At,G as Rt,Vb as Re,Wb as xe,b as Et,d as St,da as C,pb as xt,r as et,s as Nt,y as j,yb as Ot,z as Ct}from"./chunk-DSVZHE42.js";import{e as kt}from"./chunk-GAL4ENT6.js";var gt={};kt(gt,{Fetch:()=>_e,Manager:()=>oe,NodeWebSocket:()=>J,NodeXHR:()=>X,Socket:()=>se,WebSocket:()=>J,WebTransport:()=>re,XHR:()=>X,connect:()=>ce,default:()=>ce,io:()=>ce,protocol:()=>pt});var M=Object.create(null);M.open="0";M.close="1";M.ping="2";M.pong="3";M.message="4";M.upgrade="5";M.noop="6";var pe=Object.create(null);Object.keys(M).forEach(i=>{pe[M[i]]=i});var me={type:"error",data:"parser error"};var It=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",qt=typeof ArrayBuffer=="function",Dt=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer,ge=({type:i,data:t},e,r)=>It&&t instanceof Blob?e?r(t):Lt(t,r):qt&&(t instanceof ArrayBuffer||Dt(t))?e?r(t):Lt(new Blob([t]),r):r(M[i]+(t||"")),Lt=(i,t)=>{let e=new FileReader;return e.onload=function(){let r=e.result.split(",")[1];t("b"+(r||""))},e.readAsDataURL(i)};function Bt(i){return i instanceof Uint8Array?i:i instanceof ArrayBuffer?new Uint8Array(i):new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}var tt;function Ft(i,t){if(It&&i.data instanceof Blob)return i.data.arrayBuffer().then(Bt).then(t);if(qt&&(i.data instanceof ArrayBuffer||Dt(i.data)))return t(Bt(i.data));ge(i,!1,e=>{tt||(tt=new TextEncoder),t(tt.encode(e))})}var Mt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",we=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let i=0;i<Mt.length;i++)we[Mt.charCodeAt(i)]=i;var Ut=i=>{let t=i.length*.75,e=i.length,r,s=0,n,o,c,h;i[i.length-1]==="="&&(t--,i[i.length-2]==="="&&t--);let a=new ArrayBuffer(t),u=new Uint8Array(a);for(r=0;r<e;r+=4)n=we[i.charCodeAt(r)],o=we[i.charCodeAt(r+1)],c=we[i.charCodeAt(r+2)],h=we[i.charCodeAt(r+3)],u[s++]=n<<2|o>>4,u[s++]=(o&15)<<4|c>>2,u[s++]=(c&3)<<6|h&63;return a};var ki=typeof ArrayBuffer=="function",ye=(i,t)=>{if(typeof i!="string")return{type:"message",data:Vt(i,t)};let e=i.charAt(0);return e==="b"?{type:"message",data:Ei(i.substring(1),t)}:pe[e]?i.length>1?{type:pe[e],data:i.substring(1)}:{type:pe[e]}:me},Ei=(i,t)=>{if(ki){let e=Ut(i);return Vt(e,t)}else return{base64:!0,data:i}},Vt=(i,t)=>{switch(t){case"blob":return i instanceof Blob?i:new Blob([i]);case"arraybuffer":default:return i instanceof ArrayBuffer?i:i.buffer}};var Ht="",$t=(i,t)=>{let e=i.length,r=new Array(e),s=0;i.forEach((n,o)=>{ge(n,!1,c=>{r[o]=c,++s===e&&t(r.join(Ht))})})},Wt=(i,t)=>{let e=i.split(Ht),r=[];for(let s=0;s<e.length;s++){let n=ye(e[s],t);if(r.push(n),n.type==="error")break}return r};function Kt(){return new TransformStream({transform(i,t){Ft(i,e=>{let r=e.length,s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);let n=new DataView(s.buffer);n.setUint8(0,126),n.setUint16(1,r)}else{s=new Uint8Array(9);let n=new DataView(s.buffer);n.setUint8(0,127),n.setBigUint64(1,BigInt(r))}i.data&&typeof i.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(e)})}})}var it;function Pe(i){return i.reduce((t,e)=>t+e.length,0)}function Le(i,t){if(i[0].length===t)return i.shift();let e=new Uint8Array(t),r=0;for(let s=0;s<t;s++)e[s]=i[0][r++],r===i[0].length&&(i.shift(),r=0);return i.length&&r<i[0].length&&(i[0]=i[0].slice(r)),e}function Zt(i,t){it||(it=new TextDecoder);let e=[],r=0,s=-1,n=!1;return new TransformStream({transform(o,c){for(e.push(o);;){if(r===0){if(Pe(e)<1)break;let h=Le(e,1);n=(h[0]&128)===128,s=h[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(Pe(e)<2)break;let h=Le(e,2);s=new DataView(h.buffer,h.byteOffset,h.length).getUint16(0),r=3}else if(r===2){if(Pe(e)<8)break;let h=Le(e,8),a=new DataView(h.buffer,h.byteOffset,h.length),u=a.getUint32(0);if(u>Math.pow(2,21)-1){c.enqueue(me);break}s=u*Math.pow(2,32)+a.getUint32(4),r=3}else{if(Pe(e)<s)break;let h=Le(e,s);c.enqueue(ye(n?h:it.decode(h),t)),r=0}if(s===0||s>i){c.enqueue(me);break}}}})}var rt=4;function S(i){if(i)return Si(i)}function Si(i){for(var t in S.prototype)i[t]=S.prototype[t];return i}S.prototype.on=S.prototype.addEventListener=function(i,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(t),this};S.prototype.once=function(i,t){function e(){this.off(i,e),t.apply(this,arguments)}return e.fn=t,this.on(i,e),this};S.prototype.off=S.prototype.removeListener=S.prototype.removeAllListeners=S.prototype.removeEventListener=function(i,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+i];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var r,s=0;s<e.length;s++)if(r=e[s],r===t||r.fn===t){e.splice(s,1);break}return e.length===0&&delete this._callbacks["$"+i],this};S.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+i],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(e){e=e.slice(0);for(var r=0,s=e.length;r<s;++r)e[r].apply(this,t)}return this};S.prototype.emitReserved=S.prototype.emit;S.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]};S.prototype.hasListeners=function(i){return!!this.listeners(i).length};var K=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),B=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Yt="arraybuffer";function Be(i,...t){return t.reduce((e,r)=>(i.hasOwnProperty(r)&&(e[r]=i[r]),e),{})}var Ni=B.setTimeout,Ci=B.clearTimeout;function Z(i,t){t.useNativeTimers?(i.setTimeoutFn=Ni.bind(B),i.clearTimeoutFn=Ci.bind(B)):(i.setTimeoutFn=B.setTimeout.bind(B),i.clearTimeoutFn=B.clearTimeout.bind(B))}var Ti=1.33;function Xt(i){return typeof i=="string"?Ai(i):Math.ceil((i.byteLength||i.size)*Ti)}function Ai(i){let t=0,e=0;for(let r=0,s=i.length;r<s;r++)t=i.charCodeAt(r),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(r++,e+=4);return e}function Ie(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Jt(i){let t="";for(let e in i)i.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(i[e]));return t}function zt(i){let t={},e=i.split("&");for(let r=0,s=e.length;r<s;r++){let n=e[r].split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return t}var qe=class extends Error{constructor(t,e,r){super(t),this.description=e,this.context=r,this.type="TransportError"}},Y=class extends S{constructor(t){super(),this.writable=!1,Z(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,r){return super.emitReserved("error",new qe(t,e,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){let e=ye(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){let t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){let e=Jt(t);return e.length?"?"+e:""}};var ae=class extends Y{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";let e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||e()})),this.writable||(r++,this.once("drain",function(){--r||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){let e=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Wt(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){let t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,$t(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=Ie()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}};var jt=!1;try{jt=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}var Qt=jt;function Ri(){}var st=class extends ae{constructor(t){if(super(t),typeof location<"u"){let e=location.protocol==="https:",r=location.port;r||(r=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,e){let r=this.request({method:"POST",data:t});r.on("success",e),r.on("error",(s,n)=>{this.onError("xhr post error",s,n)})}doPoll(){let t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,r)=>{this.onError("xhr poll error",e,r)}),this.pollXhr=t}},De=(()=>{class i extends S{constructor(e,r,s){super(),this.createRequest=e,Z(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;let r=Be(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;let s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&s.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var n;s.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=i.requestsCount++,i.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Ri,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete i.requests[this._index],this._xhr=null}}_onLoad(){let e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}return i.requestsCount=0,i.requests={},i})();if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Gt);else if(typeof addEventListener=="function"){let i="onpagehide"in B?"pagehide":"unload";addEventListener(i,Gt,!1)}}function Gt(){for(let i in De.requests)De.requests.hasOwnProperty(i)&&De.requests[i].abort()}var xi=function(){let i=ei({xdomain:!1});return i&&i.responseType!==null}(),X=class extends st{constructor(t){super(t);let e=t&&t.forceBase64;this.supportsBinary=xi&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new De(ei,this.uri(),t)}};function ei(i){let t=i.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Qt))return new XMLHttpRequest}catch{}if(!t)try{return new B[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}var ti=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",ot=class extends Y{get name(){return"websocket"}doOpen(){let t=this.uri(),e=this.opts.protocols,r=ti?{}:Be(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let r=t[e],s=e===t.length-1;ge(r,this.supportsBinary,n=>{try{this.doWrite(r,n)}catch{}s&&K(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=Ie()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}},nt=B.WebSocket||B.MozWebSocket,J=class extends ot{createSocket(t,e,r){return ti?new nt(t,e,r):e?new nt(t,e):new nt(t)}doWrite(t,e){this.ws.send(e)}};var re=class extends Y{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{let e=Zt(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(e).getReader(),s=Kt();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();let n=()=>{r.read().then(({done:c,value:h})=>{c||(this.onPacket(h),n())}).catch(c=>{})};n();let o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let r=t[e],s=e===t.length-1;this._writer.write(r).then(()=>{s&&K(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}};var ct={websocket:J,webtransport:re,polling:X};var Oi=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Pi=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function he(i){if(i.length>8e3)throw"URI too long";let t=i,e=i.indexOf("["),r=i.indexOf("]");e!=-1&&r!=-1&&(i=i.substring(0,e)+i.substring(e,r).replace(/:/g,";")+i.substring(r,i.length));let s=Oi.exec(i||""),n={},o=14;for(;o--;)n[Pi[o]]=s[o]||"";return e!=-1&&r!=-1&&(n.source=t,n.host=n.host.substring(1,n.host.length-1).replace(/;/g,":"),n.authority=n.authority.replace("[","").replace("]","").replace(/;/g,":"),n.ipv6uri=!0),n.pathNames=Li(n,n.path),n.queryKey=Bi(n,n.query),n}function Li(i,t){let e=/\/{2,9}/g,r=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Bi(i,t){let e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,n){s&&(e[s]=n)}),e}var at=typeof addEventListener=="function"&&typeof removeEventListener=="function",Fe=[];at&&addEventListener("offline",()=>{Fe.forEach(i=>i())},!1);var Me=(()=>{class i extends S{constructor(e,r){if(super(),this.binaryType=Yt,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(r=e,e=null),e){let s=he(e);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=he(r.host).host);Z(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{let n=s.prototype.name;this.transports.push(n),this._transportsByName[n]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=zt(this.opts.query)),at&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Fe.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){let r=Object.assign({},this.opts.query);r.EIO=rt,r.transport=e,this.id&&(r.sid=this.id);let s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let e=this.opts.rememberUpgrade&&i.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";let r=this.createTransport(e);r.open(),this.setTransport(r)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",i.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let r=new Error("server error");r.code=e.data,this._onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){let n=this.writeBuffer[s].data;if(n&&(r+=Xt(n)),s>0&&r>this._maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,K(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,r,s){return this._sendPacket("message",e,r,s),this}send(e,r,s){return this._sendPacket("message",e,r,s),this}_sendPacket(e,r,s,n){if(typeof r=="function"&&(n=r,r=void 0),typeof s=="function"&&(n=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;let o={type:e,data:r,options:s};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}close(){let e=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(i.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),at&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let s=Fe.indexOf(this._offlineEventListener);s!==-1&&Fe.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this._prevBufferLen=0}}}return i.protocol=rt,i})(),Ue=class extends Me{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),r=!1;Me.priorWebsocketSuccess=!1;let s=()=>{r||(e.send([{type:"ping",data:"probe"}]),e.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Me.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{let l=new Error("probe error");l.transport=e.name,this.emitReserved("upgradeError",l)}}))};function n(){r||(r=!0,u(),e.close(),e=null)}let o=f=>{let l=new Error("probe error: "+f);l.transport=e.name,n(),this.emitReserved("upgradeError",l)};function c(){o("transport closed")}function h(){o("socket closed")}function a(f){e&&f.name!==e.name&&n()}let u=()=>{e.removeListener("open",s),e.removeListener("error",o),e.removeListener("close",c),this.off("close",h),this.off("upgrading",a)};e.once("open",s),e.once("error",o),e.once("close",c),this.once("close",h),this.once("upgrading",a),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){let e=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&e.push(t[r]);return e}},ue=class extends Ue{constructor(t,e={}){let r=typeof t=="object"?t:e;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>ct[s]).filter(s=>!!s)),super(t,r)}};var _e=class extends ae{doPoll(){this._fetch().then(t=>{if(!t.ok)return this.onError("fetch read error",t.status,t);t.text().then(e=>this.onData(e))}).catch(t=>{this.onError("fetch read error",t)})}doWrite(t,e){this._fetch(t).then(r=>{if(!r.ok)return this.onError("fetch write error",r.status,r);e()}).catch(r=>{this.onError("fetch write error",r)})}_fetch(t){var e;let r=t!==void 0,s=new Headers(this.opts.extraHeaders);return r&&s.set("content-type","text/plain;charset=UTF-8"),(e=this.socket._cookieJar)===null||e===void 0||e.appendCookies(s),fetch(this.uri(),{method:r?"POST":"GET",body:r?t:null,headers:s,credentials:this.opts.withCredentials?"include":"omit"}).then(n=>{var o;return(o=this.socket._cookieJar)===null||o===void 0||o.parseCookies(n.headers.getSetCookie()),n})}};var Ms=ue.protocol;function ii(i,t="",e){let r=i;e=e||typeof location<"u"&&location,i==null&&(i=e.protocol+"//"+e.host),typeof i=="string"&&(i.charAt(0)==="/"&&(i.charAt(1)==="/"?i=e.protocol+i:i=e.host+i),/^(https?|wss?):\/\//.test(i)||(typeof e<"u"?i=e.protocol+"//"+i:i="https://"+i),r=he(i)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";let n=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+n+":"+r.port+t,r.href=r.protocol+"://"+n+(e&&e.port===r.port?"":":"+r.port),r}var mt={};kt(mt,{Decoder:()=>lt,Encoder:()=>ft,PacketType:()=>_,protocol:()=>pt});var Ii=typeof ArrayBuffer=="function",qi=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer,ri=Object.prototype.toString,Di=typeof Blob=="function"||typeof Blob<"u"&&ri.call(Blob)==="[object BlobConstructor]",Fi=typeof File=="function"||typeof File<"u"&&ri.call(File)==="[object FileConstructor]";function be(i){return Ii&&(i instanceof ArrayBuffer||qi(i))||Di&&i instanceof Blob||Fi&&i instanceof File}function ve(i,t){if(!i||typeof i!="object")return!1;if(Array.isArray(i)){for(let e=0,r=i.length;e<r;e++)if(ve(i[e]))return!0;return!1}if(be(i))return!0;if(i.toJSON&&typeof i.toJSON=="function"&&arguments.length===1)return ve(i.toJSON(),!0);for(let e in i)if(Object.prototype.hasOwnProperty.call(i,e)&&ve(i[e]))return!0;return!1}function si(i){let t=[],e=i.data,r=i;return r.data=ht(e,t),r.attachments=t.length,{packet:r,buffers:t}}function ht(i,t){if(!i)return i;if(be(i)){let e={_placeholder:!0,num:t.length};return t.push(i),e}else if(Array.isArray(i)){let e=new Array(i.length);for(let r=0;r<i.length;r++)e[r]=ht(i[r],t);return e}else if(typeof i=="object"&&!(i instanceof Date)){let e={};for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=ht(i[r],t));return e}return i}function ni(i,t){return i.data=ut(i.data,t),delete i.attachments,i}function ut(i,t){if(!i)return i;if(i&&i._placeholder===!0){if(typeof i.num=="number"&&i.num>=0&&i.num<t.length)return t[i.num];throw new Error("illegal attachments")}else if(Array.isArray(i))for(let e=0;e<i.length;e++)i[e]=ut(i[e],t);else if(typeof i=="object")for(let e in i)Object.prototype.hasOwnProperty.call(i,e)&&(i[e]=ut(i[e],t));return i}var Mi=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],pt=5,_=function(i){return i[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK",i}(_||{}),ft=class{constructor(t){this.replacer=t}encode(t){return(t.type===_.EVENT||t.type===_.ACK)&&ve(t)?this.encodeAsBinary({type:t.type===_.EVENT?_.BINARY_EVENT:_.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===_.BINARY_EVENT||t.type===_.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){let e=si(t),r=this.encodeAsString(e.packet),s=e.buffers;return s.unshift(r),s}};function oi(i){return Object.prototype.toString.call(i)==="[object Object]"}var lt=class i extends S{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);let r=e.type===_.BINARY_EVENT;r||e.type===_.BINARY_ACK?(e.type=r?_.EVENT:_.ACK,this.reconstructor=new dt(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(be(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0,r={type:Number(t.charAt(0))};if(_[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===_.BINARY_EVENT||r.type===_.BINARY_ACK){let n=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);let o=t.substring(n,e);if(o!=Number(o)||t.charAt(e)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(t.charAt(e+1)==="/"){let n=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););r.nsp=t.substring(n,e)}else r.nsp="/";let s=t.charAt(e+1);if(s!==""&&Number(s)==s){let n=e+1;for(;++e;){let o=t.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===t.length)break}r.id=Number(t.substring(n,e+1))}if(t.charAt(++e)){let n=this.tryParse(t.substr(e));if(i.isPayloadValid(r.type,n))r.data=n;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case _.CONNECT:return oi(e);case _.DISCONNECT:return e===void 0;case _.CONNECT_ERROR:return typeof e=="string"||oi(e);case _.EVENT:case _.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&Mi.indexOf(e[0])===-1);case _.ACK:case _.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},dt=class{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){let e=ni(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function q(i,t,e){return i.on(t,e),function(){i.off(t,e)}}var Ui=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),se=class extends S{constructor(t,e,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let t=this.io;this.subs=[q(t,"open",this.onopen.bind(this)),q(t,"packet",this.onpacket.bind(this)),q(t,"error",this.onerror.bind(this)),q(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var r,s,n;if(Ui.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;let o={type:_.EVENT,data:e};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){let u=this.ids++,f=e.pop();this._registerAckCallback(u,f),o.id=u}let c=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,h=this.connected&&!(!((n=this.io.engine)===null||n===void 0)&&n._hasPingExpired());return this.flags.volatile&&!c||(h?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,e){var r;let s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[t]=e;return}let n=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);e.call(this,new Error("operation has timed out"))},s),o=(...c)=>{this.io.clearTimeoutFn(n),e.apply(this,c)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...e){return new Promise((r,s)=>{let n=(o,c)=>o?s(o):r(c);n.withError=!0,e.push(n),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());let r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...n)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(s)):(this._queue.shift(),e&&e(null,...n)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;let e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:_.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){let r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case _.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case _.EVENT:case _.BINARY_EVENT:this.onevent(t);break;case _.ACK:case _.BINARY_ACK:this.onack(t);break;case _.DISCONNECT:this.ondisconnect();break;case _.CONNECT_ERROR:this.destroy();let r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){let e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){let e=this._anyListeners.slice();for(let r of e)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){let e=this,r=!1;return function(...s){r||(r=!0,e.packet({type:_.ACK,id:t,data:s}))}}onack(t){let e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:_.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){let e=this._anyListeners;for(let r=0;r<e.length;r++)if(t===e[r])return e.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){let e=this._anyOutgoingListeners;for(let r=0;r<e.length;r++)if(t===e[r])return e.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let e=this._anyOutgoingListeners.slice();for(let r of e)r.apply(this,t.data)}}};function ne(i){i=i||{},this.ms=i.min||100,this.max=i.max||1e4,this.factor=i.factor||2,this.jitter=i.jitter>0&&i.jitter<=1?i.jitter:0,this.attempts=0}ne.prototype.duration=function(){var i=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*i);i=Math.floor(t*10)&1?i+e:i-e}return Math.min(i,this.max)|0};ne.prototype.reset=function(){this.attempts=0};ne.prototype.setMin=function(i){this.ms=i};ne.prototype.setMax=function(i){this.max=i};ne.prototype.setJitter=function(i){this.jitter=i};var oe=class extends S{constructor(t,e){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Z(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((r=e.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new ne({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;let s=e.parser||mt;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new ue(this.uri,this.opts);let e=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;let s=q(e,"open",function(){r.onopen(),t&&t()}),n=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),t?t(c):this.maybeReconnectOnOpen()},o=q(e,"error",n);if(this._timeout!==!1){let c=this._timeout,h=this.setTimeoutFn(()=>{s(),n(new Error("timeout")),e.close()},c);this.opts.autoUnref&&h.unref(),this.subs.push(()=>{this.clearTimeoutFn(h)})}return this.subs.push(s),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let t=this.engine;this.subs.push(q(t,"ping",this.onping.bind(this)),q(t,"data",this.ondata.bind(this)),q(t,"error",this.onerror.bind(this)),q(t,"close",this.onclose.bind(this)),q(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){K(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new se(this,t,e),this.nsps[t]=r),r}_destroy(t){let e=Object.keys(this.nsps);for(let r of e)if(this.nsps[r].active)return;this._close()}_packet(t){let e=this.encoder.encode(t);for(let r=0;r<e.length;r++)this.engine.write(e[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let e=this.backoff.duration();this._reconnecting=!0;let r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},e);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){let t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}};var ke={};function ce(i,t){typeof i=="object"&&(t=i,i=void 0),t=t||{};let e=ii(i,t.path||"/socket.io"),r=e.source,s=e.id,n=e.path,o=ke[s]&&n in ke[s].nsps,c=t.forceNew||t["force new connection"]||t.multiplex===!1||o,h;return c?h=new oe(r,t):(ke[s]||(ke[s]=new oe(r,t)),h=ke[s]),e.query&&!t.query&&(t.query=e.queryKey),h.socket(e.path,t)}Object.assign(ce,{Manager:oe,Socket:se,io:ce,connect:ce});var Q=class{config;subscribersCounter={};eventObservables$={};ioSocket;emptyConfig={url:"",options:{}};constructor(t){this.config=t,t===void 0&&(t=this.emptyConfig);let e=t.url,r=t.options,s=ce?ce:gt;this.ioSocket=s(e,r)}of(t){this.ioSocket.of(t)}on(t,e){this.ioSocket.on(t,e)}once(t,e){this.ioSocket.once(t,e)}connect(t){return this.ioSocket.connect(t)}disconnect(t){return this.ioSocket.disconnect.apply(this.ioSocket,arguments)}emit(t,...e){return this.ioSocket.emit.apply(this.ioSocket,arguments)}removeListener(t,e){return this.ioSocket.removeListener.apply(this.ioSocket,arguments)}removeAllListeners(t){return this.ioSocket.removeAllListeners.apply(this.ioSocket,arguments)}fromEvent(t){return this.subscribersCounter[t]||(this.subscribersCounter[t]=0),this.subscribersCounter[t]++,this.eventObservables$[t]||(this.eventObservables$[t]=new Et(e=>{let r=s=>{e.next(s)};return this.ioSocket.on(t,r),()=>{this.subscribersCounter[t]--,this.subscribersCounter[t]===0&&(this.ioSocket.removeListener(t,r),delete this.eventObservables$[t])}}).pipe(Nt())),this.eventObservables$[t]}fromOneTimeEvent(t){return new Promise(e=>this.once(t,e))}listeners(t){return this.ioSocket.listeners(t)}listenersAny(){return this.ioSocket.listenersAny()}listenersAnyOutgoing(){return this.ioSocket.listenersAnyOutgoing()}off(t,e){return t?t&&!e?this.ioSocket.off(t):this.ioSocket.off(t,e):this.ioSocket.offAny()}onAny(t){return this.ioSocket.onAny(t)}onAnyOutgoing(t){return this.ioSocket.onAnyOutgoing(t)}prependAny(t){return this.ioSocket.prependAny(t)}prependAnyOutgoing(t){return this.ioSocket.prependAnyOutgoing(t)}timeout(t){return this.ioSocket.timeout(t)}volatile(){return this.ioSocket.volatile}};function Vi(i){return new Q(i)}var ci=new Tt("__SOCKET_IO_CONFIG__"),Rn=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[{provide:ci,useValue:e},{provide:Q,useFactory:Vi,deps:[ci]}]}}static \u0275fac=function(r){return new(r||i)};static \u0275mod=At({type:i});static \u0275inj=Ct({})}return i})();var He=(()=>{class i{constructor(){this.api=O(xe),this.notification=O(Re),this.socket=O(Q),this.userService=O(Oe),this.socketId=this.userService.socketId,this.exchangeRate=C({rate_value:0}),this.recentRates=C([]),this.rateDialogVisible=C(!1),this.getExchangeRate()}getExchangeRate(){this.api.get("rate").subscribe({next:e=>{this.exchangeRate.set(e)}})}updateExchangeRate(e){this.api.post("rate",e).subscribe({next:r=>{this.notification.showSuccess(),this.exchangeRate.set(r),this.rateDialogVisible.set(!1)}})}initializeSocket(){this.socket.on("exchangeRateUpdated",e=>{let r=e[0];e[1].user_id!=this.socketId()&&(this.notification.showSocketMessage("Exchange rate has been updated"),this.exchangeRate.set(r))})}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Hn=(()=>{class i{constructor(){this.rateService=O(He),this.exchangeRate=this.rateService.exchangeRate}transform(e){return new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(Number(Math.round(e*this.exchangeRate().rate_value/1e3)*1e3)||0)+" L.L"}calculate(e){return Math.round(e*this.exchangeRate().rate_value/1e3)*1e3||0}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275pipe=Rt({name:"dollar",type:i,pure:!1,standalone:!0})}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var io=(()=>{class i{constructor(){this.http=O(xt),this.notificationService=O(Re),this.api=O(xe),this.localStorageService=O(Pt),this.socket=O(Q),this.userService=O(Oe),this.router=O(Ot),this.rateService=O(He),this.exchangeRate=this.rateService.exchangeRate,this.socketId=this.userService.socketId,this.rowsPerPage=C(this.localStorageService.getStockRowsPerPage()),this.categories=C([]),this.categoriesLoading=C(!1),this.selectedProduct=C(null),this.selectedCategoryProduct=C(null),this.selectedCategory=C(null),this.selectedCategorySell=C(null),this.itemSidebarVisible=C(!1),this.products=C([]),this.tableLoading=C(!1),this.sellProductsLoading=C(!1),this.stockHistory=C([]),this.historyLoading=C(!1),this.historyDialogVisible=C(!1),this.generatedBarcode=new St(null),this.brands=C([]),this.brandsLoading=C(!1),this.selectedBrand=C(null),this.glowingRowIndex=C(null),this.getCategories(),this.getItems(),this.getBrands(),this.initializeSockets()}updateRowsPerPage(e){this.localStorageService.setStockRowsPerPage(e),this.rowsPerPage.set(this.localStorageService.getStockRowsPerPage())}getCategories(){this.categoriesLoading.set(!0),this.http.get(`${this.api.host()}/stock/categories`).pipe(et(()=>{this.categoriesLoading.set(!1)})).subscribe({next:e=>{this.categories.set(e)},error:e=>{this.notificationService.handleError(e.error,"home")}})}sortCategories(){this.http.patch(`${this.api.host()}/stock/categories/sort`,this.categories()).subscribe({next:e=>{this.categories.set(e),this.notificationService.showSuccess("Rows reordered successfully!","home")},error:e=>{this.notificationService.handleError(e.error,"home")}})}deleteCategory(e){this.http.delete(`${this.api.host()}/stock/categories/${e}`).subscribe({next:r=>{this.notificationService.showSuccess(r.message,"home"),this.getCategories(),this.selectedCategory.set(null)},error:r=>{this.notificationService.handleError(r.error,"home")}})}getItems(){this.tableLoading.set(!0),this.http.get(`${this.api.host()}/stock/items`).subscribe({next:e=>{this.products.set(e),this.tableLoading.set(!1)},error:e=>{this.notificationService.handleError(e.error,"home"),this.tableLoading.set(!1)}})}onCreateProduct(e){this.products.set([...this.products(),e])}onUpdateProduct(e){this.products.update(r=>{let s=this.products().findIndex(n=>n.product_id===e.product_id);return[...r.slice(0,s),e,...r.slice(s+1)]}),this.selectedProduct.set(e)}deleteItem(e){this.tableLoading.set(!0),this.http.delete(`${this.api.host()}/stock/items/${e.product_id}`).subscribe({next:r=>{this.products.update(s=>{let n=this.products().findIndex(o=>o.product_id===e.product_id);return s.splice(n,1),[...s]}),this.notificationService.showSuccess(r.message,"home"),this.tableLoading.set(!1),this.selectedProduct.set(null),this.selectedCategoryProduct.set(null)},error:r=>{this.notificationService.handleError(r.error,"home"),this.tableLoading.set(!1)}})}fetchStockHistory(e){this.historyLoading.set(!0),this.http.get(`${this.api.host()}/stock/history/${e}`).subscribe({next:r=>{this.historyLoading.set(!1),this.stockHistory.set(r),this.historyDialogVisible.set(!0)},error:r=>{this.historyLoading.set(!1),this.notificationService.handleError(r.error,"home")}})}generateBarcode(){this.http.get(`${this.api.host()}/stock/generate-barcode`).subscribe({next:e=>{this.generatedBarcode.next(e)},error:e=>{this.notificationService.showError(e.error,"home")}})}resetSellPage(){this.selectedCategorySell.set(null)}getBrands(){this.brandsLoading.set(!0),this.api.get("stock/brands").pipe(et(()=>{this.brandsLoading.set(!1)})).subscribe({next:e=>{this.brands.set(e)}})}deleteBrand(e){this.api.delete(`stock/brands/${e}`).subscribe({next:r=>{this.brands.update(s=>{let n=this.brands().findIndex(o=>o.brand_id===e);return s.splice(n,1),[...s]}),this.notificationService.showSuccess(r.message,"home"),this.selectedBrand.set(null),this.getItems()}})}highlightRow(e){this.glowingRowIndex.set(e),setTimeout(()=>{this.glowingRowIndex.set(null)},2e3)}initializeSockets(){this.socket.on("productCreated",e=>{let r=e[0];e[1].user_id!=this.socketId()&&(this.products.set([...this.products(),r]),this.notificationService.showSocketMessage("New product created!","home"),this.highlightRow(this.products().length-1))}),this.socket.on("productUpdated",e=>{let r=e[0];if(e[1].user_id!=this.socketId()){let n=this.products().findIndex(o=>o.product_id===r.product_id);this.products.update(o=>[...o.slice(0,n),r,...o.slice(n+1)]),this.notificationService.showSocketMessage("A product has been updated!","home"),r.product_id==this.selectedProduct()?.product_id&&this.selectedProduct.set(r),this.highlightRow(n)}}),this.socket.on("productDeleted",e=>{let r=e[0];e[1].user_id!=this.socketId()&&(this.products.update(n=>{let o=this.products().findIndex(c=>c.product_id===r.product_id);return n.splice(o,1),[...n]}),this.notificationService.showSocketMessage("A product has been deleted!","home"),r.product_id==this.selectedProduct()?.product_id&&this.selectedProduct.set(null))}),this.socket.on("categoryCreated",e=>{let r=e[0];e[1].user_id!=this.socketId()&&(this.categories.set([...this.categories(),r]),this.notificationService.showSocketMessage("New category created!","home"))}),this.socket.on("categoryUpdated",e=>{let r=e[0];if(e[1].user_id!=this.socketId()){let n=this.categories().findIndex(o=>o.category_id===r.category_id);this.categories.update(o=>[...o.slice(0,n),r,...o.slice(n+1)]),this.selectedCategory()&&this.selectedCategory.set(r),this.selectedCategorySell()?.category_id==r.category_id&&this.selectedCategorySell.set(r),this.notificationService.showSocketMessage("A category has been updated!","home")}}),this.socket.on("categoryDeleted",e=>{let r=e[0];e[1].user_id!=this.socketId()&&(this.categories.update(n=>{let o=this.categories().findIndex(c=>c.category_id===r.category_id);return n.splice(o,1),[...n]}),this.notificationService.showSocketMessage("A category has been deleted!","home"),r.category_id==this.selectedCategory()?.category_id&&(this.selectedCategory.set(null),this.selectedCategorySell.set(null)))})}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var fe=9e15,ie=1e9,wt="0123456789abcdef",Ke="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Ze="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",yt={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-fe,maxE:fe,crypto:!1},fi,z,w=!0,Xe="[DecimalError] ",te=Xe+"Invalid argument: ",li=Xe+"Precision limit exceeded",di=Xe+"crypto unavailable",pi="[object Decimal]",P=Math.floor,T=Math.pow,Hi=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,$i=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Wi=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,mi=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,U=1e7,g=7,Ki=9007199254740991,Zi=Ke.length-1,_t=Ze.length-1,d={toStringTag:pi};d.absoluteValue=d.abs=function(){var i=new this.constructor(this);return i.s<0&&(i.s=1),p(i)};d.ceil=function(){return p(new this.constructor(this),this.e+1,2)};d.clampedTo=d.clamp=function(i,t){var e,r=this,s=r.constructor;if(i=new s(i),t=new s(t),!i.s||!t.s)return new s(NaN);if(i.gt(t))throw Error(te+t);return e=r.cmp(i),e<0?i:r.cmp(t)>0?t:new s(r)};d.comparedTo=d.cmp=function(i){var t,e,r,s,n=this,o=n.d,c=(i=new n.constructor(i)).d,h=n.s,a=i.s;if(!o||!c)return!h||!a?NaN:h!==a?h:o===c?0:!o^h<0?1:-1;if(!o[0]||!c[0])return o[0]?h:c[0]?-a:0;if(h!==a)return h;if(n.e!==i.e)return n.e>i.e^h<0?1:-1;for(r=o.length,s=c.length,t=0,e=r<s?r:s;t<e;++t)if(o[t]!==c[t])return o[t]>c[t]^h<0?1:-1;return r===s?0:r>s^h<0?1:-1};d.cosine=d.cos=function(){var i,t,e=this,r=e.constructor;return e.d?e.d[0]?(i=r.precision,t=r.rounding,r.precision=i+Math.max(e.e,e.sd())+g,r.rounding=1,e=Yi(r,vi(r,e)),r.precision=i,r.rounding=t,p(z==2||z==3?e.neg():e,i,t,!0)):new r(1):new r(NaN)};d.cubeRoot=d.cbrt=function(){var i,t,e,r,s,n,o,c,h,a,u=this,f=u.constructor;if(!u.isFinite()||u.isZero())return new f(u);for(w=!1,n=u.s*T(u.s*u,1/3),!n||Math.abs(n)==1/0?(e=A(u.d),i=u.e,(n=(i-e.length+1)%3)&&(e+=n==1||n==-2?"0":"00"),n=T(e,1/3),i=P((i+1)/3)-(i%3==(i<0?-1:2)),n==1/0?e="5e"+i:(e=n.toExponential(),e=e.slice(0,e.indexOf("e")+1)+i),r=new f(e),r.s=u.s):r=new f(n.toString()),o=(i=f.precision)+3;;)if(c=r,h=c.times(c).times(c),a=h.plus(u),r=k(a.plus(u).times(c),a.plus(h),o+2,1),A(c.d).slice(0,o)===(e=A(r.d)).slice(0,o))if(e=e.slice(o-3,o+1),e=="9999"||!s&&e=="4999"){if(!s&&(p(c,i+1,0),c.times(c).times(c).eq(u))){r=c;break}o+=4,s=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(p(r,i+1,1),t=!r.times(r).times(r).eq(u));break}return w=!0,p(r,i,f.rounding,t)};d.decimalPlaces=d.dp=function(){var i,t=this.d,e=NaN;if(t){if(i=t.length-1,e=(i-P(this.e/g))*g,i=t[i],i)for(;i%10==0;i/=10)e--;e<0&&(e=0)}return e};d.dividedBy=d.div=function(i){return k(this,new this.constructor(i))};d.dividedToIntegerBy=d.divToInt=function(i){var t=this,e=t.constructor;return p(k(t,new e(i),0,1,1),e.precision,e.rounding)};d.equals=d.eq=function(i){return this.cmp(i)===0};d.floor=function(){return p(new this.constructor(this),this.e+1,3)};d.greaterThan=d.gt=function(i){return this.cmp(i)>0};d.greaterThanOrEqualTo=d.gte=function(i){var t=this.cmp(i);return t==1||t===0};d.hyperbolicCosine=d.cosh=function(){var i,t,e,r,s,n=this,o=n.constructor,c=new o(1);if(!n.isFinite())return new o(n.s?1/0:NaN);if(n.isZero())return c;e=o.precision,r=o.rounding,o.precision=e+Math.max(n.e,n.sd())+4,o.rounding=1,s=n.d.length,s<32?(i=Math.ceil(s/3),t=(1/ze(4,i)).toString()):(i=16,t="2.3283064365386962890625e-10"),n=le(o,1,n.times(t),new o(1),!0);for(var h,a=i,u=new o(8);a--;)h=n.times(n),n=c.minus(h.times(u.minus(h.times(u))));return p(n,o.precision=e,o.rounding=r,!0)};d.hyperbolicSine=d.sinh=function(){var i,t,e,r,s=this,n=s.constructor;if(!s.isFinite()||s.isZero())return new n(s);if(t=n.precision,e=n.rounding,n.precision=t+Math.max(s.e,s.sd())+4,n.rounding=1,r=s.d.length,r<3)s=le(n,2,s,s,!0);else{i=1.4*Math.sqrt(r),i=i>16?16:i|0,s=s.times(1/ze(5,i)),s=le(n,2,s,s,!0);for(var o,c=new n(5),h=new n(16),a=new n(20);i--;)o=s.times(s),s=s.times(c.plus(o.times(h.times(o).plus(a))))}return n.precision=t,n.rounding=e,p(s,t,e,!0)};d.hyperbolicTangent=d.tanh=function(){var i,t,e=this,r=e.constructor;return e.isFinite()?e.isZero()?new r(e):(i=r.precision,t=r.rounding,r.precision=i+7,r.rounding=1,k(e.sinh(),e.cosh(),r.precision=i,r.rounding=t)):new r(e.s)};d.inverseCosine=d.acos=function(){var i=this,t=i.constructor,e=i.abs().cmp(1),r=t.precision,s=t.rounding;return e!==-1?e===0?i.isNeg()?V(t,r,s):new t(0):new t(NaN):i.isZero()?V(t,r+4,s).times(.5):(t.precision=r+6,t.rounding=1,i=new t(1).minus(i).div(i.plus(1)).sqrt().atan(),t.precision=r,t.rounding=s,i.times(2))};d.inverseHyperbolicCosine=d.acosh=function(){var i,t,e=this,r=e.constructor;return e.lte(1)?new r(e.eq(1)?0:NaN):e.isFinite()?(i=r.precision,t=r.rounding,r.precision=i+Math.max(Math.abs(e.e),e.sd())+4,r.rounding=1,w=!1,e=e.times(e).minus(1).sqrt().plus(e),w=!0,r.precision=i,r.rounding=t,e.ln()):new r(e)};d.inverseHyperbolicSine=d.asinh=function(){var i,t,e=this,r=e.constructor;return!e.isFinite()||e.isZero()?new r(e):(i=r.precision,t=r.rounding,r.precision=i+2*Math.max(Math.abs(e.e),e.sd())+6,r.rounding=1,w=!1,e=e.times(e).plus(1).sqrt().plus(e),w=!0,r.precision=i,r.rounding=t,e.ln())};d.inverseHyperbolicTangent=d.atanh=function(){var i,t,e,r,s=this,n=s.constructor;return s.isFinite()?s.e>=0?new n(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(i=n.precision,t=n.rounding,r=s.sd(),Math.max(r,i)<2*-s.e-1?p(new n(s),i,t,!0):(n.precision=e=r-s.e,s=k(s.plus(1),new n(1).minus(s),e+i,1),n.precision=i+4,n.rounding=1,s=s.ln(),n.precision=i,n.rounding=t,s.times(.5))):new n(NaN)};d.inverseSine=d.asin=function(){var i,t,e,r,s=this,n=s.constructor;return s.isZero()?new n(s):(t=s.abs().cmp(1),e=n.precision,r=n.rounding,t!==-1?t===0?(i=V(n,e+4,r).times(.5),i.s=s.s,i):new n(NaN):(n.precision=e+6,n.rounding=1,s=s.div(new n(1).minus(s.times(s)).sqrt().plus(1)).atan(),n.precision=e,n.rounding=r,s.times(2)))};d.inverseTangent=d.atan=function(){var i,t,e,r,s,n,o,c,h,a=this,u=a.constructor,f=u.precision,l=u.rounding;if(a.isFinite()){if(a.isZero())return new u(a);if(a.abs().eq(1)&&f+4<=_t)return o=V(u,f+4,l).times(.25),o.s=a.s,o}else{if(!a.s)return new u(NaN);if(f+4<=_t)return o=V(u,f+4,l).times(.5),o.s=a.s,o}for(u.precision=c=f+10,u.rounding=1,e=Math.min(28,c/g+2|0),i=e;i;--i)a=a.div(a.times(a).plus(1).sqrt().plus(1));for(w=!1,t=Math.ceil(c/g),r=1,h=a.times(a),o=new u(a),s=a;i!==-1;)if(s=s.times(h),n=o.minus(s.div(r+=2)),s=s.times(h),o=n.plus(s.div(r+=2)),o.d[t]!==void 0)for(i=t;o.d[i]===n.d[i]&&i--;);return e&&(o=o.times(2<<e-1)),w=!0,p(o,u.precision=f,u.rounding=l,!0)};d.isFinite=function(){return!!this.d};d.isInteger=d.isInt=function(){return!!this.d&&P(this.e/g)>this.d.length-2};d.isNaN=function(){return!this.s};d.isNegative=d.isNeg=function(){return this.s<0};d.isPositive=d.isPos=function(){return this.s>0};d.isZero=function(){return!!this.d&&this.d[0]===0};d.lessThan=d.lt=function(i){return this.cmp(i)<0};d.lessThanOrEqualTo=d.lte=function(i){return this.cmp(i)<1};d.logarithm=d.log=function(i){var t,e,r,s,n,o,c,h,a=this,u=a.constructor,f=u.precision,l=u.rounding,m=5;if(i==null)i=new u(10),t=!0;else{if(i=new u(i),e=i.d,i.s<0||!e||!e[0]||i.eq(1))return new u(NaN);t=i.eq(10)}if(e=a.d,a.s<0||!e||!e[0]||a.eq(1))return new u(e&&!e[0]?-1/0:a.s!=1?NaN:e?0:1/0);if(t)if(e.length>1)n=!0;else{for(s=e[0];s%10===0;)s/=10;n=s!==1}if(w=!1,c=f+m,o=ee(a,c),r=t?Ye(u,c+10):ee(i,c),h=k(o,r,c,1),Ee(h.d,s=f,l))do if(c+=10,o=ee(a,c),r=t?Ye(u,c+10):ee(i,c),h=k(o,r,c,1),!n){+A(h.d).slice(s+1,s+15)+1==1e14&&(h=p(h,f+1,0));break}while(Ee(h.d,s+=10,l));return w=!0,p(h,f,l)};d.minus=d.sub=function(i){var t,e,r,s,n,o,c,h,a,u,f,l,m=this,v=m.constructor;if(i=new v(i),!m.d||!i.d)return!m.s||!i.s?i=new v(NaN):m.d?i.s=-i.s:i=new v(i.d||m.s!==i.s?m:NaN),i;if(m.s!=i.s)return i.s=-i.s,m.plus(i);if(a=m.d,l=i.d,c=v.precision,h=v.rounding,!a[0]||!l[0]){if(l[0])i.s=-i.s;else if(a[0])i=new v(m);else return new v(h===3?-0:0);return w?p(i,c,h):i}if(e=P(i.e/g),u=P(m.e/g),a=a.slice(),n=u-e,n){for(f=n<0,f?(t=a,n=-n,o=l.length):(t=l,e=u,o=a.length),r=Math.max(Math.ceil(c/g),o)+2,n>r&&(n=r,t.length=1),t.reverse(),r=n;r--;)t.push(0);t.reverse()}else{for(r=a.length,o=l.length,f=r<o,f&&(o=r),r=0;r<o;r++)if(a[r]!=l[r]){f=a[r]<l[r];break}n=0}for(f&&(t=a,a=l,l=t,i.s=-i.s),o=a.length,r=l.length-o;r>0;--r)a[o++]=0;for(r=l.length;r>n;){if(a[--r]<l[r]){for(s=r;s&&a[--s]===0;)a[s]=U-1;--a[s],a[r]+=U}a[r]-=l[r]}for(;a[--o]===0;)a.pop();for(;a[0]===0;a.shift())--e;return a[0]?(i.d=a,i.e=Je(a,e),w?p(i,c,h):i):new v(h===3?-0:0)};d.modulo=d.mod=function(i){var t,e=this,r=e.constructor;return i=new r(i),!e.d||!i.s||i.d&&!i.d[0]?new r(NaN):!i.d||e.d&&!e.d[0]?p(new r(e),r.precision,r.rounding):(w=!1,r.modulo==9?(t=k(e,i.abs(),0,3,1),t.s*=i.s):t=k(e,i,0,r.modulo,1),t=t.times(i),w=!0,e.minus(t))};d.naturalExponential=d.exp=function(){return vt(this)};d.naturalLogarithm=d.ln=function(){return ee(this)};d.negated=d.neg=function(){var i=new this.constructor(this);return i.s=-i.s,p(i)};d.plus=d.add=function(i){var t,e,r,s,n,o,c,h,a,u,f=this,l=f.constructor;if(i=new l(i),!f.d||!i.d)return!f.s||!i.s?i=new l(NaN):f.d||(i=new l(i.d||f.s===i.s?f:NaN)),i;if(f.s!=i.s)return i.s=-i.s,f.minus(i);if(a=f.d,u=i.d,c=l.precision,h=l.rounding,!a[0]||!u[0])return u[0]||(i=new l(f)),w?p(i,c,h):i;if(n=P(f.e/g),r=P(i.e/g),a=a.slice(),s=n-r,s){for(s<0?(e=a,s=-s,o=u.length):(e=u,r=n,o=a.length),n=Math.ceil(c/g),o=n>o?n+1:o+1,s>o&&(s=o,e.length=1),e.reverse();s--;)e.push(0);e.reverse()}for(o=a.length,s=u.length,o-s<0&&(s=o,e=u,u=a,a=e),t=0;s;)t=(a[--s]=a[s]+u[s]+t)/U|0,a[s]%=U;for(t&&(a.unshift(t),++r),o=a.length;a[--o]==0;)a.pop();return i.d=a,i.e=Je(a,r),w?p(i,c,h):i};d.precision=d.sd=function(i){var t,e=this;if(i!==void 0&&i!==!!i&&i!==1&&i!==0)throw Error(te+i);return e.d?(t=gi(e.d),i&&e.e+1>t&&(t=e.e+1)):t=NaN,t};d.round=function(){var i=this,t=i.constructor;return p(new t(i),i.e+1,t.rounding)};d.sine=d.sin=function(){var i,t,e=this,r=e.constructor;return e.isFinite()?e.isZero()?new r(e):(i=r.precision,t=r.rounding,r.precision=i+Math.max(e.e,e.sd())+g,r.rounding=1,e=Ji(r,vi(r,e)),r.precision=i,r.rounding=t,p(z>2?e.neg():e,i,t,!0)):new r(NaN)};d.squareRoot=d.sqrt=function(){var i,t,e,r,s,n,o=this,c=o.d,h=o.e,a=o.s,u=o.constructor;if(a!==1||!c||!c[0])return new u(!a||a<0&&(!c||c[0])?NaN:c?o:1/0);for(w=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=A(c),(t.length+h)%2==0&&(t+="0"),a=Math.sqrt(t),h=P((h+1)/2)-(h<0||h%2),a==1/0?t="5e"+h:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+h),r=new u(t)):r=new u(a.toString()),e=(h=u.precision)+3;;)if(n=r,r=n.plus(k(o,n,e+2,1)).times(.5),A(n.d).slice(0,e)===(t=A(r.d)).slice(0,e))if(t=t.slice(e-3,e+1),t=="9999"||!s&&t=="4999"){if(!s&&(p(n,h+1,0),n.times(n).eq(o))){r=n;break}e+=4,s=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(p(r,h+1,1),i=!r.times(r).eq(o));break}return w=!0,p(r,h,u.rounding,i)};d.tangent=d.tan=function(){var i,t,e=this,r=e.constructor;return e.isFinite()?e.isZero()?new r(e):(i=r.precision,t=r.rounding,r.precision=i+10,r.rounding=1,e=e.sin(),e.s=1,e=k(e,new r(1).minus(e.times(e)).sqrt(),i+10,0),r.precision=i,r.rounding=t,p(z==2||z==4?e.neg():e,i,t,!0)):new r(NaN)};d.times=d.mul=function(i){var t,e,r,s,n,o,c,h,a,u=this,f=u.constructor,l=u.d,m=(i=new f(i)).d;if(i.s*=u.s,!l||!l[0]||!m||!m[0])return new f(!i.s||l&&!l[0]&&!m||m&&!m[0]&&!l?NaN:!l||!m?i.s/0:i.s*0);for(e=P(u.e/g)+P(i.e/g),h=l.length,a=m.length,h<a&&(n=l,l=m,m=n,o=h,h=a,a=o),n=[],o=h+a,r=o;r--;)n.push(0);for(r=a;--r>=0;){for(t=0,s=h+r;s>r;)c=n[s]+m[r]*l[s-r-1]+t,n[s--]=c%U|0,t=c/U|0;n[s]=(n[s]+t)%U|0}for(;!n[--o];)n.pop();return t?++e:n.shift(),i.d=n,i.e=Je(n,e),w?p(i,f.precision,f.rounding):i};d.toBinary=function(i,t){return bt(this,2,i,t)};d.toDecimalPlaces=d.toDP=function(i,t){var e=this,r=e.constructor;return e=new r(e),i===void 0?e:(I(i,0,ie),t===void 0?t=r.rounding:I(t,0,8),p(e,i+e.e+1,t))};d.toExponential=function(i,t){var e,r=this,s=r.constructor;return i===void 0?e=H(r,!0):(I(i,0,ie),t===void 0?t=s.rounding:I(t,0,8),r=p(new s(r),i+1,t),e=H(r,!0,i+1)),r.isNeg()&&!r.isZero()?"-"+e:e};d.toFixed=function(i,t){var e,r,s=this,n=s.constructor;return i===void 0?e=H(s):(I(i,0,ie),t===void 0?t=n.rounding:I(t,0,8),r=p(new n(s),i+s.e+1,t),e=H(r,!1,i+r.e+1)),s.isNeg()&&!s.isZero()?"-"+e:e};d.toFraction=function(i){var t,e,r,s,n,o,c,h,a,u,f,l,m=this,v=m.d,y=m.constructor;if(!v)return new y(m);if(a=e=new y(1),r=h=new y(0),t=new y(r),n=t.e=gi(v)-m.e-1,o=n%g,t.d[0]=T(10,o<0?g+o:o),i==null)i=n>0?t:a;else{if(c=new y(i),!c.isInt()||c.lt(a))throw Error(te+c);i=c.gt(t)?n>0?t:a:c}for(w=!1,c=new y(A(v)),u=y.precision,y.precision=n=v.length*g*2;f=k(c,t,0,1,1),s=e.plus(f.times(r)),s.cmp(i)!=1;)e=r,r=s,s=a,a=h.plus(f.times(s)),h=s,s=t,t=c.minus(f.times(s)),c=s;return s=k(i.minus(e),r,0,1,1),h=h.plus(s.times(a)),e=e.plus(s.times(r)),h.s=a.s=m.s,l=k(a,r,n,1).minus(m).abs().cmp(k(h,e,n,1).minus(m).abs())<1?[a,r]:[h,e],y.precision=u,w=!0,l};d.toHexadecimal=d.toHex=function(i,t){return bt(this,16,i,t)};d.toNearest=function(i,t){var e=this,r=e.constructor;if(e=new r(e),i==null){if(!e.d)return e;i=new r(1),t=r.rounding}else{if(i=new r(i),t===void 0?t=r.rounding:I(t,0,8),!e.d)return i.s?e:i;if(!i.d)return i.s&&(i.s=e.s),i}return i.d[0]?(w=!1,e=k(e,i,0,t,1).times(i),w=!0,p(e)):(i.s=e.s,e=i),e};d.toNumber=function(){return+this};d.toOctal=function(i,t){return bt(this,8,i,t)};d.toPower=d.pow=function(i){var t,e,r,s,n,o,c=this,h=c.constructor,a=+(i=new h(i));if(!c.d||!i.d||!c.d[0]||!i.d[0])return new h(T(+c,a));if(c=new h(c),c.eq(1))return c;if(r=h.precision,n=h.rounding,i.eq(1))return p(c,r,n);if(t=P(i.e/g),t>=i.d.length-1&&(e=a<0?-a:a)<=Ki)return s=wi(h,c,e,r),i.s<0?new h(1).div(s):p(s,r,n);if(o=c.s,o<0){if(t<i.d.length-1)return new h(NaN);if(i.d[t]&1||(o=1),c.e==0&&c.d[0]==1&&c.d.length==1)return c.s=o,c}return e=T(+c,a),t=e==0||!isFinite(e)?P(a*(Math.log("0."+A(c.d))/Math.LN10+c.e+1)):new h(e+"").e,t>h.maxE+1||t<h.minE-1?new h(t>0?o/0:0):(w=!1,h.rounding=c.s=1,e=Math.min(12,(t+"").length),s=vt(i.times(ee(c,r+e)),r),s.d&&(s=p(s,r+5,1),Ee(s.d,r,n)&&(t=r+10,s=p(vt(i.times(ee(c,t+e)),t),t+5,1),+A(s.d).slice(r+1,r+15)+1==1e14&&(s=p(s,r+1,0)))),s.s=o,w=!0,h.rounding=n,p(s,r,n))};d.toPrecision=function(i,t){var e,r=this,s=r.constructor;return i===void 0?e=H(r,r.e<=s.toExpNeg||r.e>=s.toExpPos):(I(i,1,ie),t===void 0?t=s.rounding:I(t,0,8),r=p(new s(r),i,t),e=H(r,i<=r.e||r.e<=s.toExpNeg,i)),r.isNeg()&&!r.isZero()?"-"+e:e};d.toSignificantDigits=d.toSD=function(i,t){var e=this,r=e.constructor;return i===void 0?(i=r.precision,t=r.rounding):(I(i,1,ie),t===void 0?t=r.rounding:I(t,0,8)),p(new r(e),i,t)};d.toString=function(){var i=this,t=i.constructor,e=H(i,i.e<=t.toExpNeg||i.e>=t.toExpPos);return i.isNeg()&&!i.isZero()?"-"+e:e};d.truncated=d.trunc=function(){return p(new this.constructor(this),this.e+1,1)};d.valueOf=d.toJSON=function(){var i=this,t=i.constructor,e=H(i,i.e<=t.toExpNeg||i.e>=t.toExpPos);return i.isNeg()?"-"+e:e};function A(i){var t,e,r,s=i.length-1,n="",o=i[0];if(s>0){for(n+=o,t=1;t<s;t++)r=i[t]+"",e=g-r.length,e&&(n+=G(e)),n+=r;o=i[t],r=o+"",e=g-r.length,e&&(n+=G(e))}else if(o===0)return"0";for(;o%10===0;)o/=10;return n+o}function I(i,t,e){if(i!==~~i||i<t||i>e)throw Error(te+i)}function Ee(i,t,e,r){var s,n,o,c;for(n=i[0];n>=10;n/=10)--t;return--t<0?(t+=g,s=0):(s=Math.ceil((t+1)/g),t%=g),n=T(10,g-t),c=i[s]%n|0,r==null?t<3?(t==0?c=c/100|0:t==1&&(c=c/10|0),o=e<4&&c==99999||e>3&&c==49999||c==5e4||c==0):o=(e<4&&c+1==n||e>3&&c+1==n/2)&&(i[s+1]/n/100|0)==T(10,t-2)-1||(c==n/2||c==0)&&(i[s+1]/n/100|0)==0:t<4?(t==0?c=c/1e3|0:t==1?c=c/100|0:t==2&&(c=c/10|0),o=(r||e<4)&&c==9999||!r&&e>3&&c==4999):o=((r||e<4)&&c+1==n||!r&&e>3&&c+1==n/2)&&(i[s+1]/n/1e3|0)==T(10,t-3)-1,o}function $e(i,t,e){for(var r,s=[0],n,o=0,c=i.length;o<c;){for(n=s.length;n--;)s[n]*=t;for(s[0]+=wt.indexOf(i.charAt(o++)),r=0;r<s.length;r++)s[r]>e-1&&(s[r+1]===void 0&&(s[r+1]=0),s[r+1]+=s[r]/e|0,s[r]%=e)}return s.reverse()}function Yi(i,t){var e,r,s;if(t.isZero())return t;r=t.d.length,r<32?(e=Math.ceil(r/3),s=(1/ze(4,e)).toString()):(e=16,s="2.3283064365386962890625e-10"),i.precision+=e,t=le(i,1,t.times(s),new i(1));for(var n=e;n--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return i.precision-=e,t}var k=function(){function i(r,s,n){var o,c=0,h=r.length;for(r=r.slice();h--;)o=r[h]*s+c,r[h]=o%n|0,c=o/n|0;return c&&r.unshift(c),r}function t(r,s,n,o){var c,h;if(n!=o)h=n>o?1:-1;else for(c=h=0;c<n;c++)if(r[c]!=s[c]){h=r[c]>s[c]?1:-1;break}return h}function e(r,s,n,o){for(var c=0;n--;)r[n]-=c,c=r[n]<s[n]?1:0,r[n]=c*o+r[n]-s[n];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,n,o,c,h){var a,u,f,l,m,v,y,L,N,D,b,R,Ne,W,je,Ce,de,Qe,F,Te,Ae=r.constructor,Ge=r.s==s.s?1:-1,x=r.d,E=s.d;if(!x||!x[0]||!E||!E[0])return new Ae(!r.s||!s.s||(x?E&&x[0]==E[0]:!E)?NaN:x&&x[0]==0||!E?Ge*0:Ge/0);for(h?(m=1,u=r.e-s.e):(h=U,m=g,u=P(r.e/m)-P(s.e/m)),F=E.length,de=x.length,N=new Ae(Ge),D=N.d=[],f=0;E[f]==(x[f]||0);f++);if(E[f]>(x[f]||0)&&u--,n==null?(W=n=Ae.precision,o=Ae.rounding):c?W=n+(r.e-s.e)+1:W=n,W<0)D.push(1),v=!0;else{if(W=W/m+2|0,f=0,F==1){for(l=0,E=E[0],W++;(f<de||l)&&W--;f++)je=l*h+(x[f]||0),D[f]=je/E|0,l=je%E|0;v=l||f<de}else{for(l=h/(E[0]+1)|0,l>1&&(E=i(E,l,h),x=i(x,l,h),F=E.length,de=x.length),Ce=F,b=x.slice(0,F),R=b.length;R<F;)b[R++]=0;Te=E.slice(),Te.unshift(0),Qe=E[0],E[1]>=h/2&&++Qe;do l=0,a=t(E,b,F,R),a<0?(Ne=b[0],F!=R&&(Ne=Ne*h+(b[1]||0)),l=Ne/Qe|0,l>1?(l>=h&&(l=h-1),y=i(E,l,h),L=y.length,R=b.length,a=t(y,b,L,R),a==1&&(l--,e(y,F<L?Te:E,L,h))):(l==0&&(a=l=1),y=E.slice()),L=y.length,L<R&&y.unshift(0),e(b,y,R,h),a==-1&&(R=b.length,a=t(E,b,F,R),a<1&&(l++,e(b,F<R?Te:E,R,h))),R=b.length):a===0&&(l++,b=[0]),D[f++]=l,a&&b[0]?b[R++]=x[Ce]||0:(b=[x[Ce]],R=1);while((Ce++<de||b[0]!==void 0)&&W--);v=b[0]!==void 0}D[0]||D.shift()}if(m==1)N.e=u,fi=v;else{for(f=1,l=D[0];l>=10;l/=10)f++;N.e=f+u*m-1,p(N,c?n+N.e+1:n,o,v)}return N}}();function p(i,t,e,r){var s,n,o,c,h,a,u,f,l,m=i.constructor;e:if(t!=null){if(f=i.d,!f)return i;for(s=1,c=f[0];c>=10;c/=10)s++;if(n=t-s,n<0)n+=g,o=t,u=f[l=0],h=u/T(10,s-o-1)%10|0;else if(l=Math.ceil((n+1)/g),c=f.length,l>=c)if(r){for(;c++<=l;)f.push(0);u=h=0,s=1,n%=g,o=n-g+1}else break e;else{for(u=c=f[l],s=1;c>=10;c/=10)s++;n%=g,o=n-g+s,h=o<0?0:u/T(10,s-o-1)%10|0}if(r=r||t<0||f[l+1]!==void 0||(o<0?u:u%T(10,s-o-1)),a=e<4?(h||r)&&(e==0||e==(i.s<0?3:2)):h>5||h==5&&(e==4||r||e==6&&(n>0?o>0?u/T(10,s-o):0:f[l-1])%10&1||e==(i.s<0?8:7)),t<1||!f[0])return f.length=0,a?(t-=i.e+1,f[0]=T(10,(g-t%g)%g),i.e=-t||0):f[0]=i.e=0,i;if(n==0?(f.length=l,c=1,l--):(f.length=l+1,c=T(10,g-n),f[l]=o>0?(u/T(10,s-o)%T(10,o)|0)*c:0),a)for(;;)if(l==0){for(n=1,o=f[0];o>=10;o/=10)n++;for(o=f[0]+=c,c=1;o>=10;o/=10)c++;n!=c&&(i.e++,f[0]==U&&(f[0]=1));break}else{if(f[l]+=c,f[l]!=U)break;f[l--]=0,c=1}for(n=f.length;f[--n]===0;)f.pop()}return w&&(i.e>m.maxE?(i.d=null,i.e=NaN):i.e<m.minE&&(i.e=0,i.d=[0])),i}function H(i,t,e){if(!i.isFinite())return _i(i);var r,s=i.e,n=A(i.d),o=n.length;return t?(e&&(r=e-o)>0?n=n.charAt(0)+"."+n.slice(1)+G(r):o>1&&(n=n.charAt(0)+"."+n.slice(1)),n=n+(i.e<0?"e":"e+")+i.e):s<0?(n="0."+G(-s-1)+n,e&&(r=e-o)>0&&(n+=G(r))):s>=o?(n+=G(s+1-o),e&&(r=e-s-1)>0&&(n=n+"."+G(r))):((r=s+1)<o&&(n=n.slice(0,r)+"."+n.slice(r)),e&&(r=e-o)>0&&(s+1===o&&(n+="."),n+=G(r))),n}function Je(i,t){var e=i[0];for(t*=g;e>=10;e/=10)t++;return t}function Ye(i,t,e){if(t>Zi)throw w=!0,e&&(i.precision=e),Error(li);return p(new i(Ke),t,1,!0)}function V(i,t,e){if(t>_t)throw Error(li);return p(new i(Ze),t,e,!0)}function gi(i){var t=i.length-1,e=t*g+1;if(t=i[t],t){for(;t%10==0;t/=10)e--;for(t=i[0];t>=10;t/=10)e++}return e}function G(i){for(var t="";i--;)t+="0";return t}function wi(i,t,e,r){var s,n=new i(1),o=Math.ceil(r/g+4);for(w=!1;;){if(e%2&&(n=n.times(t),hi(n.d,o)&&(s=!0)),e=P(e/2),e===0){e=n.d.length-1,s&&n.d[e]===0&&++n.d[e];break}t=t.times(t),hi(t.d,o)}return w=!0,n}function ai(i){return i.d[i.d.length-1]&1}function yi(i,t,e){for(var r,s,n=new i(t[0]),o=0;++o<t.length;){if(s=new i(t[o]),!s.s){n=s;break}r=n.cmp(s),(r===e||r===0&&n.s===e)&&(n=s)}return n}function vt(i,t){var e,r,s,n,o,c,h,a=0,u=0,f=0,l=i.constructor,m=l.rounding,v=l.precision;if(!i.d||!i.d[0]||i.e>17)return new l(i.d?i.d[0]?i.s<0?0:1/0:1:i.s?i.s<0?0:i:NaN);for(t==null?(w=!1,h=v):h=t,c=new l(.03125);i.e>-2;)i=i.times(c),f+=5;for(r=Math.log(T(2,f))/Math.LN10*2+5|0,h+=r,e=n=o=new l(1),l.precision=h;;){if(n=p(n.times(i),h,1),e=e.times(++u),c=o.plus(k(n,e,h,1)),A(c.d).slice(0,h)===A(o.d).slice(0,h)){for(s=f;s--;)o=p(o.times(o),h,1);if(t==null)if(a<3&&Ee(o.d,h-r,m,a))l.precision=h+=10,e=n=c=new l(1),u=0,a++;else return p(o,l.precision=v,m,w=!0);else return l.precision=v,o}o=c}}function ee(i,t){var e,r,s,n,o,c,h,a,u,f,l,m=1,v=10,y=i,L=y.d,N=y.constructor,D=N.rounding,b=N.precision;if(y.s<0||!L||!L[0]||!y.e&&L[0]==1&&L.length==1)return new N(L&&!L[0]?-1/0:y.s!=1?NaN:L?0:y);if(t==null?(w=!1,u=b):u=t,N.precision=u+=v,e=A(L),r=e.charAt(0),Math.abs(n=y.e)<15e14){for(;r<7&&r!=1||r==1&&e.charAt(1)>3;)y=y.times(i),e=A(y.d),r=e.charAt(0),m++;n=y.e,r>1?(y=new N("0."+e),n++):y=new N(r+"."+e.slice(1))}else return a=Ye(N,u+2,b).times(n+""),y=ee(new N(r+"."+e.slice(1)),u-v).plus(a),N.precision=b,t==null?p(y,b,D,w=!0):y;for(f=y,h=o=y=k(y.minus(1),y.plus(1),u,1),l=p(y.times(y),u,1),s=3;;){if(o=p(o.times(l),u,1),a=h.plus(k(o,new N(s),u,1)),A(a.d).slice(0,u)===A(h.d).slice(0,u))if(h=h.times(2),n!==0&&(h=h.plus(Ye(N,u+2,b).times(n+""))),h=k(h,new N(m),u,1),t==null)if(Ee(h.d,u-v,D,c))N.precision=u+=v,a=o=y=k(f.minus(1),f.plus(1),u,1),l=p(y.times(y),u,1),s=c=1;else return p(h,N.precision=b,D,w=!0);else return N.precision=b,h;h=a,s+=2}}function _i(i){return String(i.s*i.s/0)}function We(i,t){var e,r,s;for((e=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(e<0&&(e=r),e+=+t.slice(r+1),t=t.substring(0,r)):e<0&&(e=t.length),r=0;t.charCodeAt(r)===48;r++);for(s=t.length;t.charCodeAt(s-1)===48;--s);if(t=t.slice(r,s),t){if(s-=r,i.e=e=e-r-1,i.d=[],r=(e+1)%g,e<0&&(r+=g),r<s){for(r&&i.d.push(+t.slice(0,r)),s-=g;r<s;)i.d.push(+t.slice(r,r+=g));t=t.slice(r),r=g-t.length}else r-=s;for(;r--;)t+="0";i.d.push(+t),w&&(i.e>i.constructor.maxE?(i.d=null,i.e=NaN):i.e<i.constructor.minE&&(i.e=0,i.d=[0]))}else i.e=0,i.d=[0];return i}function Xi(i,t){var e,r,s,n,o,c,h,a,u;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),mi.test(t))return We(i,t)}else if(t==="Infinity"||t==="NaN")return+t||(i.s=NaN),i.e=NaN,i.d=null,i;if($i.test(t))e=16,t=t.toLowerCase();else if(Hi.test(t))e=2;else if(Wi.test(t))e=8;else throw Error(te+t);for(n=t.search(/p/i),n>0?(h=+t.slice(n+1),t=t.substring(2,n)):t=t.slice(2),n=t.indexOf("."),o=n>=0,r=i.constructor,o&&(t=t.replace(".",""),c=t.length,n=c-n,s=wi(r,new r(e),n,n*2)),a=$e(t,e,U),u=a.length-1,n=u;a[n]===0;--n)a.pop();return n<0?new r(i.s*0):(i.e=Je(a,u),i.d=a,w=!1,o&&(i=k(i,s,c*4)),h&&(i=i.times(Math.abs(h)<54?T(2,h):Se.pow(2,h))),w=!0,i)}function Ji(i,t){var e,r=t.d.length;if(r<3)return t.isZero()?t:le(i,2,t,t);e=1.4*Math.sqrt(r),e=e>16?16:e|0,t=t.times(1/ze(5,e)),t=le(i,2,t,t);for(var s,n=new i(5),o=new i(16),c=new i(20);e--;)s=t.times(t),t=t.times(n.plus(s.times(o.times(s).minus(c))));return t}function le(i,t,e,r,s){var n,o,c,h,a=1,u=i.precision,f=Math.ceil(u/g);for(w=!1,h=e.times(e),c=new i(r);;){if(o=k(c.times(h),new i(t++*t++),u,1),c=s?r.plus(o):r.minus(o),r=k(o.times(h),new i(t++*t++),u,1),o=c.plus(r),o.d[f]!==void 0){for(n=f;o.d[n]===c.d[n]&&n--;);if(n==-1)break}n=c,c=r,r=o,o=n,a++}return w=!0,o.d.length=f+1,o}function ze(i,t){for(var e=i;--t;)e*=i;return e}function vi(i,t){var e,r=t.s<0,s=V(i,i.precision,1),n=s.times(.5);if(t=t.abs(),t.lte(n))return z=r?4:1,t;if(e=t.divToInt(s),e.isZero())z=r?3:2;else{if(t=t.minus(e.times(s)),t.lte(n))return z=ai(e)?r?2:3:r?4:1,t;z=ai(e)?r?1:4:r?3:2}return t.minus(s).abs()}function bt(i,t,e,r){var s,n,o,c,h,a,u,f,l,m=i.constructor,v=e!==void 0;if(v?(I(e,1,ie),r===void 0?r=m.rounding:I(r,0,8)):(e=m.precision,r=m.rounding),!i.isFinite())u=_i(i);else{for(u=H(i),o=u.indexOf("."),v?(s=2,t==16?e=e*4-3:t==8&&(e=e*3-2)):s=t,o>=0&&(u=u.replace(".",""),l=new m(1),l.e=u.length-o,l.d=$e(H(l),10,s),l.e=l.d.length),f=$e(u,10,s),n=h=f.length;f[--h]==0;)f.pop();if(!f[0])u=v?"0p+0":"0";else{if(o<0?n--:(i=new m(i),i.d=f,i.e=n,i=k(i,l,e,r,0,s),f=i.d,n=i.e,a=fi),o=f[e],c=s/2,a=a||f[e+1]!==void 0,a=r<4?(o!==void 0||a)&&(r===0||r===(i.s<0?3:2)):o>c||o===c&&(r===4||a||r===6&&f[e-1]&1||r===(i.s<0?8:7)),f.length=e,a)for(;++f[--e]>s-1;)f[e]=0,e||(++n,f.unshift(1));for(h=f.length;!f[h-1];--h);for(o=0,u="";o<h;o++)u+=wt.charAt(f[o]);if(v){if(h>1)if(t==16||t==8){for(o=t==16?4:3,--h;h%o;h++)u+="0";for(f=$e(u,s,t),h=f.length;!f[h-1];--h);for(o=1,u="1.";o<h;o++)u+=wt.charAt(f[o])}else u=u.charAt(0)+"."+u.slice(1);u=u+(n<0?"p":"p+")+n}else if(n<0){for(;++n;)u="0"+u;u="0."+u}else if(++n>h)for(n-=h;n--;)u+="0";else n<h&&(u=u.slice(0,n)+"."+u.slice(n))}u=(t==16?"0x":t==2?"0b":t==8?"0o":"")+u}return i.s<0?"-"+u:u}function hi(i,t){if(i.length>t)return i.length=t,!0}function zi(i){return new this(i).abs()}function ji(i){return new this(i).acos()}function Qi(i){return new this(i).acosh()}function Gi(i,t){return new this(i).plus(t)}function er(i){return new this(i).asin()}function tr(i){return new this(i).asinh()}function ir(i){return new this(i).atan()}function rr(i){return new this(i).atanh()}function sr(i,t){i=new this(i),t=new this(t);var e,r=this.precision,s=this.rounding,n=r+4;return!i.s||!t.s?e=new this(NaN):!i.d&&!t.d?(e=V(this,n,1).times(t.s>0?.25:.75),e.s=i.s):!t.d||i.isZero()?(e=t.s<0?V(this,r,s):new this(0),e.s=i.s):!i.d||t.isZero()?(e=V(this,n,1).times(.5),e.s=i.s):t.s<0?(this.precision=n,this.rounding=1,e=this.atan(k(i,t,n,1)),t=V(this,n,1),this.precision=r,this.rounding=s,e=i.s<0?e.minus(t):e.plus(t)):e=this.atan(k(i,t,n,1)),e}function nr(i){return new this(i).cbrt()}function or(i){return p(i=new this(i),i.e+1,2)}function cr(i,t,e){return new this(i).clamp(t,e)}function ar(i){if(!i||typeof i!="object")throw Error(Xe+"Object expected");var t,e,r,s=i.defaults===!0,n=["precision",1,ie,"rounding",0,8,"toExpNeg",-fe,0,"toExpPos",0,fe,"maxE",0,fe,"minE",-fe,0,"modulo",0,9];for(t=0;t<n.length;t+=3)if(e=n[t],s&&(this[e]=yt[e]),(r=i[e])!==void 0)if(P(r)===r&&r>=n[t+1]&&r<=n[t+2])this[e]=r;else throw Error(te+e+": "+r);if(e="crypto",s&&(this[e]=yt[e]),(r=i[e])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[e]=!0;else throw Error(di);else this[e]=!1;else throw Error(te+e+": "+r);return this}function hr(i){return new this(i).cos()}function ur(i){return new this(i).cosh()}function bi(i){var t,e,r;function s(n){var o,c,h,a=this;if(!(a instanceof s))return new s(n);if(a.constructor=s,ui(n)){a.s=n.s,w?!n.d||n.e>s.maxE?(a.e=NaN,a.d=null):n.e<s.minE?(a.e=0,a.d=[0]):(a.e=n.e,a.d=n.d.slice()):(a.e=n.e,a.d=n.d?n.d.slice():n.d);return}if(h=typeof n,h==="number"){if(n===0){a.s=1/n<0?-1:1,a.e=0,a.d=[0];return}if(n<0?(n=-n,a.s=-1):a.s=1,n===~~n&&n<1e7){for(o=0,c=n;c>=10;c/=10)o++;w?o>s.maxE?(a.e=NaN,a.d=null):o<s.minE?(a.e=0,a.d=[0]):(a.e=o,a.d=[n]):(a.e=o,a.d=[n]);return}if(n*0!==0){n||(a.s=NaN),a.e=NaN,a.d=null;return}return We(a,n.toString())}if(h==="string")return(c=n.charCodeAt(0))===45?(n=n.slice(1),a.s=-1):(c===43&&(n=n.slice(1)),a.s=1),mi.test(n)?We(a,n):Xi(a,n);if(h==="bigint")return n<0?(n=-n,a.s=-1):a.s=1,We(a,n.toString());throw Error(te+n)}if(s.prototype=d,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=ar,s.clone=bi,s.isDecimal=ui,s.abs=zi,s.acos=ji,s.acosh=Qi,s.add=Gi,s.asin=er,s.asinh=tr,s.atan=ir,s.atanh=rr,s.atan2=sr,s.cbrt=nr,s.ceil=or,s.clamp=cr,s.cos=hr,s.cosh=ur,s.div=fr,s.exp=lr,s.floor=dr,s.hypot=pr,s.ln=mr,s.log=gr,s.log10=yr,s.log2=wr,s.max=_r,s.min=vr,s.mod=br,s.mul=kr,s.pow=Er,s.random=Sr,s.round=Nr,s.sign=Cr,s.sin=Tr,s.sinh=Ar,s.sqrt=Rr,s.sub=xr,s.sum=Or,s.tan=Pr,s.tanh=Lr,s.trunc=Br,i===void 0&&(i={}),i&&i.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<r.length;)i.hasOwnProperty(e=r[t++])||(i[e]=this[e]);return s.config(i),s}function fr(i,t){return new this(i).div(t)}function lr(i){return new this(i).exp()}function dr(i){return p(i=new this(i),i.e+1,3)}function pr(){var i,t,e=new this(0);for(w=!1,i=0;i<arguments.length;)if(t=new this(arguments[i++]),t.d)e.d&&(e=e.plus(t.times(t)));else{if(t.s)return w=!0,new this(1/0);e=t}return w=!0,e.sqrt()}function ui(i){return i instanceof Se||i&&i.toStringTag===pi||!1}function mr(i){return new this(i).ln()}function gr(i,t){return new this(i).log(t)}function wr(i){return new this(i).log(2)}function yr(i){return new this(i).log(10)}function _r(){return yi(this,arguments,-1)}function vr(){return yi(this,arguments,1)}function br(i,t){return new this(i).mod(t)}function kr(i,t){return new this(i).mul(t)}function Er(i,t){return new this(i).pow(t)}function Sr(i){var t,e,r,s,n=0,o=new this(1),c=[];if(i===void 0?i=this.precision:I(i,1,ie),r=Math.ceil(i/g),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));n<r;)s=t[n],s>=429e7?t[n]=crypto.getRandomValues(new Uint32Array(1))[0]:c[n++]=s%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(r*=4);n<r;)s=t[n]+(t[n+1]<<8)+(t[n+2]<<16)+((t[n+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(t,n):(c.push(s%1e7),n+=4);n=r/4}else throw Error(di);else for(;n<r;)c[n++]=Math.random()*1e7|0;for(r=c[--n],i%=g,r&&i&&(s=T(10,g-i),c[n]=(r/s|0)*s);c[n]===0;n--)c.pop();if(n<0)e=0,c=[0];else{for(e=-1;c[0]===0;e-=g)c.shift();for(r=1,s=c[0];s>=10;s/=10)r++;r<g&&(e-=g-r)}return o.e=e,o.d=c,o}function Nr(i){return p(i=new this(i),i.e+1,this.rounding)}function Cr(i){return i=new this(i),i.d?i.d[0]?i.s:0*i.s:i.s||NaN}function Tr(i){return new this(i).sin()}function Ar(i){return new this(i).sinh()}function Rr(i){return new this(i).sqrt()}function xr(i,t){return new this(i).sub(t)}function Or(){var i=0,t=arguments,e=new this(t[i]);for(w=!1;e.s&&++i<t.length;)e=e.plus(t[i]);return w=!0,p(e,this.precision,this.rounding)}function Pr(i){return new this(i).tan()}function Lr(i){return new this(i).tanh()}function Br(i){return p(i=new this(i),i.e+1,1)}d[Symbol.for("nodejs.util.inspect.custom")]=d.toString;d[Symbol.toStringTag]="Decimal";var Se=d.constructor=bi(yt);Ke=new Se(Ke);Ze=new Se(Ze);var $=Se;var oo=(()=>{class i{add(e,r){let s=new $(e),n=new $(r);return s.add(n).toNumber()}subtract(e,r){let s=new $(e),n=new $(r);return s.sub(n).toNumber()}multiply(e,r){let s=new $(e),n=new $(r);return s.mul(n).toNumber()}divide(e,r){let s=new $(e),n=new $(r);return s.div(n).toNumber()}decimal(e){return new $(e).toNumber()}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{Q as a,Rn as b,He as c,io as d,oo as e,Hn as f};
