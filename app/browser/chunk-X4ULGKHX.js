import{a as pe,b as ce}from"./chunk-23C7B2M2.js";import{c as me}from"./chunk-6CXWHLUJ.js";import{a as de}from"./chunk-WT6Y3HOA.js";import{a as ye,b as be}from"./chunk-FA4OBAKY.js";import{a as Ie}from"./chunk-UJ5JDQTE.js";import{a as xe}from"./chunk-UVEVFGTS.js";import{d as ve}from"./chunk-4PLGKOLD.js";import{g as F,i as fe,j as he,l as ge,m as Ce}from"./chunk-LBGQA5HW.js";import{b as se,c as le}from"./chunk-VVKQAEX7.js";import{b as te}from"./chunk-FW7KDDDM.js";import{C as h,D as w,E as A,Eb as D,Fa as m,Ga as v,Ha as P,Ia as N,Ja as k,K as g,Ka as S,L as C,La as O,Na as z,Oa as T,Pa as y,Qc as ue,Rc as _e,Sb as L,Tb as E,Xa as r,Y as a,Ya as s,Yb as q,_b as b,ac as U,bc as Z,fc as Q,ga as x,gb as j,gc as W,hc as G,ia as l,ic as Y,kc as J,la as R,lc as X,mb as $,mc as ee,nb as M,oa as n,pa as o,qa as u,ua as I,uc as ie,va as p,wa as _,wc as ne,xc as ae,yb as K,yc as oe,z as H,zc as re}from"./chunk-DSVZHE42.js";var Me=()=>["dollar","lira"],we=()=>({width:"65vw"}),V=i=>({"ng-invalid ng-dirty":i});function ke(i,B){i&1&&(n(0,"h4",4),u(1,"i",13),m(2),r(3,"translate"),o()),i&2&&(a(2),P(" ",s(3,1,"Cash Management")," "))}function Se(i,B){if(i&1){let e=I();n(0,"form",14),p("ngSubmit",function(){g(e);let t=_();return C(t.submitCash())}),n(1,"div",15)(2,"div",16)(3,"label"),m(4),r(5,"translate"),n(6,"span",17),m(7,"*"),o()(),u(8,"p-dropdown",18),r(9,"translate"),n(10,"p-button",19),p("onClick",function(){g(e);let t=_();return C(t.emptyCash())}),o()(),n(11,"div",16)(12,"label"),m(13),r(14,"translate"),n(15,"span",17),m(16,"*"),o()(),u(17,"p-inputNumber",20),o(),n(18,"div",21)(19,"label"),m(20),r(21,"translate"),o(),u(22,"input",22),o()()()}if(i&2){let e=_();l("formGroup",e.cashForm),a(4),v(s(5,12,"Option")),a(4),l("autoOptionFocus",!1)("options",e.transactionOptions)("placeholder",s(9,14,"transaction type"))("ngClass",y(20,V,e.f.transaction_type.invalid&&(e.f.transaction_type.dirty||e.f.transaction_type.touched||e.submitted))),a(5),v(s(14,16,"Amount")),a(4),l("currency",e.selectedCurrency()==="dollar"?"USD":"LBP")("locale",e.selectedCurrency()==="dollar"?"en-US":"en-LB")("ngClass",y(22,V,e.f.amount.invalid&&(e.f.amount.dirty||e.f.amount.touched||e.submitted))),a(3),v(s(21,18,"Notes")),a(2),l("ngClass",y(24,V,e.f.transaction_notes.invalid&&(e.f.transaction_notes.dirty||e.f.transaction_notes.touched||e.submitted)))}}function Oe(i,B){if(i&1){let e=I();n(0,"p-button",23),r(1,"translate"),p("onClick",function(){g(e);let t=_();return C(t.toggleCashDialog())}),o(),n(2,"p-button",24),r(3,"translate"),p("onClick",function(){g(e);let t=_();return C(t.submitCash())}),o()}i&2&&(l("label",s(1,2,"Cancel")),a(2),l("label",s(3,4,"Save")))}var ot=(()=>{class i{constructor(){this.balanceService=h(de),this.fb=h(J),this.stockService=h(ve),this.router=h(K),this.translate=h(se),this.loading_balance=this.balanceService.loading_balance,this.balance=this.balanceService.balance,this.selectedCurrency=this.balanceService.selectedCurrency,this.cashDialogVisible=this.balanceService.cashDialogVisible,this.submitted=!1,this.transactionOptions=[{name:this.translate.instant("Add"),value:"ADD"},{name:this.translate.instant("Remove"),value:"REMOVE"}],this.cashForm=this.fb.group({product_id_fk:[null],transaction_type:[null,b.required],amount:[null,[b.required,b.min(.01)]],transaction_notes:[null,b.required],exchange_rate:[this.stockService.exchangeRate().rate_value],currency:this.selectedCurrency()})}refreshBalance(){this.balanceService.getBalance()}get f(){return this.cashForm.controls}openCashDialog(){this.balanceService.cashDialogVisible.set(!0)}toggleCashDialog(){this.balanceService.cashDialogVisible.set(!1)}submitCash(){this.submitted=!0,this.cashForm.valid&&(this.cashForm.patchValue({exchange_rate:this.stockService.exchangeRate().rate_value,currency:this.selectedCurrency()}),this.balanceService.submitCash(this.cashForm.value))}resetDialog(){this.submitted=!1,this.cashForm.reset(),this.balanceService.cashDialogVisible.set(!1)}navigateHistory(){this.router.navigate(["/history/cash-history"])}emptyCash(){this.cashForm.patchValue({transaction_type:"REMOVE",amount:this.balance().balance,transaction_notes:"Empty cash manually!"})}static{this.\u0275fac=function(c){return new(c||i)}}static{this.\u0275cmp=w({type:i,selectors:[["cash-balance"]],standalone:!0,features:[z],decls:21,vars:31,consts:[["styleClass","text-center"],["pTemplate","header"],[1,"flex","justify-content-around","align-items-center"],["loaderClass","flex-grow-1 flex-shrink-1",2,"width","30%",3,"isLoading","loadingBar"],[1,"m-0"],["layout","vertical"],["placeholder","Select currency...","styleClass","p-inputtext-sm","appendTo","body",3,"ngModelChange","options","ngModel","autoOptionFocus"],["icon","pi pi-refresh","size","small",3,"onClick","label"],["icon","pi pi-file-edit","size","small","severity","warning",3,"onClick","label"],["icon","pi pi-history","size","small","severity","contrast",3,"onClick","label"],["styleClass","p-fluid","position","top",3,"visibleChange","onHide","visible","header","modal"],["pTemplate","content"],["pTemplate","footer"],[1,"pi","pi-money-bill","pi-fw"],[3,"ngSubmit","formGroup"],[1,"formgrid","grid"],[1,"field","col-12","md:col-3"],[1,"text-red-600"],["scrollHeight","400px","appendTo","body","styleClass","p-inputtext-sm","formControlName","transaction_type","optionLabel","name","optionValue","value",3,"autoOptionFocus","options","placeholder","ngClass"],["label","Empty Cash","size","small","styleClass","mt-2","severity","contrast","icon","pi pi-wallet",3,"onClick"],["styleClass","p-inputtext-sm","formControlName","amount","inputId","currency-us","mode","currency","autoSelect","",3,"currency","locale","ngClass"],[1,"field","col-12","md:col-6"],["type","text","spellcheck","false","pInputText","","formControlName","transaction_notes",1,"w-full","p-inputtext-sm",3,"ngClass"],["icon","pi pi-times","size","small","severity","secondary",3,"onClick","label"],["severity","success","icon","pi pi-check","size","small",3,"onClick","label"]],template:function(c,t){c&1&&(n(0,"p-panel",0),x(1,ke,4,3,"ng-template",1),n(2,"div",2)(3,"text-with-loading",3)(4,"h2",4),m(5),r(6,"translate"),r(7,"currency"),r(8,"lira"),o()(),u(9,"p-divider",5),n(10,"p-dropdown",6),O("ngModelChange",function(d){return S(t.selectedCurrency,d)||(t.selectedCurrency=d),d}),p("ngModelChange",function(){return t.refreshBalance()}),o(),n(11,"p-button",7),r(12,"translate"),p("onClick",function(){return t.refreshBalance()}),o(),n(13,"p-button",8),r(14,"translate"),p("onClick",function(){return t.openCashDialog()}),o(),n(15,"p-button",9),r(16,"translate"),p("onClick",function(){return t.navigateHistory()}),o()()(),n(17,"p-dialog",10),r(18,"translate"),O("visibleChange",function(d){return S(t.cashDialogVisible,d)||(t.cashDialogVisible=d),d}),p("onHide",function(){return t.resetDialog()}),x(19,Se,23,26,"ng-template",11)(20,Oe,4,6,"ng-template",12),o()),c&2&&(a(3),l("isLoading",t.loading_balance())("loadingBar",!0),a(2),N(" ",s(6,15,"Cash"),": ",t.selectedCurrency()==="dollar"?s(7,17,t.balance().balance):s(8,19,t.balance().balance)," "),a(5),l("options",T(29,Me)),k("ngModel",t.selectedCurrency),l("autoOptionFocus",!1),a(),l("label",s(12,21,"refresh")),a(2),l("label",s(14,23,"modify")),a(2),l("label",s(16,25,"history")),a(2),R(T(30,we)),k("visible",t.cashDialogVisible),l("header",s(18,27,"Cash Correction"))("modal",!0))},dependencies:[te,L,me,ae,ne,$,_e,ue,ee,W,q,U,Z,G,Y,he,fe,M,j,re,oe,Ce,ge,ce,pe,be,ye,le,xe,X,Q,Ie],styles:["[_nghost-%COMP%]  .p-divider.p-divider-vertical .p-divider-content{padding:0}"]})}}return i})();var Bt=(()=>{class i{static \u0275fac=function(c){return new(c||i)};static \u0275mod=A({type:i});static \u0275inj=H({imports:[M,D,ie,F,E,D,F,E]})}return i})();export{ot as a,Bt as b};
