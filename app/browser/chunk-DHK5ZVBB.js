import{a as Qe}from"./chunk-NN6H7PU4.js";import{a as W}from"./chunk-IBNWSIW5.js";import{b as Oe}from"./chunk-SVHA7J7U.js";import"./chunk-TQK45RMZ.js";import{a as Fe,b as Le}from"./chunk-I32A4TGG.js";import"./chunk-4ONBVWLA.js";import"./chunk-UIPYUTXU.js";import{a as O}from"./chunk-NAFA7AEI.js";import{b as de}from"./chunk-23C7B2M2.js";import{c as L}from"./chunk-TBN6T33U.js";import"./chunk-YRUXN2TF.js";import"./chunk-ARZ4TFMZ.js";import{a as z,b as We,c as Re}from"./chunk-THWBV6ZZ.js";import{a as qe}from"./chunk-QLTNVVXU.js";import{a as De,b as ke,c as F}from"./chunk-4MBB4EGX.js";import"./chunk-5T7DQN3S.js";import{c as k}from"./chunk-6CXWHLUJ.js";import"./chunk-7CR6E6US.js";import"./chunk-KICUZIBO.js";import{a as Ve,b as Te}from"./chunk-FA4OBAKY.js";import"./chunk-EA4RMISB.js";import"./chunk-OY4T6UDA.js";import"./chunk-7ZNGIE4A.js";import{a as Ne}from"./chunk-FO7TG3S7.js";import{a as Pe,b as He}from"./chunk-42BTCZ3Y.js";import{a as Be,b as Ee}from"./chunk-7QYRFDGN.js";import"./chunk-5JE6H3SD.js";import"./chunk-GUPSDBPB.js";import"./chunk-UJ5JDQTE.js";import"./chunk-ZOJPJJYV.js";import"./chunk-UVEVFGTS.js";import"./chunk-P4HR6EQA.js";import{d as ve,e as Ie,f as N}from"./chunk-QJMHFOYW.js";import{a as _e,b as ge,c as Me}from"./chunk-G5UOHYUM.js";import{F as we,f as he,g as ye,i as fe,j as Ce,l as xe,m as be,u as Se}from"./chunk-LBGQA5HW.js";import"./chunk-4A2WLUYH.js";import{b as ue,c as me}from"./chunk-VVKQAEX7.js";import{a as pe,b as ae}from"./chunk-FW7KDDDM.js";import{Ba as I,C as b,Ca as B,D as A,Da as E,E as D,Ea as T,Eb as j,Fa as g,Ga as x,Ha as f,Ia as X,Ja as w,Jb as te,K as s,Ka as v,L as c,La as V,Oa as K,S as Y,Sb as ie,Vb as ne,X as G,Xa as m,Y as p,Ya as d,a as U,ac as oe,fc as re,ga as M,ia as h,ib as Z,lc as le,mb as $,na as Q,nb as ee,oa as l,pa as r,qa as P,ua as S,va as y,wa as a,wc as se,xc as ce,z as H,za as J}from"./chunk-DSVZHE42.js";import{a as R,b as q}from"./chunk-GAL4ENT6.js";var Ae=["barcodeInput"],Ye=["invoiceTable"],Ge=["editQty"],Je=["editPrice"],Xe=["payment_input"],Ze=["lira_input"],Ke=()=>({standalone:!0});function $e(o,C){if(o&1&&(l(0,"h2",29),g(1),m(2,"currency"),r()),o&2){let e=a();p(),f(" USD: ",d(2,1,e.invoiceTotal.subtotal_dollar)," ")}}function et(o,C){if(o&1){let e=S();l(0,"p-button",30),m(1,"translate"),y("onClick",function(){s(e);let t=a();return c(t.productDialogVisible=!0)}),r()}o&2&&h("label",d(1,1,"New Product"))}function tt(o,C){if(o&1&&(l(0,"h2",31),g(1),m(2,"dollar"),r()),o&2){let e=a();p(),f(" ",d(2,1,e.invoiceTotal.subtotal_dollar)," ")}}function it(o,C){if(o&1){let e=S();l(0,"div",38)(1,"p-button",39),m(2,"translate"),y("onClick",function(){s(e);let t=a(2);return c(t.supplierDialogVisible=!0)}),r()()}o&2&&(p(),J("label",d(2,1,"New Supplier")))}function nt(o,C){if(o&1){let e=S();l(0,"div",32)(1,"div",33)(2,"label",40),g(3),m(4,"translate"),r(),l(5,"p-inputNumber",41,3),V("ngModelChange",function(t){s(e);let i=a(2);return v(i.payment_amount,t)||(i.payment_amount=t),c(t)}),y("onFocus",function(t){s(e);let i=a(2);return c(i.select(t.target))})("ngModelChange",function(t){s(e);let i=a(2);return c(i.onUsdChange(t))}),r()()(),l(7,"div",32)(8,"div",33)(9,"label",42),g(10),m(11,"translate"),r(),l(12,"p-inputNumber",43,4),V("ngModelChange",function(t){s(e);let i=a(2);return v(i.lbp_payment_amount,t)||(i.lbp_payment_amount=t),c(t)}),y("onFocus",function(t){s(e);let i=a(2);return c(i.select(t.target))})("ngModelChange",function(t){s(e);let i=a(2);return c(i.onLbpChange(t))}),r(),l(14,"small"),g(15),m(16,"translate"),r()()(),l(17,"div",44)(18,"label",45),g(19),m(20,"translate"),r(),l(21,"p-inputSwitch",46),V("ngModelChange",function(t){s(e);let i=a(2);return v(i.modify_cash,t)||(i.modify_cash=t),c(t)}),r()()}if(o&2){let e=a(2);p(3),x(d(4,15,"Payment")),p(2),w("ngModel",e.payment_amount),h("ngModelOptions",K(23,Ke))("buttonLayout","horizontal")("step",1)("min",0),p(5),x(d(11,17,"LBP amount")),p(2),w("ngModel",e.lbp_payment_amount),h("ngModelOptions",K(24,Ke))("buttonLayout","horizontal")("step",1e3)("min",0),p(3),x(d(16,19,"LBP payments are reference only, payments are always submitted in USD")),p(4),x(d(20,21,"Modify Cash")),p(2),w("ngModel",e.modify_cash)}}function ot(o,C){if(o&1&&(l(0,"div",37)(1,"table",47)(2,"tr")(3,"th",48),g(4),m(5,"translate"),r(),l(6,"th")(7,"text-with-loading",49)(8,"span"),g(9),m(10,"currency"),r()()()(),l(11,"tr")(12,"th",48),g(13),m(14,"translate"),r(),l(15,"th"),g(16),m(17,"currency"),r()(),l(18,"tr")(19,"td",50),P(20,"p-divider",51),r()(),l(21,"tr")(22,"th",48),g(23),m(24,"translate"),r(),l(25,"th"),g(26),m(27,"currency"),r()(),l(28,"tr")(29,"td",50),P(30,"p-divider",51),r()(),l(31,"tr")(32,"th",48),g(33),m(34,"translate"),r(),l(35,"th")(36,"text-with-loading",52)(37,"span"),g(38),m(39,"currency"),r()()()()()()),o&2){let e=a(2);p(4),f(" ",d(5,12,"Old Balance:")," "),p(3),h("isLoading",e.supplier_balance_loading())("loadingBar",!0),p(2),x(d(10,14,e.supplier_balance().balance)),p(4),f(" ",d(14,16,"Current Invoice:")," "),p(3),f(" ",d(17,18,e.invoiceTotal.subtotal_dollar)," "),p(7),f(" ",d(24,20,"Payment:")," "),p(3),f(" ",d(27,22,e.payment_amount())," "),p(7),f(" ",d(34,24,"New Balance:")," "),p(3),h("isLoading",e.supplier_balance_loading())("loadingBar",!0),p(2),x(d(39,26,e.calculateNewBalance(e.invoiceTotal.subtotal_dollar,e.supplier_balance().balance,e.payment_amount())))}}function rt(o,C){if(o&1){let e=S();l(0,"div",14)(1,"div",32)(2,"div",33)(3,"label",34),g(4),m(5,"translate"),r(),l(6,"p-dropdown",35),m(7,"translate"),m(8,"translate"),y("onShow",function(){s(e);let t=a();return c(t.dropDownVisible=!0)})("onHide",function(){s(e);let t=a();return c(t.dropDownVisible=!1)})("ngModelChange",function(t){s(e);let i=a();return c(i.onSupplierChange(t))}),r()()(),M(9,it,3,3,"div",36)(10,nt,22,25)(11,ot,40,28,"div",37),r()}if(o&2){let e=a();p(4),x(d(5,12,"Supplier")),p(2),h("loading",e.suppliersLoading())("ngModel",e.selected_supplier_id())("options",e.suppliers())("placeholder",d(7,14,"Select Supplier"))("emptyMessage",d(8,16,"No results found"))("filter",!0)("showClear",!0)("autoOptionFocus",!1),p(3),h("ngIf",!e.selected_supplier_id()),p(),Q(e.selected_supplier_id()?10:-1),p(),Q(e.selected_supplier_id()?11:-1)}}function lt(o,C){o&1&&(l(0,"tr")(1,"th",53),g(2,"#"),r(),l(3,"th",54),g(4),m(5,"translate"),r(),l(6,"th",53),g(7),m(8,"translate"),r(),l(9,"th",53),g(10),m(11,"translate"),r(),l(12,"th",55),g(13),m(14,"translate"),r(),l(15,"th",54),g(16),m(17,"translate"),r(),l(18,"th",53),g(19),m(20,"translate"),r(),l(21,"th",56),g(22),m(23,"translate"),r(),l(24,"th",57),g(25),m(26,"translate"),r(),l(27,"th",53),g(28),m(29,"translate"),r()()),o&2&&(p(4),x(d(5,9,"Barcode")),p(3),x(d(8,11,"Print")),p(3),x(d(11,13,"SKU")),p(3),f(" ",d(14,15,"Description")," "),p(3),f(" ",d(17,17,"Purchased Price")," "),p(3),x(d(20,19,"Qty")),p(3),x(d(23,21,"Total")),p(3),f(" ",d(26,23,"Selling Price")," "),p(3),f(" ",d(29,25,"Del")," "))}function pt(o,C){if(o&1){let e=S();l(0,"tr")(1,"td"),g(2),r(),l(3,"td"),g(4),r(),l(5,"td",58),y("click",function(){let t=s(e).$implicit,i=a();return c(i.openLabelPrint(t))}),P(6,"i",59),r(),l(7,"td"),g(8),r(),l(9,"td"),g(10),r(),l(11,"td",60),y("click",function(t){let i=s(e).rowIndex,u=a(),_=T(24);return c(u.openEdit(_,t,i,"price"))}),g(12),m(13,"currency"),r(),l(14,"td",60),y("click",function(t){let i=s(e).rowIndex,u=a(),_=T(24);return c(u.openEdit(_,t,i,"quantity"))}),g(15),r(),l(16,"td"),g(17),m(18,"currency"),r(),l(19,"td",60),y("click",function(t){let i=s(e).rowIndex,u=a(),_=T(24);return c(u.openEdit(_,t,i,"selling"))}),g(20),m(21,"currency"),r(),l(22,"td",61),y("click",function(){let t=s(e).rowIndex,i=a();return c(i.removeRow(t))}),P(23,"i",62),r()()}if(o&2){let e=C.$implicit,n=C.rowIndex;p(2),x(n+1),p(2),x(e.barcode||"---"),p(4),x(e.sku||"---"),p(2),x(e.product_name),p(2),f(" ",d(13,8,e.unit_price)," "),p(3),f(" ",e.quantity," "),p(2),f(" ",d(18,10,e.unit_price*e.quantity)," "),p(3),f(" ",d(21,12,e.selling_price)," ")}}function at(o,C){if(o&1&&(l(0,"h4",64),g(1),m(2,"translate"),r()),o&2){let e=a(2);p(),X(" ",d(2,2,"Total units:")," ",e.invoiceTotal.total_qty," ")}}function st(o,C){if(o&1&&M(0,at,3,4,"h4",63),o&2){let e=a();h("ngIf",e.invoiceTotal.total_qty)}}function ct(o,C){o&1&&(l(0,"tr",65)(1,"td",66),g(2),m(3,"translate"),r()()),o&2&&(p(2),f(" ",d(3,1,"No data yet!")," "))}function ut(o,C){if(o&1){let e=S();l(0,"p-autoComplete",67,5),m(2,"translate"),m(3,"translate"),V("ngModelChange",function(t){s(e);let i=a();return v(i.search_product,t)||(i.search_product=t),c(t)}),y("completeMethod",function(t){s(e);let i=a();return c(i.searchItem(t))})("onKeyUp",function(t){s(e);let i=a();return c(i.submitInvoiceInput(t))}),r(),l(4,"p-button",68),m(5,"translate"),y("onClick",function(){s(e);let t=a();return c(t.dialog_products_visible=!0)}),r()}if(o&2){let e=a();w("ngModel",e.search_product),h("suggestions",e.searchedItems)("delay",150)("placeholder",d(2,6,"scan or search"))("emptyMessage",d(3,8,"No results found")),p(4),h("label",d(5,10,"Multi Select"))}}function mt(o,C){if(o&1){let e=S();l(0,"p-button",69),m(1,"translate"),y("onClick",function(){s(e);let t=a();return c(t.clearInvoice())}),r(),l(2,"p-button",70),m(3,"translate"),y("onClick",function(){s(e);let t=a();return c(t.checkout())}),r()}if(o&2){let e=a();h("label",d(1,5,"Clear"))("disabled",e.invoice().length==0),p(2),h("label",d(3,7,"Checkout"))("loading",e.loading())("disabled",e.invoice().length==0)}}function dt(o,C){if(o&1){let e=S();l(0,"p-inputNumber",71),V("ngModelChange",function(t){s(e);let i=a();return v(i.editingValue,t)||(i.editingValue=t),c(t)}),y("onFocus",function(t){s(e);let i=a();return c(i.select(t.target))})("onBlur",function(){s(e);let t=a(),i=T(24);return c(t.applyEdit(i))})("onKeyDown",function(t){s(e);let i=a(),u=T(24);return c(i.submitEdit(t,u))}),r()}if(o&2){let e=a();w("ngModel",e.editingValue),h("maxFractionDigits",2)("min",0)("autofocus",!0)}}function _t(o,C){if(o&1){let e=S();l(0,"p-inputNumber",71),V("ngModelChange",function(t){s(e);let i=a();return v(i.editingValue,t)||(i.editingValue=t),c(t)}),y("onFocus",function(t){s(e);let i=a();return c(i.select(t.target))})("onBlur",function(){s(e);let t=a(),i=T(24);return c(t.applyEdit(i))})("onKeyDown",function(t){s(e);let i=a(),u=T(24);return c(i.submitEdit(t,u))}),r()}if(o&2){let e=a();w("ngModel",e.editingValue),h("maxFractionDigits",2)("min",0)("autofocus",!0)}}function gt(o,C){if(o&1){let e=S();l(0,"p-inputNumber",72),V("ngModelChange",function(t){s(e);let i=a();return v(i.editingValue,t)||(i.editingValue=t),c(t)}),y("onFocus",function(t){s(e);let i=a();return c(i.select(t.target))})("onBlur",function(){s(e);let t=a(),i=T(24);return c(t.applyEdit(i))})("onKeyDown",function(t){s(e);let i=a(),u=T(24);return c(i.submitEdit(t,u))}),r()}if(o&2){let e=a();w("ngModel",e.editingValue),h("maxFractionDigits",2)("minFractionDigits",0)("autofocus",!0)}}var ze=(()=>{class o{constructor(){this.suppliersService=b(qe),this.stockService=b(ve),this.supplyService=b(Re),this.notificationsService=b(ne),this.confirmationService=b(te),this.localStorageService=b(_e),this.dollarPipe=b(N),this.dateService=b(Me),this.translate=b(ue),this.decimalService=b(Ie),this.currencyService=b(ge),this.dropDownVisible=!1,this.productDialogVisible=!1,this.supplierDialogVisible=!1,this.defaultCurrency=this.currencyService.defaultCurrency,this.exchangeRate=this.stockService.exchangeRate,this.vh=this.localStorageService.getSupplyPageViewHeight(),this.invoiceTotal=new z,this.search_product=null,this.searchedItems=[],this.suppliers=this.suppliersService.suppliers,this.view_currency="dollar",this.dialog_products_visible=!1,this.invoice=this.supplyService.invoice,this.submited=this.supplyService.signal_submited,this.products=this.stockService.products,this.loading=this.supplyService.signal_submit_loading,this.stockTableLoading=this.stockService.tableLoading,this.suppliersLoading=this.suppliersService.suppliersLoading,this.subscriptions=new U,this.priceTypes=Object.keys(We),this.today=this.dateService.getCurrentDate(),this.payment_amount=this.supplyService.payment_amount,this.lbp_payment_amount=this.supplyService.lbp_payment_amount,this.modify_cash=this.supplyService.modify_cash,this.selected_supplier_id=this.supplyService.selected_supplier_id,this.supplier_balance_loading=this.suppliersService.signal_balanceLoading,this.supplier_balance=this.suppliersService.supplierTotalDebts$,this.editModeEnabled=!1,this.editingRowIndex=null,this.editingField="",this.labelPrintDialogVisible=!1}newSupplierCreated(e){this.suppliers.set([...this.suppliers(),e]),e&&this.onSupplierChange(e.account_id)}onSupplierChange(e){this.selected_supplier_id.set(e),this.getSupplierBalance()}onKeyDown(e){if(this.editModeEnabled||this.labelPrintDialogVisible||this.supplierDialogVisible||this.dropDownVisible||this.dialog_products_visible||this.productDialogVisible)return;let n=this.editPrice||this.editQty||this.payment_input,t=this.lira_input;(!n||!n.focused)&&(!t||!t.focused)&&this.focusBarcodeInput()}focusBarcodeInput(){this.barcodeInput.nativeElement.children[0].children[0].focus()}ngOnInit(){this.messages=[{severity:"info",detail:"No Invoice Yet!"}],this.calculateTotal(),this.subscriptions.add(this.supplyService.reset$.subscribe(e=>{e&&(this.init(),this.supplyService.reset$.next(!1))})),this.subscriptions.add(this.supplyService.barcodeResponse.subscribe(e=>{e&&(this.addProduct(e),this.supplyService.barcodeResponse.next(null))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}setPrice(e){this.updatedRowIndex=e}setQty(e){this.updatedRowIndex=e}onEditComplete(e){e.field=="unit_price"?this.invoice.update(n=>n.map((t,i)=>this.updatedRowIndex===i?q(R({},t),{unit_price:t.unit_price}):t)):e.field=="quantity"&&this.invoice.update(n=>n.map((t,i)=>this.updatedRowIndex===i?q(R({},t),{quantity:t.quantity}):t)),this.calculateTotal()}select(e){e.select()}init(){this.supplyService.selected_supplier_id.set(null),this.supplyService.payment_amount.set(0),this.supplyService.modify_cash.set(!0),this.supplyService.invoice.set([]),this.submited.set(!1),this.calculateTotal()}clearInvoice(){this.confirmationService.confirm({key:"home",message:this.translate.instant("Are you sure you want to clear invoice?"),header:this.translate.instant("Warning"),acceptLabel:this.translate.instant("Yes"),rejectLabel:this.translate.instant("No"),icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.init()}})}searchItem(e){let n=this.products(),t=[],i=e.query;for(let u=0;u<n.length;u++){let _=n[u];_.product_name.toLowerCase().indexOf(i.toLowerCase())>-1&&t.push(_)}this.searchedItems=t}addProduct(e){let n=this.supplyService.factor(),t=structuredClone(this.invoice()),i=t.find(u=>u.product_id===e.product_id);if(i)i.quantity+=n;else{let u=e.unit_cost_usd,_=e.unit_price_usd;e.currency==="lira"&&(u=u/this.exchangeRate().rate_value,_=_/this.exchangeRate().rate_value),t.push({product_id:e.product_id,barcode:e.barcode,sku:e.sku,product_name:e.product_name,unit_cost:u,unit_price:u,selling_price:_,quantity:n,currency:e.currency})}this.invoice.set(t),this.supplyService.factor.set(1),this.calculateTotal()}submitInvoiceInput(e){e.key==="Enter"&&this.search_product&&(typeof this.search_product=="string"?this.submitBarcode(this.search_product):this.supplyService.barcodeResponse.next(this.search_product),this.search_product=null)}submitBarcode(e){if(e){let n=-1,t=["*","+"];for(let _=0;_<t.length;_++)if(e.indexOf(t[_])!==-1){n=e.indexOf(t[_]);break}let i=e.substring(0,n)||1,u=parseInt(e.substring(n+1,e.length));n!=-1&&n!=0?(this.supplyService.factor.set(parseInt(i)),this.supplyService.submitBarcode(u)):this.supplyService.submitBarcode(e)}}removeRow(e){this.invoice().splice(e,1),this.calculateTotal(),this.validateItems()}assignSelectedProducts(e){this.dialog_products_visible=!1,e.forEach(n=>{this.addProduct(n)})}calculateTotal(){let e=new z,n=this.invoice();return n.length>0&&(n.forEach(t=>{e.total_qty=this.decimalService.add(e.total_qty,t.quantity),e.cost_dollar=this.decimalService.add(e.cost_dollar,this.decimalService.multiply(t.unit_cost,t.quantity)),e.subtotal_dollar=this.decimalService.add(e.subtotal_dollar,this.decimalService.multiply(t.unit_price,t.quantity))}),e.total_dollar=e.subtotal_dollar),this.invoiceTotal=e,e}parseFloat(e){return parseFloat(e)}validateItems(){return!!this.invoice().find(n=>!n.unit_price||!n.quantity)}checkout(){let e=this.validateItems();e?(this.submited.set(!0),e&&this.notificationsService.showError("Please enter price for all items","home")):this.confirmationService.confirm({key:"home",message:this.translate.instant("Are you sure that you want to submit invoice ?"),header:this.translate.instant("Warning"),acceptLabel:this.translate.instant("Yes"),rejectLabel:this.translate.instant("No"),icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-success",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.supplyService.checkout({partner_id_fk:this.selected_supplier_id(),exchange_rate:this.stockService.exchangeRate().rate_value,total_cost:this.invoiceTotal.subtotal_dollar,currency:"dollar",items:this.invoice()},this.payment_amount(),this.modify_cash())}})}onUsdChange(e){this.lbp_payment_amount.set(this.dollarPipe.calculate(e))}onLbpChange(e){this.payment_amount.set(e/this.stockService.exchangeRate().rate_value)}getSupplierBalance(){this.payment_amount.set(0),this.lbp_payment_amount.set(0),this.selected_supplier_id()?this.suppliersService.getAccountTotalBalance(this.selected_supplier_id()):this.supplier_balance.set({id:0,balance:"0"})}calculateNewBalance(e,n=0,t=0){return n=parseFloat(n),n+e-t}onCreateProduct(e){this.addProduct(e),this.stockService.onCreateProduct(e)}openEdit(e,n,t,i){this.editingRowIndex=t,this.editingField=i;let u=this.invoice()[t];this.editingValue=i==="quantity"?u.quantity:i==="price"?u.unit_price:i==="selling"?u.selling_price:0,e.show(n)}applyEdit(e){if(this.editingRowIndex===null)return;let n=this.invoice()[this.editingRowIndex];this.editingField==="quantity"?n.quantity=this.editingValue:this.editingField==="price"?n.unit_price=this.editingValue:this.editingField==="selling"&&(n.selling_price=this.editingValue),this.editingRowIndex=null,this.editingField="",e.hide(),this.calculateTotal()}submitEdit(e,n){e.key=="Enter"&&this.applyEdit(n)}openLabelPrint(e){this.printData={barcode:e.barcode,shortName:e.product_name,price:e.unit_price},this.labelPrintDialogVisible=!0}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=A({type:o,selectors:[["app-return-purchase-home"]],viewQuery:function(n,t){if(n&1&&(I(Ae,5,Y),I(Ye,5),I(Ge,5),I(Je,5),I(Xe,5),I(Ze,5)),n&2){let i;B(i=E())&&(t.barcodeInput=i.first),B(i=E())&&(t.invoiceTable=i.first),B(i=E())&&(t.editQty=i.first),B(i=E())&&(t.editPrice=i.first),B(i=E())&&(t.payment_input=i.first),B(i=E())&&(t.lira_input=i.first)}},hostBindings:function(n,t){n&1&&y("keydown",function(u){return t.onKeyDown(u)},!1,G)},decls:35,vars:16,consts:[["desktopTable",""],["invoiceTable",""],["op",""],["payment_input",""],["lira_input",""],["barcodeInput",""],[1,"grid","m-1"],[1,"col-12"],["styleClass","mb-3 p-2"],["pTemplate","left"],["pTemplate","center"],["pTemplate","right"],["pTemplate","body"],["styleClass","mt-2"],[1,"grid"],["dataKey","product_id","styleClass","p-datatable-sm ","editMode","cell",3,"onEditComplete","value"],["pTemplate","header"],["pTemplate","summary"],["pTemplate","emptymessage"],["styleClass","mt-2 p-2"],["price","cost",3,"onHide","onSubmit","visible","products","tableLoading"],["mode","add",3,"visibleChange","onCreate","visible"],["appendTo","body",3,"onShow","onHide","dismissable"],[1,"formgrid","grid"],[1,"field","col-12"],["class","p-inputtext-sm","step","0",3,"ngModel","maxFractionDigits","min","autofocus","ngModelChange","onFocus","onBlur","onKeyDown",4,"ngIf"],["class","p-inputtext-sm","min","0.1","step","0.1",3,"ngModel","maxFractionDigits","minFractionDigits","autofocus","ngModelChange","onFocus","onBlur","onKeyDown",4,"ngIf"],[3,"visibleChange","visible","printData"],[3,"visibleChange","onCreate","visible","mode"],[1,"text-green-600","m-2"],["icon","pi pi-plus","size","small","severity","success",3,"onClick","label"],[1,"text-primary","m-2"],[1,"col-2"],[1,"flex","flex-column","gap-2"],["for","supplier"],["id","supplier","styleClass","p-inputtext-sm","id","supplier","appendTo","body","optionLabel","name","optionValue","account_id","filterBy","name",3,"onShow","onHide","ngModelChange","loading","ngModel","options","placeholder","emptyMessage","filter","showClear","autoOptionFocus"],["class","col-2 align-self-end",4,"ngIf"],[1,"col-4","flex","justify-content-end"],[1,"col-2","align-self-end"],["icon","pi pi-plus","severity","success","size","small",3,"onClick","label"],["for","currency"],["id","currency","mode","currency","currency","USD","locale","en-US","styleClass","w-full",1,"p-inputtext-sm",3,"ngModelChange","onFocus","ngModel","ngModelOptions","buttonLayout","step","min"],["for","lira_input"],["id","lira_input","inputId","currency-lb","mode","currency","currency","LBP","locale","en-LB","styleClass","w-full",1,"p-inputtext-sm","w-full",3,"ngModelChange","onFocus","ngModel","ngModelOptions","buttonLayout","step","min"],[1,"col-2","flex","align-items-center","justify-content-center","gap-2"],["for","modifyCash"],["id","modifyCash",3,"ngModelChange","ngModel"],[1,"text-right"],[1,"text-green-500"],["loaderClass","flex-grow-1 flex-shrink-1",2,"width","50%",3,"isLoading","loadingBar"],["colspan","2"],["styleClass","m-0"],["loaderClass","flex-grow-1 flex-shrink-1",2,"width","63%",3,"isLoading","loadingBar"],["width","5%"],["width","10%"],["width","25%"],["width","15%"],["width","15%","pTooltip","This will update unit price","tooltipPosition","top"],[1,"help-color",3,"click"],[1,"pi","pi-barcode"],[1,"editable",3,"click"],[1,"danger-hover",3,"click"],[1,"pi","pi-trash"],["class","text-center m-0",4,"ngIf"],[1,"text-center","m-0"],[1,"surface-300"],["colspan","10"],["field","product_name","name","barcodeInput","spellcheck","false",1,"p-inputtext-sm",3,"ngModelChange","completeMethod","onKeyUp","ngModel","suggestions","delay","placeholder","emptyMessage"],["styleClass","mx-2","severity","warning","size","small","icon","pi pi-list",3,"onClick","label"],["icon","pi pi-times","severity","danger","size","small","styleClass","mx-2",3,"onClick","label","disabled"],["icon","pi pi-cart-plus","severity","success","size","small",3,"onClick","label","loading","disabled"],["step","0",1,"p-inputtext-sm",3,"ngModelChange","onFocus","onBlur","onKeyDown","ngModel","maxFractionDigits","min","autofocus"],["min","0.1","step","0.1",1,"p-inputtext-sm",3,"ngModelChange","onFocus","onBlur","onKeyDown","ngModel","maxFractionDigits","minFractionDigits","autofocus"]],template:function(n,t){if(n&1){let i=S();l(0,"div",6)(1,"div",7)(2,"p-toolbar",8),M(3,$e,3,3,"ng-template",9)(4,et,2,3,"ng-template",10)(5,tt,3,3,"ng-template",11),r(),l(6,"p-card"),M(7,rt,12,18,"ng-template",12),r(),l(8,"p-card",13,0)(10,"div",14)(11,"div",7)(12,"p-table",15,1),y("onEditComplete",function(_){return s(i),c(t.onEditComplete(_))}),M(14,lt,30,27,"ng-template",16)(15,pt,24,14,"ng-template",12)(16,st,1,1,"ng-template",17)(17,ct,4,3,"ng-template",18),r(),l(18,"p-toolbar",19),M(19,ut,6,12,"ng-template",9)(20,mt,4,9,"ng-template",11),r()()()()()(),l(21,"products-dialog",20),y("onHide",function(){return s(i),c(t.dialog_products_visible=!1)})("onSubmit",function(_){return s(i),c(t.assignSelectedProducts(_))}),r(),l(22,"product-form",21),V("visibleChange",function(_){return s(i),v(t.productDialogVisible,_)||(t.productDialogVisible=_),c(_)}),y("onCreate",function(_){return s(i),c(t.onCreateProduct(_))}),r(),l(23,"p-overlayPanel",22,2),y("onShow",function(){return s(i),c(t.editModeEnabled=!0)})("onHide",function(){return s(i),c(t.editModeEnabled=!1)}),l(25,"div",23)(26,"div",24)(27,"label"),g(28),m(29,"translate"),r(),M(30,dt,1,4,"p-inputNumber",25)(31,_t,1,4,"p-inputNumber",25)(32,gt,1,4,"p-inputNumber",26),r()()(),l(33,"label-print",27),V("visibleChange",function(_){return s(i),v(t.labelPrintDialogVisible,_)||(t.labelPrintDialogVisible=_),c(_)}),r(),l(34,"supplier-dialog",28),V("visibleChange",function(_){return s(i),v(t.supplierDialogVisible,_)||(t.supplierDialogVisible=_),c(_)}),y("onCreate",function(_){return s(i),c(t.newSupplierCreated(_))}),r()}n&2&&(p(12),h("value",t.invoice()),p(9),h("visible",t.dialog_products_visible)("products",t.products)("tableLoading",t.stockTableLoading()),p(),w("visible",t.productDialogVisible),p(),h("dismissable",!0),p(5),f("",d(29,14,t.editingField),": "),p(2),h("ngIf",t.editingField==="price"),p(),h("ngIf",t.editingField==="selling"),p(),h("ngIf",t.editingField==="quantity"),p(),w("visible",t.labelPrintDialogVisible),h("printData",t.printData),p(),w("visible",t.supplierDialogVisible),h("mode","add"))},dependencies:[Z,F,pe,ie,Ve,se,De,Pe,xe,Se,k,fe,oe,re,L,Fe,O,he,Be,W,$,N,me],styles:["[_nghost-%COMP%]  .p-fieldset .p-fieldset-content{padding:.5rem}[_nghost-%COMP%]  .p-inputnumber-input{width:100%}td[_ngcontent-%COMP%]:has(span.p-inputnumber.p-component){padding:0}td[_ngcontent-%COMP%]:has(.no-padding){padding:0}.input-align-center[_ngcontent-%COMP%], [_nghost-%COMP%]   .editable[_ngcontent-%COMP%]     span.p-inputnumber.p-component .p-inputnumber-input{text-align:center}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{appearance:textfield;-moz-appearance:textfield}[_nghost-%COMP%]  .small-button{font-size:.5rem!important;padding:.2rem .4rem!important;width:2rem!important}[_nghost-%COMP%]  .small-input>span>input{padding:.3rem!important;width:2rem!important;text-align:center}[_nghost-%COMP%]  .invoice-body>div>div{padding:0!important}[_nghost-%COMP%]  .p-dataview-emptymessage{display:none}[_nghost-%COMP%]  .p-card-content{padding:0!important}.invalid[_ngcontent-%COMP%]{border-color:var(--red-500)!important}.category-cards[_ngcontent-%COMP%]{border-radius:6px;color:#343a40;text-align:center;padding:1rem;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f}.selected[_ngcontent-%COMP%]{background-color:#343a40;color:#fff}.editable-cell[_ngcontent-%COMP%]{cursor:pointer;background-color:#f8f9fa}.editable[_ngcontent-%COMP%]{cursor:pointer;background-color:#e6e6e6}.editable[_ngcontent-%COMP%]:hover{background-color:#bebebe}"]})}}return o})();var ht=[{path:"",component:ze}],Ue=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=D({type:o})}static{this.\u0275inj=H({imports:[j.forChild(ht),j]})}}return o})();var Fi=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=D({type:o})}static{this.\u0275inj=H({imports:[ee,Ue,F,ae,Te,de,ce,Ne,ke,He,be,we,k,Ce,Oe,Qe,le,L,Le,O,ye,Ee,W]})}}return o})();export{Fi as SupplyModule};
