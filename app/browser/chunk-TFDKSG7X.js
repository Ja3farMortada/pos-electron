import{a as Ue}from"./chunk-NN6H7PU4.js";import{a as Q}from"./chunk-IBNWSIW5.js";import{b as ze}from"./chunk-SVHA7J7U.js";import"./chunk-TQK45RMZ.js";import{a as Qe,b as je}from"./chunk-I32A4TGG.js";import"./chunk-4ONBVWLA.js";import"./chunk-UIPYUTXU.js";import{a as W}from"./chunk-NAFA7AEI.js";import{b as Ce}from"./chunk-23C7B2M2.js";import{c as q}from"./chunk-NAO374LW.js";import"./chunk-YRUXN2TF.js";import"./chunk-ARZ4TFMZ.js";import{a as Ae}from"./chunk-QLTNVVXU.js";import{a as Oe,b as qe,c as O}from"./chunk-4MBB4EGX.js";import{a as Ke}from"./chunk-5T7DQN3S.js";import{c as N}from"./chunk-6CXWHLUJ.js";import{a as we}from"./chunk-7CR6E6US.js";import"./chunk-KICUZIBO.js";import{a as Be,b as Ee}from"./chunk-FA4OBAKY.js";import"./chunk-EA4RMISB.js";import"./chunk-OY4T6UDA.js";import"./chunk-7ZNGIE4A.js";import{a as We}from"./chunk-FO7TG3S7.js";import{a as Fe,b as Le}from"./chunk-42BTCZ3Y.js";import{a as ke,b as Ne}from"./chunk-7QYRFDGN.js";import"./chunk-5JE6H3SD.js";import"./chunk-GUPSDBPB.js";import"./chunk-UJ5JDQTE.js";import"./chunk-ZOJPJJYV.js";import"./chunk-UVEVFGTS.js";import"./chunk-P4HR6EQA.js";import{d as F,e as De,f as L}from"./chunk-QJMHFOYW.js";import{a as xe,b as ve,c as He}from"./chunk-G5UOHYUM.js";import{F as Ie,g as Se,i as Pe,j as Ve,l as Te,m as Me,u as Re}from"./chunk-LBGQA5HW.js";import"./chunk-4A2WLUYH.js";import{b as ye,c as be}from"./chunk-VVKQAEX7.js";import{a as _e,b as he}from"./chunk-FW7KDDDM.js";import{Ba as R,C as f,Ca as I,D as $,Da as B,E as D,Ea as S,Eb as Y,Fa as d,Ga as x,Ha as C,Ia as ne,Ja as P,Jb as le,K as c,Ka as V,L as u,La as T,S as ee,Sb as pe,Vb as k,Wb as ce,X as te,Xa as _,Y as s,Ya as h,a as X,ac as ue,d as z,da as w,fc as me,ga as M,ia as g,ib as re,lc as de,mb as oe,na as A,nb as ae,oa as a,pa as o,pb as se,qa as U,ua as v,va as y,wa as p,wc as ge,xc as fe,y as Z,z as H,za as ie}from"./chunk-DSVZHE42.js";import{a as j,b as K}from"./chunk-GAL4ENT6.js";var E=class{constructor(){this.cost_dollar=0,this.subtotal_dollar=0,this.total_dollar=0,this.discount_dollar=0,this.discount2_dollar=0,this.total_dollar_discount_2=0,this.vat_dollar=0,this.total_qty=0}},G=function(r){return r.unit_price_usd="unit_price_usd",r.whole_price_usd="whole_price_usd",r}(G||{});var Ye=(()=>{class r{constructor(){this.http=f(se),this.apiService=f(ce),this.notificationService=f(k),this.stockService=f(F),this.cashBalanceService=f(we),this.historyService=f(Ke),this.invoice=w([]),this.selected_supplier_id=w(null),this.payment_amount=w(0),this.lbp_payment_amount=w(0),this.modify_cash=w(!0),this.signal_submited=w(!1),this.signal_submit_loading=w(!1),this.reset$=new z(!1),this.factor=w(1),this.barcodeResponse=new z(null)}submitBarcode(e){this.http.get(`${this.apiService.host()}/stock/item/${e}`).subscribe({next:i=>{i?this.barcodeResponse.next(i):this.notificationService.showError("Item not found!","home")},error:i=>{this.notificationService.handleError(i.error,"home")}})}checkout(e,i,t){this.signal_submited.set(!0),this.signal_submit_loading.set(!0);let n=null;e.partner_id_fk&&i&&(n={amount:i,partner_id_fk:e.partner_id_fk,payment_date:e.order_datetime}),this.http.post(`${this.apiService.host()}/supply/return`,{invoice:e,payment:n,modify_cash:t}).subscribe({next:l=>{this.notificationService.showSuccess("Invoice submitted","home")},error:l=>{this.notificationService.showError(l.error.message,"home"),this.signal_submit_loading.set(!1)},complete:()=>{this.stockService.getItems(),this.invoice.set([]),this.signal_submited.set(!1),this.signal_submit_loading.set(!1),this.reset$.next(!0),this.cashBalanceService.getBalance(),this.historyService.fetchPurchasesHistory()}})}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Z({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Xe=["barcodeInput"],Ze=["invoiceTable"],$e=["editQty"],et=["editPrice"],tt=["payment_input"],it=["lira_input"];function nt(r,b){if(r&1&&(a(0,"h2",27),d(1),_(2,"currency"),o()),r&2){let e=p();s(),C(" USD: ",h(2,1,e.invoiceTotal.subtotal_dollar)," ")}}function rt(r,b){r&1&&(a(0,"h2",28),d(1,"Return Purchase"),o())}function ot(r,b){if(r&1&&(a(0,"h2",29),d(1),_(2,"dollar"),o()),r&2){let e=p();s(),C(" ",h(2,1,e.invoiceTotal.subtotal_dollar)," ")}}function at(r,b){if(r&1){let e=v();a(0,"div",34)(1,"label",36),d(2),_(3,"translate"),o(),a(4,"p-inputSwitch",37),T("ngModelChange",function(t){c(e);let n=p(2);return V(n.modify_cash,t)||(n.modify_cash=t),u(t)}),o()()}if(r&2){let e=p(2);s(2),x(h(3,2,"Modify Cash")),s(2),P("ngModel",e.modify_cash)}}function st(r,b){if(r&1&&(a(0,"div",35)(1,"table",38)(2,"tr")(3,"th",39),d(4),_(5,"translate"),o(),a(6,"th")(7,"text-with-loading",40)(8,"span"),d(9),_(10,"currency"),o()()()(),a(11,"tr")(12,"th",39),d(13),_(14,"translate"),o(),a(15,"th"),d(16),_(17,"currency"),o()(),a(18,"tr")(19,"td",41),U(20,"p-divider",42),o()(),a(21,"tr")(22,"th",39),d(23),_(24,"translate"),o(),a(25,"th")(26,"text-with-loading",43)(27,"span"),d(28),_(29,"currency"),o()()()()()()),r&2){let e=p(2);s(4),C(" ",h(5,10,"Old Balance:")," "),s(3),g("isLoading",e.supplier_balance_loading())("loadingBar",!0),s(2),x(h(10,12,e.supplier_balance().balance)),s(4),C(" ",h(14,14,"Current Invoice:")," "),s(3),C(" ",h(17,16,e.invoiceTotal.subtotal_dollar)," "),s(7),C(" ",h(24,18,"New Balance:")," "),s(3),g("isLoading",e.supplier_balance_loading())("loadingBar",!0),s(2),x(h(29,20,e.calculateNewBalance(e.invoiceTotal.subtotal_dollar,e.supplier_balance().balance,e.payment_amount())))}}function lt(r,b){if(r&1){let e=v();a(0,"div",12)(1,"div",30)(2,"div",31)(3,"label",32),d(4),_(5,"translate"),o(),a(6,"p-dropdown",33),_(7,"translate"),_(8,"translate"),y("onShow",function(){c(e);let t=p();return u(t.dropDownVisible=!0)})("onHide",function(){c(e);let t=p();return u(t.dropDownVisible=!1)})("ngModelChange",function(t){c(e);let n=p();return u(n.onSupplierChange(t))}),o()()(),M(9,at,5,4,"div",34)(10,st,30,22,"div",35),o()}if(r&2){let e=p();s(4),x(h(5,11,"Supplier")),s(2),g("loading",e.suppliersLoading())("ngModel",e.selected_supplier_id())("options",e.suppliers())("placeholder",h(7,13,"Select Supplier"))("emptyMessage",h(8,15,"No results found"))("filter",!0)("showClear",!0)("autoOptionFocus",!1),s(3),A(e.selected_supplier_id()?9:-1),s(),A(e.selected_supplier_id()?10:-1)}}function pt(r,b){r&1&&(a(0,"tr")(1,"th",44),d(2,"#"),o(),a(3,"th",45),d(4),_(5,"translate"),o(),a(6,"th",44),d(7),_(8,"translate"),o(),a(9,"th",46),d(10),_(11,"translate"),o(),a(12,"th",45),d(13),_(14,"translate"),o(),a(15,"th",44),d(16),_(17,"translate"),o(),a(18,"th",47),d(19),_(20,"translate"),o(),a(21,"th",44),d(22),_(23,"translate"),o()()),r&2&&(s(4),x(h(5,7,"Barcode")),s(3),x(h(8,9,"SKU")),s(3),C(" ",h(11,11,"Description")," "),s(3),C(" ",h(14,13,"Purchased Price")," "),s(3),x(h(17,15,"Qty")),s(3),x(h(20,17,"Total")),s(3),C(" ",h(23,19,"Del")," "))}function ct(r,b){if(r&1){let e=v();a(0,"tr")(1,"td"),d(2),o(),a(3,"td"),d(4),o(),a(5,"td"),d(6),o(),a(7,"td"),d(8),o(),a(9,"td",48),y("click",function(t){let n=c(e).rowIndex,l=p(),m=S(24);return u(l.openEdit(m,t,n,"price"))}),d(10),_(11,"currency"),o(),a(12,"td",48),y("click",function(t){let n=c(e).rowIndex,l=p(),m=S(24);return u(l.openEdit(m,t,n,"quantity"))}),d(13),o(),a(14,"td"),d(15),_(16,"currency"),o(),a(17,"td",49),y("click",function(){let t=c(e).rowIndex,n=p();return u(n.removeRow(t))}),U(18,"i",50),o()()}if(r&2){let e=b.$implicit,i=b.rowIndex;s(2),x(i+1),s(2),x(e.barcode||"---"),s(2),x(e.sku||"---"),s(2),x(e.product_name),s(2),C(" ",h(11,7,e.unit_price)," "),s(3),C(" ",e.quantity," "),s(2),C(" ",h(16,9,e.unit_price*e.quantity)," ")}}function ut(r,b){if(r&1&&(a(0,"h4",52),d(1),_(2,"translate"),o()),r&2){let e=p(2);s(),ne(" ",h(2,2,"Total units:")," ",e.invoiceTotal.total_qty," ")}}function mt(r,b){if(r&1&&M(0,ut,3,4,"h4",51),r&2){let e=p();g("ngIf",e.invoiceTotal.total_qty)}}function dt(r,b){r&1&&(a(0,"tr",53)(1,"td",54),d(2),_(3,"translate"),o()()),r&2&&(s(2),C(" ",h(3,1,"No data yet!")," "))}function _t(r,b){if(r&1){let e=v();a(0,"p-autoComplete",55,3),_(2,"translate"),_(3,"translate"),T("ngModelChange",function(t){c(e);let n=p();return V(n.search_product,t)||(n.search_product=t),u(t)}),y("completeMethod",function(t){c(e);let n=p();return u(n.searchItem(t))})("onKeyUp",function(t){c(e);let n=p();return u(n.submitInvoiceInput(t))}),o(),a(4,"p-button",56),_(5,"translate"),y("onClick",function(){c(e);let t=p();return u(t.dialog_products_visible=!0)}),o()}if(r&2){let e=p();P("ngModel",e.search_product),g("suggestions",e.searchedItems)("delay",150)("placeholder",h(2,6,"scan or search"))("emptyMessage",h(3,8,"No results found")),s(4),g("label",h(5,10,"Multi Select"))}}function ht(r,b){if(r&1){let e=v();a(0,"p-button",57),_(1,"translate"),y("onClick",function(){c(e);let t=p();return u(t.clearInvoice())}),o(),a(2,"p-button",58),_(3,"translate"),y("onClick",function(){c(e);let t=p();return u(t.checkout())}),o()}if(r&2){let e=p();g("label",h(1,5,"Clear"))("disabled",e.invoice().length==0),s(2),g("label",h(3,7,"Checkout"))("loading",e.loading())("disabled",e.invoice().length==0)}}function gt(r,b){if(r&1){let e=v();a(0,"p-inputNumber",59),T("ngModelChange",function(t){c(e);let n=p();return V(n.editingValue,t)||(n.editingValue=t),u(t)}),y("onFocus",function(t){c(e);let n=p();return u(n.select(t.target))})("onBlur",function(){c(e);let t=p(),n=S(24);return u(t.applyEdit(n))})("onKeyDown",function(t){c(e);let n=p(),l=S(24);return u(n.submitEdit(t,l))}),o()}if(r&2){let e=p();P("ngModel",e.editingValue),g("maxFractionDigits",2)("min",0)("autofocus",!0)}}function ft(r,b){if(r&1){let e=v();a(0,"p-inputNumber",59),T("ngModelChange",function(t){c(e);let n=p();return V(n.editingValue,t)||(n.editingValue=t),u(t)}),y("onFocus",function(t){c(e);let n=p();return u(n.select(t.target))})("onBlur",function(){c(e);let t=p(),n=S(24);return u(t.applyEdit(n))})("onKeyDown",function(t){c(e);let n=p(),l=S(24);return u(n.submitEdit(t,l))}),o()}if(r&2){let e=p();P("ngModel",e.editingValue),g("maxFractionDigits",2)("min",0)("autofocus",!0)}}function yt(r,b){if(r&1){let e=v();a(0,"p-inputNumber",60),T("ngModelChange",function(t){c(e);let n=p();return V(n.editingValue,t)||(n.editingValue=t),u(t)}),y("onFocus",function(t){c(e);let n=p();return u(n.select(t.target))})("onBlur",function(){c(e);let t=p(),n=S(24);return u(t.applyEdit(n))})("onKeyDown",function(t){c(e);let n=p(),l=S(24);return u(n.submitEdit(t,l))}),o()}if(r&2){let e=p();P("ngModel",e.editingValue),g("maxFractionDigits",2)("minFractionDigits",0)("autofocus",!0)}}var Ge=(()=>{class r{constructor(){this.suppliersService=f(Ae),this.stockService=f(F),this.supplyService=f(Ye),this.notificationsService=f(k),this.confirmationService=f(le),this.localStorageService=f(xe),this.dollarPipe=f(L),this.dateService=f(He),this.translate=f(ye),this.decimalService=f(De),this.currencyService=f(ve),this.dropDownVisible=!1,this.productDialogVisible=!1,this.supplierDialogVisible=!1,this.defaultCurrency=this.currencyService.defaultCurrency,this.exchangeRate=this.stockService.exchangeRate,this.vh=this.localStorageService.getSupplyPageViewHeight(),this.invoiceTotal=new E,this.search_product=null,this.searchedItems=[],this.suppliers=this.suppliersService.suppliers,this.view_currency="dollar",this.dialog_products_visible=!1,this.invoice=this.supplyService.invoice,this.submited=this.supplyService.signal_submited,this.products=this.stockService.products,this.loading=this.supplyService.signal_submit_loading,this.stockTableLoading=this.stockService.tableLoading,this.suppliersLoading=this.suppliersService.suppliersLoading,this.subscriptions=new X,this.priceTypes=Object.keys(G),this.today=this.dateService.getCurrentDate(),this.payment_amount=this.supplyService.payment_amount,this.lbp_payment_amount=this.supplyService.lbp_payment_amount,this.modify_cash=this.supplyService.modify_cash,this.selected_supplier_id=this.supplyService.selected_supplier_id,this.supplier_balance_loading=this.suppliersService.signal_balanceLoading,this.supplier_balance=this.suppliersService.supplierTotalDebts$,this.editModeEnabled=!1,this.editingRowIndex=null,this.editingField="",this.labelPrintDialogVisible=!1}newSupplierCreated(e){this.suppliers.set([...this.suppliers(),e]),e&&this.onSupplierChange(e.account_id)}onSupplierChange(e){this.selected_supplier_id.set(e),this.getSupplierBalance()}onKeyDown(e){if(this.editModeEnabled||this.labelPrintDialogVisible||this.supplierDialogVisible||this.dropDownVisible||this.dialog_products_visible||this.productDialogVisible)return;let i=this.editPrice||this.editQty||this.payment_input,t=this.lira_input;(!i||!i.focused)&&(!t||!t.focused)&&this.focusBarcodeInput()}focusBarcodeInput(){this.barcodeInput.nativeElement.children[0].children[0].focus()}ngOnInit(){this.messages=[{severity:"info",detail:"No Invoice Yet!"}],this.calculateTotal(),this.subscriptions.add(this.supplyService.reset$.subscribe(e=>{e&&(this.init(),this.supplyService.reset$.next(!1))})),this.subscriptions.add(this.supplyService.barcodeResponse.subscribe(e=>{e&&(this.addProduct(e),this.supplyService.barcodeResponse.next(null))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}setPrice(e){this.updatedRowIndex=e}setQty(e){this.updatedRowIndex=e}onEditComplete(e){e.field=="unit_price"?this.invoice.update(i=>i.map((t,n)=>this.updatedRowIndex===n?K(j({},t),{unit_price:t.unit_price}):t)):e.field=="quantity"&&this.invoice.update(i=>i.map((t,n)=>this.updatedRowIndex===n?K(j({},t),{quantity:t.quantity}):t)),this.calculateTotal()}select(e){e.select()}init(){this.supplyService.selected_supplier_id.set(null),this.supplyService.payment_amount.set(0),this.supplyService.modify_cash.set(!0),this.supplyService.invoice.set([]),this.submited.set(!1),this.calculateTotal()}clearInvoice(){this.confirmationService.confirm({key:"home",message:this.translate.instant("Are you sure you want to clear invoice?"),header:this.translate.instant("Warning"),acceptLabel:this.translate.instant("Yes"),rejectLabel:this.translate.instant("No"),icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.init()}})}searchItem(e){let i=this.products(),t=[],n=e.query;for(let l=0;l<i.length;l++){let m=i[l];m.product_name.toLowerCase().indexOf(n.toLowerCase())>-1&&t.push(m)}this.searchedItems=t}addProduct(e){let i=this.supplyService.factor(),t=structuredClone(this.invoice()),n=t.find(l=>l.product_id===e.product_id);if(n)n.quantity+=i;else{let l=e.unit_cost_usd,m=e.unit_price_usd;e.currency==="lira"&&(l=l/this.exchangeRate().rate_value,m=m/this.exchangeRate().rate_value),t.push({product_id:e.product_id,barcode:e.barcode,sku:e.sku,product_name:e.product_name,unit_cost:l,unit_price:l,selling_price:m,quantity:i,currency:e.currency})}this.invoice.set(t),this.supplyService.factor.set(1),this.calculateTotal(),setTimeout(()=>{this.invoiceTable&&this.invoiceTable.scrollTo({top:this.invoiceTable.wrapperViewChild.nativeElement.scrollHeight})},10)}submitInvoiceInput(e){e.key==="Enter"&&this.search_product&&(typeof this.search_product=="string"?this.submitBarcode(this.search_product):this.supplyService.barcodeResponse.next(this.search_product),this.search_product=null)}submitBarcode(e){if(e){let i=-1,t=["*","+"];for(let m=0;m<t.length;m++)if(e.indexOf(t[m])!==-1){i=e.indexOf(t[m]);break}let n=e.substring(0,i)||1,l=parseInt(e.substring(i+1,e.length));i!=-1&&i!=0?(this.supplyService.factor.set(parseInt(n)),this.supplyService.submitBarcode(l)):this.supplyService.submitBarcode(e)}}removeRow(e){this.invoice().splice(e,1),this.calculateTotal(),this.validateItems()}assignSelectedProducts(e){this.dialog_products_visible=!1,e.forEach(i=>{this.addProduct(i)})}calculateTotal(){let e=new E,i=this.invoice();return i.length>0&&(i.forEach(t=>{e.total_qty=this.decimalService.add(e.total_qty,t.quantity),e.cost_dollar=this.decimalService.add(e.cost_dollar,this.decimalService.multiply(t.unit_cost,t.quantity)),e.subtotal_dollar=this.decimalService.add(e.subtotal_dollar,this.decimalService.multiply(t.unit_price,t.quantity))}),e.total_dollar=e.subtotal_dollar-e.discount_dollar),this.invoiceTotal=e,e}parseFloat(e){return parseFloat(e)}validateItems(){return!!this.invoice().find(i=>!i.unit_price||!i.quantity)}checkout(){let e=this.validateItems();e?(this.submited.set(!0),e&&this.notificationsService.showError("Please enter price for all items","home")):this.confirmationService.confirm({key:"home",message:this.translate.instant("Are you sure that you want to submit invoice ?"),header:this.translate.instant("Warning"),acceptLabel:this.translate.instant("Yes"),rejectLabel:this.translate.instant("No"),icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-success",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.supplyService.checkout({partner_id_fk:this.selected_supplier_id(),exchange_rate:this.stockService.exchangeRate().rate_value,total_cost:this.invoiceTotal.subtotal_dollar,currency:"dollar",items:this.invoice()},this.payment_amount(),this.modify_cash())}})}onUsdChange(e){this.lbp_payment_amount.set(this.dollarPipe.calculate(e))}onLbpChange(e){this.payment_amount.set(e/this.stockService.exchangeRate().rate_value)}getSupplierBalance(){this.payment_amount.set(0),this.lbp_payment_amount.set(0),this.selected_supplier_id()?this.suppliersService.getAccountTotalBalance(this.selected_supplier_id()):this.supplier_balance.set({id:0,balance:"0"})}calculateNewBalance(e,i=0,t=0){return i=parseFloat(i),i-e-t}onCreateProduct(e){this.addProduct(e),this.stockService.onCreateProduct(e)}openEdit(e,i,t,n){this.editingRowIndex=t,this.editingField=n;let l=this.invoice()[t];this.editingValue=n==="quantity"?l.quantity:n==="price"?l.unit_price:n==="selling"?l.selling_price:0,e.show(i)}applyEdit(e){if(this.editingRowIndex===null)return;let i=this.invoice()[this.editingRowIndex];this.editingField==="quantity"?i.quantity=this.editingValue:this.editingField==="price"?i.unit_price=this.editingValue:this.editingField==="selling"&&(i.selling_price=this.editingValue),this.editingRowIndex=null,this.editingField="",e.hide(),this.calculateTotal()}submitEdit(e,i){e.key=="Enter"&&this.applyEdit(i)}openLabelPrint(e){this.printData={barcode:e.barcode,shortName:e.product_name,price:e.unit_price},this.labelPrintDialogVisible=!0}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=$({type:r,selectors:[["app-return-purchase-home"]],viewQuery:function(i,t){if(i&1&&(R(Xe,5,ee),R(Ze,5),R($e,5),R(et,5),R(tt,5),R(it,5)),i&2){let n;I(n=B())&&(t.barcodeInput=n.first),I(n=B())&&(t.invoiceTable=n.first),I(n=B())&&(t.editQty=n.first),I(n=B())&&(t.editPrice=n.first),I(n=B())&&(t.payment_input=n.first),I(n=B())&&(t.lira_input=n.first)}},hostBindings:function(i,t){i&1&&y("keydown",function(l){return t.onKeyDown(l)},!1,te)},decls:35,vars:18,consts:[["desktopTable",""],["invoiceTable",""],["op",""],["barcodeInput",""],[1,"grid","m-1"],[1,"col-12"],["styleClass","mb-3 p-2"],["pTemplate","left"],["pTemplate","center"],["pTemplate","right"],["pTemplate","body"],["styleClass","mt-2"],[1,"grid"],["dataKey","product_id","styleClass","p-datatable-sm ","editMode","cell",3,"onEditComplete","value","scrollable","scrollHeight"],["pTemplate","header"],["pTemplate","summary"],["pTemplate","emptymessage"],["styleClass","mt-2 p-2"],["price","cost",3,"onHide","onSubmit","visible","products","tableLoading"],["mode","add",3,"visibleChange","onCreate","visible"],["appendTo","body",3,"onShow","onHide","dismissable"],[1,"formgrid","grid"],[1,"field","col-12"],["class","p-inputtext-sm","step","0",3,"ngModel","maxFractionDigits","min","autofocus","ngModelChange","onFocus","onBlur","onKeyDown",4,"ngIf"],["class","p-inputtext-sm","min","0.1","step","0.1",3,"ngModel","maxFractionDigits","minFractionDigits","autofocus","ngModelChange","onFocus","onBlur","onKeyDown",4,"ngIf"],[3,"visibleChange","visible","printData"],[3,"visibleChange","onCreate","visible","mode"],[1,"text-green-600","m-2"],[1,"m-0"],[1,"text-primary","m-2"],[1,"col-2"],[1,"flex","flex-column","gap-2"],["for","supplier"],["id","supplier","styleClass","p-inputtext-sm","id","supplier","appendTo","body","optionLabel","name","optionValue","account_id","filterBy","name",3,"onShow","onHide","ngModelChange","loading","ngModel","options","placeholder","emptyMessage","filter","showClear","autoOptionFocus"],[1,"col-6","flex","align-items-center","justify-content-center","gap-2"],[1,"col-4","flex","justify-content-end"],["for","modifyCash"],["id","modifyCash",3,"ngModelChange","ngModel"],[1,"text-right"],[1,"text-green-500"],["loaderClass","flex-grow-1 flex-shrink-1",2,"width","50%",3,"isLoading","loadingBar"],["colspan","2"],["styleClass","m-0"],["loaderClass","flex-grow-1 flex-shrink-1",2,"width","63%",3,"isLoading","loadingBar"],["width","5%"],["width","10%"],["width","25%"],["width","15%"],[1,"editable",3,"click"],[1,"danger-hover",3,"click"],[1,"pi","pi-trash"],["class","text-center m-0",4,"ngIf"],[1,"text-center","m-0"],[1,"surface-300"],["colspan","10"],["field","product_name","name","barcodeInput","spellcheck","false",1,"p-inputtext-sm",3,"ngModelChange","completeMethod","onKeyUp","ngModel","suggestions","delay","placeholder","emptyMessage"],["styleClass","mx-2","severity","warning","size","small","icon","pi pi-list",3,"onClick","label"],["icon","pi pi-times","severity","danger","size","small","styleClass","mx-2",3,"onClick","label","disabled"],["icon","pi pi-cart-plus","severity","success","size","small",3,"onClick","label","loading","disabled"],["step","0",1,"p-inputtext-sm",3,"ngModelChange","onFocus","onBlur","onKeyDown","ngModel","maxFractionDigits","min","autofocus"],["min","0.1","step","0.1",1,"p-inputtext-sm",3,"ngModelChange","onFocus","onBlur","onKeyDown","ngModel","maxFractionDigits","minFractionDigits","autofocus"]],template:function(i,t){if(i&1){let n=v();a(0,"div",4)(1,"div",5)(2,"p-toolbar",6),M(3,nt,3,3,"ng-template",7)(4,rt,2,0,"ng-template",8)(5,ot,3,3,"ng-template",9),o(),a(6,"p-card"),M(7,lt,11,17,"ng-template",10),o(),a(8,"p-card",11,0)(10,"div",12)(11,"div",5)(12,"p-table",13,1),y("onEditComplete",function(m){return c(n),u(t.onEditComplete(m))}),M(14,pt,24,21,"ng-template",14)(15,ct,19,11,"ng-template",10)(16,mt,1,1,"ng-template",15)(17,dt,4,3,"ng-template",16),o(),a(18,"p-toolbar",17),M(19,_t,6,12,"ng-template",7)(20,ht,4,9,"ng-template",9),o()()()()()(),a(21,"products-dialog",18),y("onHide",function(){return c(n),u(t.dialog_products_visible=!1)})("onSubmit",function(m){return c(n),u(t.assignSelectedProducts(m))}),o(),a(22,"product-form",19),T("visibleChange",function(m){return c(n),V(t.productDialogVisible,m)||(t.productDialogVisible=m),u(m)}),y("onCreate",function(m){return c(n),u(t.onCreateProduct(m))}),o(),a(23,"p-overlayPanel",20,2),y("onShow",function(){return c(n),u(t.editModeEnabled=!0)})("onHide",function(){return c(n),u(t.editModeEnabled=!1)}),a(25,"div",21)(26,"div",22)(27,"label"),d(28),_(29,"translate"),o(),M(30,gt,1,4,"p-inputNumber",23)(31,ft,1,4,"p-inputNumber",23)(32,yt,1,4,"p-inputNumber",24),o()()(),a(33,"label-print",25),T("visibleChange",function(m){return c(n),V(t.labelPrintDialogVisible,m)||(t.labelPrintDialogVisible=m),u(m)}),o(),a(34,"supplier-dialog",26),T("visibleChange",function(m){return c(n),V(t.supplierDialogVisible,m)||(t.supplierDialogVisible=m),u(m)}),y("onCreate",function(m){return c(n),u(t.newSupplierCreated(m))}),o()}i&2&&(s(12),ie("scrollHeight",t.vh),g("value",t.invoice())("scrollable",!0),s(9),g("visible",t.dialog_products_visible)("products",t.products)("tableLoading",t.stockTableLoading()),s(),P("visible",t.productDialogVisible),s(),g("dismissable",!0),s(5),C("",h(29,16,t.editingField),": "),s(2),g("ngIf",t.editingField==="price"),s(),g("ngIf",t.editingField==="selling"),s(),g("ngIf",t.editingField==="quantity"),s(),P("visible",t.labelPrintDialogVisible),g("printData",t.printData),s(),P("visible",t.supplierDialogVisible),g("mode","add"))},dependencies:[re,O,_e,pe,Be,ge,Oe,Fe,Te,Re,N,Pe,ue,me,q,Qe,W,ke,Q,oe,L,be],styles:["[_nghost-%COMP%]  .p-fieldset .p-fieldset-content{padding:.5rem}[_nghost-%COMP%]  .p-inputnumber-input{width:100%}td[_ngcontent-%COMP%]:has(span.p-inputnumber.p-component){padding:0}td[_ngcontent-%COMP%]:has(.no-padding){padding:0}.input-align-center[_ngcontent-%COMP%], [_nghost-%COMP%]   .editable[_ngcontent-%COMP%]     span.p-inputnumber.p-component .p-inputnumber-input{text-align:center}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{appearance:textfield;-moz-appearance:textfield}[_nghost-%COMP%]  .small-button{font-size:.5rem!important;padding:.2rem .4rem!important;width:2rem!important}[_nghost-%COMP%]  .small-input>span>input{padding:.3rem!important;width:2rem!important;text-align:center}[_nghost-%COMP%]  .invoice-body>div>div{padding:0!important}[_nghost-%COMP%]  .p-dataview-emptymessage{display:none}[_nghost-%COMP%]  .p-card-content{padding:0!important}.invalid[_ngcontent-%COMP%]{border-color:var(--red-500)!important}.category-cards[_ngcontent-%COMP%]{border-radius:6px;color:#343a40;text-align:center;padding:1rem;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f}.selected[_ngcontent-%COMP%]{background-color:#343a40;color:#fff}.editable-cell[_ngcontent-%COMP%]{cursor:pointer;background-color:#f8f9fa}.editable[_ngcontent-%COMP%]{cursor:pointer;background-color:#e6e6e6}.editable[_ngcontent-%COMP%]:hover{background-color:#bebebe}"]})}}return r})();var bt=[{path:"",component:Ge}],Je=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=D({type:r})}static{this.\u0275inj=H({imports:[Y.forChild(bt),Y]})}}return r})();var Gi=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=D({type:r})}static{this.\u0275inj=H({imports:[ae,Je,O,he,Ee,Ce,fe,We,qe,Le,Me,Ie,N,Ve,ze,Ue,de,q,je,W,Se,Ne,Q]})}}return r})();export{Gi as ReturnPurchaseModule};
