import{a as kt,b as Tt}from"./chunk-DAYBKDWJ.js";import{a as Pe}from"./chunk-OB3X4MZ3.js";import{a as ne}from"./chunk-NAFA7AEI.js";import{a as $,b as rt}from"./chunk-23C7B2M2.js";import{a as Ve,b as Ee,c as ie}from"./chunk-NAO374LW.js";import{a as vt}from"./chunk-YRUXN2TF.js";import{a as yt}from"./chunk-ARZ4TFMZ.js";import{a as wt,b as xt}from"./chunk-B5UDKY34.js";import"./chunk-J64MJ6MF.js";import"./chunk-FA4OBAKY.js";import"./chunk-EA4RMISB.js";import{a as St}from"./chunk-OY4T6UDA.js";import{b as Ct,d as bt}from"./chunk-7ZNGIE4A.js";import{a as ht}from"./chunk-FO7TG3S7.js";import{a as z,b as ft}from"./chunk-42BTCZ3Y.js";import{b as _t}from"./chunk-7QYRFDGN.js";import{a as _e,b as gt}from"./chunk-5JE6H3SD.js";import"./chunk-GUPSDBPB.js";import{a as Ie}from"./chunk-UJ5JDQTE.js";import"./chunk-ZOJPJJYV.js";import{a as ut}from"./chunk-UVEVFGTS.js";import"./chunk-P4HR6EQA.js";import{c as dt,d as L}from"./chunk-QJMHFOYW.js";import"./chunk-G5UOHYUM.js";import{D as ct,E as mt,F as Te,i as st,j as we,l as xe,m as ke,u as H,v as lt,w as pt,x as W}from"./chunk-LBGQA5HW.js";import"./chunk-4A2WLUYH.js";import{b as Q,c as F}from"./chunk-VVKQAEX7.js";import{a as it,b as nt}from"./chunk-FW7KDDDM.js";import{Ba as R,C as y,Ca as B,D as V,Da as M,Dc as Ne,E as G,Ea as O,Eb as Fe,Fa as m,Fc as Oe,Ga as b,Ha as x,Ic as He,J as Qe,Ja as k,Jb as A,K as d,Ka as T,L as u,La as I,Na as ce,Oa as E,P as le,Pa as pe,Pc as at,Qa as Re,Qc as ee,Rc as te,Sb as P,Tb as Le,Vb as ue,Wb as Xe,X as Ue,Xa as p,Y as a,Ya as c,Yb as $e,_b as U,ac as ge,bc as fe,cc as et,db as Ke,eb as Ze,ec as he,ga as S,gb as me,gc as Ce,hc as be,ia as s,ib as Z,ic as ye,ka as qe,kc as J,la as K,lb as Ye,lc as tt,mb as de,mc as ve,nb as Y,oa as n,pa as o,qa as v,r as je,ua as w,uc as ot,va as h,wa as _,wc as D,xb as Je,xc as X,yc as j,z as q,za as Ge,zc as Se}from"./chunk-DSVZHE42.js";import"./chunk-GAL4ENT6.js";var zt=()=>({width:"75vw"}),At=()=>({"1199px":"85vw","575px":"95vw"}),jt=()=>[10,15,50,100],Qt=()=>["product_name","barcode"];function Ut(i,C){i&1&&(n(0,"tr")(1,"th"),m(2),p(3,"translate"),o(),n(4,"th"),m(5),p(6,"translate"),o(),n(7,"th"),m(8),p(9,"translate"),o(),n(10,"th"),m(11),p(12,"translate"),o(),n(13,"th"),m(14),p(15,"translate"),o()()),i&2&&(a(2),b(c(3,5,"Transaction #")),a(3),b(c(6,7,"Datetime")),a(3),b(c(9,9,"Type")),a(3),b(c(12,11,"Quantity")),a(3),b(c(15,13,"Balance")))}function qt(i,C){if(i&1&&(n(0,"tr",8)(1,"td"),m(2),o(),n(3,"td"),m(4),o(),n(5,"td"),v(6,"p-tag",9),p(7,"translate"),o(),n(8,"td"),m(9),o(),n(10,"td"),m(11),o()()),i&2){let e=C.$implicit,r=_(2);s("pSelectableRow",e),a(2),x(" ",e.transaction_notes||"---"," "),a(2),b(e.transaction_datetime),a(2),s("value",c(7,7,e.transaction_type))("severity",r.getSeverity(e.transaction_type)),a(3),b(e.quantity),a(2),b(e.balance)}}function Gt(i,C){i&1&&(n(0,"tr")(1,"td",10),m(2,"No items yet!"),o()())}function Kt(i,C){if(i&1&&(n(0,"p-table",4,0),S(2,Ut,16,15,"ng-template",5)(3,qt,12,9,"ng-template",6)(4,Gt,3,0,"ng-template",7),o()),i&2){let e=_();s("value",e.stockHistory())("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",E(8,jt))("alwaysShowPaginator",!0)("globalFilterFields",E(9,Qt))("filterDelay",0)}}function Zt(i,C){if(i&1){let e=w();n(0,"p-button",11),p(1,"translate"),h("onClick",function(){d(e);let t=_();return u(t.closeDialog())}),o()}i&2&&s("label",c(1,1,"Cancel"))}var ae=(()=>{class i{constructor(){this.visible=!1,this.onClose=new le,this.stockService=y(L),this.stockHistory=this.stockService.stockHistory}closeDialog(){this.visible=!1,this.onClose.emit()}fetchProductHistory(){this.stockService.fetchStockHistory(this.product_id)}getSeverity(e){switch(e){case"SALE":return"danger";case"SUPPLY":return"success";case"RETURN":return"success";case"DELETE":return"success";case"DISPOSE":return"danger";case"ADD":return"success";case"REMOVE":return"danger";default:return"contrast"}}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=V({type:i,selectors:[["stock-transactions"]],inputs:{product_id:"product_id",visible:"visible"},outputs:{onClose:"onClose"},standalone:!0,features:[ce],decls:4,vars:14,consts:[["dt2",""],["position","top","styleClass","p-fluid",3,"visibleChange","onHide","onShow","header","modal","visible","breakpoints","closeOnEscape","closable","maximizable","dismissableMask"],["pTemplate","content"],["pTemplate","footer"],["styleClass","p-datatable-sm","dataKey","transaction_id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} records",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","alwaysShowPaginator","globalFilterFields","filterDelay"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"pSelectableRow"],[3,"value","severity"],["colspan","7"],["icon","pi pi-times","severity","secondary","size","small","styleClass","w-full mt-2 md:w-auto md:ml-2",3,"onClick","label"]],template:function(r,t){r&1&&(n(0,"p-dialog",1),p(1,"translate"),I("visibleChange",function(f){return T(t.visible,f)||(t.visible=f),f}),h("onHide",function(){return t.closeDialog()})("onShow",function(){return t.fetchProductHistory()}),S(2,Kt,5,10,"ng-template",2)(3,Zt,2,3,"ng-template",3),o()),r&2&&(K(E(12,zt)),s("header",c(1,10,"Transaction History"))("modal",!0),k("visible",t.visible),s("breakpoints",E(13,At))("closeOnEscape",!0)("closable",!0)("maximizable",!0)("dismissableMask",!0))},dependencies:[te,ee,P,X,D,Te,H,W,xt,wt,F]})}}return i})();var Xt=()=>({width:"65vw"}),We=i=>({"ng-invalid ng-dirty":i});function $t(i,C){if(i&1){let e=w();n(0,"form",3),h("ngSubmit",function(){d(e);let t=_();return u(t.submitStockCorrection())}),n(1,"div",4)(2,"div",5)(3,"label"),m(4),p(5,"translate"),n(6,"span",6),m(7,"*"),o()(),v(8,"p-dropdown",7),p(9,"translate"),o(),n(10,"div",5)(11,"label"),m(12),p(13,"translate"),n(14,"span",6),m(15,"*"),o()(),v(16,"p-inputNumber",8),o(),n(17,"div",9)(18,"label"),m(19),p(20,"translate"),n(21,"span",6),m(22,"*"),o()(),v(23,"input",10),o()()()}if(i&2){let e=_();s("formGroup",e.correctStockForm),a(4),b(c(5,12,"Option")),a(4),s("autoOptionFocus",!1)("options",e.transactionOptions)("placeholder",c(9,14,"transaction type"))("ngClass",pe(20,We,e.f.transaction_type.invalid&&(e.f.transaction_type.dirty||e.f.transaction_type.touched||e.submitted))),a(4),b(c(13,16,"Quantity")),a(4),s("maxFractionDigits",2)("minFractionDigits",0)("ngClass",pe(22,We,e.f.quantity.invalid&&(e.f.quantity.dirty||e.f.quantity.touched||e.submitted))),a(3),b(c(20,18,"Notes")),a(4),s("ngClass",pe(24,We,e.f.transaction_notes.invalid&&(e.f.transaction_notes.dirty||e.f.transaction_notes.touched||e.submitted)))}}function ei(i,C){if(i&1){let e=w();n(0,"p-button",11),p(1,"translate"),h("onClick",function(){d(e);let t=_();return u(t.closeStockCorrectionDialog())}),o(),n(2,"p-button",12),p(3,"translate"),h("onClick",function(){d(e);let t=_();return u(t.submitStockCorrection())}),o()}if(i&2){let e=_();s("label",c(1,3,"Cancel")),a(2),s("label",c(3,5,"Save"))("loading",e.loading)}}var se=(()=>{class i{constructor(){this.fb=y(J),this.apiService=y(Xe),this.notification=y(ue),this.translate=y(Q),this.visible=!1,this.visibleChange=new le,this.onSubmit=new le,this.loading=!1,this.transactionOptions=[{name:this.translate.instant("Add"),value:"ADD"},{name:this.translate.instant("Remove"),value:"REMOVE"}],this.submitted=!1,this.correctStockForm=this.fb.group({product_id_fk:[null,U.required],transaction_type:[{value:null,disabled:!1},U.required],quantity:[null,U.required],transaction_notes:[null,U.required]})}ngOnChanges(e){e.visible&&this.visible&&this.correctStockForm.reset({product_id_fk:this.product_id})}get f(){return this.correctStockForm.controls}closeStockCorrectionDialog(){this.submitted=!1,this.visibleChange.emit(!1),this.loading=!1}submitStockCorrection(){this.submitted=!0,this.correctStockForm.valid&&(this.loading=!0,this.apiService.post("stock/correction",this.correctStockForm.value).pipe(je(()=>{this.loading=!1})).subscribe({next:e=>{this.notification.showSuccess(),this.onSubmit.emit(e),this.closeStockCorrectionDialog()}}))}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=V({type:i,selectors:[["stock-correction"]],inputs:{visible:"visible",product_id:"product_id"},outputs:{visibleChange:"visibleChange",onSubmit:"onSubmit"},standalone:!0,features:[Qe,ce],decls:4,vars:8,consts:[["styleClass","p-fluid","position","top",3,"visibleChange","onHide","visible","header","modal"],["pTemplate","content"],["pTemplate","footer"],[3,"ngSubmit","formGroup"],[1,"formgrid","grid"],[1,"field","col-12","md:col-3"],[1,"text-red-600"],["scrollHeight","400px","appendTo","body","formControlName","transaction_type","optionLabel","name","optionValue","value",3,"autoOptionFocus","options","placeholder","ngClass"],["formControlName","quantity","autoSelect","","min","0.1","step","0.1",3,"maxFractionDigits","minFractionDigits","ngClass"],[1,"field","col-12","md:col-6"],["type","text","spellcheck","false","pInputText","","formControlName","transaction_notes",1,"w-full",3,"ngClass"],["icon","pi pi-times","severity","secondary","size","small",3,"onClick","label"],["icon","pi pi-check","severity","success","size","small",3,"onClick","label","loading"]],template:function(r,t){r&1&&(n(0,"p-dialog",0),p(1,"translate"),I("visibleChange",function(f){return T(t.visible,f)||(t.visible=f),f}),h("onHide",function(){return t.closeStockCorrectionDialog()}),S(2,$t,24,26,"ng-template",1)(3,ei,4,7,"ng-template",2),o()),r&2&&(K(E(7,Xt)),k("visible",t.visible),s("header",c(1,5,"Stock Correction"))("modal",!0))},dependencies:[Y,me,te,ee,P,X,D,Se,j,we,st,ve,Ce,$e,ge,fe,be,ye,ke,xe,F,ut]})}}return i})();var oi=["tableSearch"],ri=["barcodeInput"],ai=["itemName"],si=["dt2"],li=()=>[10,15,20,50,100],pi=()=>["product_name","barcode","sku"];function ci(i,C){if(i&1){let e=w();n(0,"span",15),v(1,"i",16),n(2,"input",17,1),p(4,"translate"),h("input",function(t){d(e),_();let l=O(8);return u(l.filterGlobal(t.target.value,"contains"))}),o()(),n(5,"p-button",18),h("onClick",function(){d(e);let t=_();return u(t.printStock())}),o(),n(6,"p-button",19),p(7,"translate"),h("onClick",function(){d(e);let t=_();return u(t.refreshTable())}),o(),n(8,"p-button",20),p(9,"translate"),h("onClick",function(){d(e);let t=_();return u(t.openItemDialog("add"))}),o()}if(i&2){let e=_(),r=O(8);a(2),s("placeholder",c(4,5,"Search ..."))("value",r.filters.global==null?null:r.filters.global.value),a(4),s("label",c(7,7,"Refresh"))("loading",e.tableLoading()),a(2),s("label",c(9,9,"New"))}}function mi(i,C){if(i&1){let e=w();n(0,"p-button",21),p(1,"translate"),h("onClick",function(){d(e);let t=_();return u(t.stockDialogVisible=!0)}),o(),n(2,"p-button",22),p(3,"translate"),h("onClick",function(){d(e);let t=_();return u(t.fetchHistory())}),o(),n(4,"p-button",23),p(5,"translate"),h("onClick",function(){d(e);let t=_();return u(t.openLabelPrint())}),o()}if(i&2){let e=_();s("label",c(1,7,"Correct Qty"))("disabled",!e.selectedProduct()||e.selectedProduct().stock_management==0),a(2),s("label",c(3,9,"History"))("disabled",!e.selectedProduct())("loading",e.historyLoading()),a(2),s("label",c(5,11,"Print Labels"))("disabled",!e.selectedProduct()||e.selectedProduct().barcode=="")}}function di(i,C){if(i&1){let e=w();n(0,"p-button",24),p(1,"translate"),h("onClick",function(){d(e);let t=_();return u(t.openItemDialog("edit"))}),o(),n(2,"p-button",25),p(3,"translate"),h("onClick",function(){d(e);let t=_();return u(t.deleteSelectedItem())}),o()}if(i&2){let e=_();s("label",c(1,4,"Edit"))("disabled",!e.selectedProduct()),a(2),s("label",c(3,6,"Delete"))("disabled",!e.selectedProduct())}}function ui(i,C){i&1&&(n(0,"th",39),m(1),p(2,"translate"),o()),i&2&&(a(),x(" ",c(2,1,"Latest Cost")," "))}function _i(i,C){i&1&&(n(0,"th",39),m(1),p(2,"translate"),o()),i&2&&(a(),x(" ",c(2,1,"Avg Cost")," "))}function gi(i,C){i&1&&(n(0,"th",39),m(1),p(2,"translate"),o()),i&2&&(a(),x(" ",c(2,1,"Wholesale")," "))}function fi(i,C){if(i&1&&(n(0,"tr")(1,"th",26),m(2),p(3,"translate"),v(4,"p-sortIcon",27),o(),n(5,"th",28),m(6),p(7,"translate"),v(8,"p-sortIcon",29),o(),n(9,"th",30),m(10),p(11,"translate"),v(12,"p-sortIcon",31),o(),n(13,"th",32),m(14),p(15,"translate"),v(16,"p-sortIcon",33),o(),n(17,"th",34),m(18),p(19,"translate"),v(20,"p-sortIcon",35),o(),n(21,"th",36),m(22),p(23,"translate"),v(24,"p-sortIcon",37),o(),S(25,ui,3,3,"th",38)(26,_i,3,3,"th",38),n(27,"th",39),m(28),p(29,"translate"),o(),S(30,gi,3,3,"th",38),n(31,"th",39),m(32),p(33,"translate"),o()()),i&2){let e=_();a(2),x(" ",c(3,11,"SKU")," "),a(4),x(" ",c(7,13,"Barcode")," "),a(4),x(" ",c(11,15,"Description")," "),a(4),x(" ",c(15,17,"Category")," "),a(4),x(" ",c(19,19,"Brand")," "),a(4),x(" ",c(23,21,"Qty")," "),a(3),s("ngIf",e.userPermissions().show_cost),a(),s("ngIf",e.userPermissions().show_cost),a(2),b(c(29,23,"Price")),a(2),s("ngIf",e.wholesaleEnabled()),a(2),x(" ",c(33,25,"\u064FTotal")," ")}}function hi(i,C){if(i&1&&(n(0,"td"),m(1),p(2,"currency"),p(3,"lira"),o()),i&2){let e=_().$implicit;a(),x(" ",e.currency=="dollar"?c(2,1,e.unit_cost_usd):c(3,3,e.unit_cost_usd)," ")}}function Ci(i,C){if(i&1&&(n(0,"td"),m(1),p(2,"currency"),p(3,"lira"),o()),i&2){let e=_().$implicit;a(),x(" ",e.currency=="dollar"?c(2,1,e.avg_cost_usd):c(3,3,e.avg_cost_usd)," ")}}function bi(i,C){if(i&1&&(n(0,"td"),m(1),p(2,"currency"),p(3,"lira"),o()),i&2){let e=_().$implicit;a(),x(" ",(e.currency=="dollar"?c(2,1,e.wholesale_price_usd):c(3,3,e.wholesale_price_usd))||"---"," ")}}function yi(i,C){if(i&1&&(n(0,"tr",40)(1,"td"),m(2),o(),n(3,"td"),m(4),o(),n(5,"td",41),m(6),o(),n(7,"td"),m(8),o(),n(9,"td"),m(10),o(),n(11,"td"),m(12),o(),S(13,hi,4,5,"td",42)(14,Ci,4,5,"td",42),n(15,"td"),m(16),p(17,"currency"),p(18,"lira"),o(),S(19,bi,4,5,"td",42),n(20,"td"),m(21),p(22,"currency"),p(23,"lira"),o()()),i&2){let e=C.$implicit,r=C.rowIndex,t=_();qe("glowing",t.glowingRowIndex()===r),s("pSelectableRow",e),a(2),b(e.sku||"---"),a(2),b(e.barcode||"---"),a(),s("autoDir",e.product_name),a(),x(" ",e.product_name," "),a(2),b(e.category_name||"---"),a(2),b(e.brand_name||"---"),a(2),x(" ",e.stock_management?e.quantity:"--"," "),a(),s("ngIf",t.userPermissions().show_cost),a(),s("ngIf",t.userPermissions().show_cost),a(2),x(" ",e.currency=="dollar"?c(17,15,e.unit_price_usd):c(18,17,e.unit_price_usd)," "),a(3),s("ngIf",t.wholesaleEnabled()),a(2),x(" ",e.currency=="dollar"&&e.stock_management?c(22,19,e.unit_price_usd*e.quantity):c(23,21,e.unit_price_usd*e.quantity)," ")}}function vi(i,C){i&1&&(n(0,"tr")(1,"td",43),m(2,"No items yet!"),o()())}var Pt=(()=>{class i{constructor(){this.stockService=y(L),this.confirmationService=y(A),this.authService=y(_e),this.wholesaleSettingService=y(vt),this.translate=y(Q),this.printService=y(gt),this.userPermissions=this.authService.userPermissions,this.wholesaleEnabled=this.wholesaleSettingService.wholesaleEnabled,this.rowsPerPage=this.stockService.rowsPerPage,this.products=this.stockService.products,this.productDialogVisible=!1,this.tableLoading=this.stockService.tableLoading,this.selectedProduct=this.stockService.selectedProduct,this.stockDialogVisible=!1,this.historyDialogVisible=this.stockService.historyDialogVisible,this.historyLoading=this.stockService.historyLoading,this.glowingRowIndex=this.stockService.glowingRowIndex,this.labelPrintDialogVisible=!1}detectMac(){return navigator.userAgent.toUpperCase().includes("MAC")}onKeyDown(e){let t=this.detectMac()?e.metaKey:e.ctrlKey,l=e.key.toLowerCase();l==="meta"||l==="control"||l==="shift"||l==="alt"||t&&["c","v","x","a","z"].includes(l)||!this.productDialogVisible&&!this.stockDialogVisible&&!this.labelPrintDialogVisible&&(this.tableSearch.nativeElement.focus(),e.key=="Enter"&&this.tableSearch.nativeElement.select())}updateRowsPerPage(e){this.stockService.updateRowsPerPage(e)}openItemDialog(e){this.dialogMode=e,this.productDialogVisible=!0}onCreateProduct(e){this.stockService.onCreateProduct(e)}onUpdateProduct(e){this.stockService.onUpdateProduct(e)}deleteSelectedItem(){this.confirmationService.confirm({key:"home",message:this.translate.instant("Are you sure you want to delete selected item ?"),header:this.translate.instant("Warning"),acceptLabel:this.translate.instant("Yes"),rejectLabel:this.translate.instant("No"),icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.stockService.deleteItem(this.selectedProduct())}})}refreshTable(){this.dt2.reset(),this.stockService.getItems()}onSubmitStockCorrection(e){this.stockService.onUpdateProduct(e)}fetchHistory(){this.stockService.fetchStockHistory(this.selectedProduct().product_id)}closeHistoryDialog(){this.stockService.historyDialogVisible.set(!1)}openLabelPrint(){let e=this.selectedProduct();this.printData={barcode:e.barcode,shortName:e.product_name,price:e.unit_price_usd},this.labelPrintDialogVisible=!0}printStock(){this.printService.printStock(this.products())}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=V({type:i,selectors:[["app-inventory"]],viewQuery:function(r,t){if(r&1&&(R(oi,5),R(ri,5),R(ai,5),R(si,5)),r&2){let l;B(l=M())&&(t.tableSearch=l.first),B(l=M())&&(t.barcodeInput=l.first),B(l=M())&&(t.itemName=l.first),B(l=M())&&(t.dt2=l.first)}},hostBindings:function(r,t){r&1&&h("keydown",function(f){return t.onKeyDown(f)},!1,Ue)},decls:16,vars:22,consts:[["dt2",""],["tableSearch",""],[1,"grid","m-1"],[1,"col-12"],["pTemplate","left"],["pTemplate","center"],["pTemplate","right"],["styleClass","p-datatable-sm","selectionMode","single","dataKey","product_id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} records","scrollHeight","65vh","sortMode","multiple",3,"selectionChange","rowsChange","value","selection","paginator","rows","showCurrentPageReport","rowsPerPageOptions","alwaysShowPaginator","globalFilterFields","filterDelay","loading","scrollable"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"visibleChange","onCreate","onUpdate","visible","product","mode"],[3,"visibleChange","onSubmit","visible","product_id"],[3,"onClose","visible","product_id"],[3,"visibleChange","visible","printData"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","search",1,"p-inputtext-sm",3,"input","placeholder","value"],["label","Print","icon","pi pi-print","size","small","severity","contrast","styleClass","mx-2",3,"onClick"],["icon","pi pi-refresh","size","small","styleClass","mx-2 ",3,"onClick","label","loading"],["icon","pi pi-plus","severity","success","size","small",3,"onClick","label"],["size","small","severity","info","icon","pi pi-wrench",3,"onClick","label","disabled"],["size","small","severity","contrast","icon","pi pi-history","styleClass","ml-2",3,"onClick","label","disabled","loading"],["icon","pi pi-barcode","size","small","severity","help","styleClass","ml-2",3,"onClick","label","disabled"],["icon","pi pi-file-edit","size","small","severity","warning",3,"onClick","label","disabled"],["icon","pi pi-trash","size","small","severity","danger",1,"ml-2",3,"onClick","label","disabled"],["width","7%","pSortableColumn","sku"],["field","sku"],["width","10%","pSortableColumn","barcode"],["field","barcode"],["width","26%","pSortableColumn","product_name"],["field","product_name"],["width","10%","pSortableColumn","category_name"],["field","category_name"],["width","10%","pSortableColumn","brand_name"],["field","brand_name"],["width","5%","pSortableColumn","quantity"],["field","quantity"],["width","8%",4,"ngIf"],["width","8%"],[3,"pSelectableRow"],[3,"autoDir"],[4,"ngIf"],["colspan","9"]],template:function(r,t){if(r&1){let l=w();n(0,"div",2)(1,"div",3)(2,"p-card")(3,"p-toolbar"),S(4,ci,10,11,"ng-template",4)(5,mi,6,13,"ng-template",5)(6,di,4,8,"ng-template",6),o(),n(7,"p-table",7,0),I("selectionChange",function(g){return d(l),T(t.selectedProduct,g)||(t.selectedProduct=g),u(g)}),h("rowsChange",function(g){return d(l),u(t.updateRowsPerPage(g))}),S(9,fi,34,27,"ng-template",8)(10,yi,24,23,"ng-template",9)(11,vi,3,0,"ng-template",10),o()()()(),n(12,"product-form",11),I("visibleChange",function(g){return d(l),T(t.productDialogVisible,g)||(t.productDialogVisible=g),u(g)}),h("onCreate",function(g){return d(l),u(t.onCreateProduct(g))})("onUpdate",function(g){return d(l),u(t.onUpdateProduct(g))}),o(),n(13,"stock-correction",12),I("visibleChange",function(g){return d(l),T(t.stockDialogVisible,g)||(t.stockDialogVisible=g),u(g)}),h("onSubmit",function(g){return d(l),u(t.onSubmitStockCorrection(g))}),o(),n(14,"stock-transactions",13),h("onClose",function(){return d(l),u(t.closeHistoryDialog())}),o(),n(15,"label-print",14),I("visibleChange",function(g){return d(l),T(t.labelPrintDialogVisible,g)||(t.labelPrintDialogVisible=g),u(g)}),o()}if(r&2){let l,f;a(7),s("value",t.products()),k("selection",t.selectedProduct),s("paginator",!0)("rows",t.rowsPerPage())("showCurrentPageReport",!0)("rowsPerPageOptions",E(20,li))("alwaysShowPaginator",!0)("globalFilterFields",E(21,pi))("filterDelay",0)("loading",t.tableLoading())("scrollable",!0),a(5),k("visible",t.productDialogVisible),s("product",t.selectedProduct())("mode",t.dialogMode),a(),k("visible",t.stockDialogVisible),s("product_id",(l=t.selectedProduct())==null?null:l.product_id),a(),s("visible",t.historyDialogVisible())("product_id",(f=t.selectedProduct())==null?null:f.product_id),a(),k("visible",t.labelPrintDialogVisible),s("printData",t.printData)}},dependencies:[Z,H,P,lt,W,pt,z,D,j,it,ae,ie,se,ne,St,de,Ie,F],styles:["[_nghost-%COMP%]  .p-card-content{padding:0!important}[_nghost-%COMP%]  .p-toolbar{padding-top:.6rem!important;padding-bottom:.6rem!important}"]})}}return i})();var Dt=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=V({type:i,selectors:[["app-stock-home"]],decls:1,vars:0,template:function(r,t){r&1&&v(0,"router-outlet")},dependencies:[Je]})}}return i})();var Si=["rateInput"],wi=()=>({width:"35vw"}),xi=()=>({"1199px":"85vw","575px":"95vw"});function ki(i,C){if(i&1){let e=w();n(0,"form",8),h("ngSubmit",function(){d(e);let t=_();return u(t.submit())}),n(1,"div",9)(2,"label",10),m(3),p(4,"translate"),o(),v(5,"p-inputNumber",11,0),o()()}if(i&2){let e=_();s("formGroup",e.rateForm),a(3),b(c(4,3,"Exchange Rate")),a(2),s("min",1e3)}}function Ti(i,C){if(i&1){let e=w();n(0,"p-button",12),p(1,"translate"),h("onClick",function(){d(e);let t=_();return u(t.toggleDialog(!1))}),o(),n(2,"p-button",13),p(3,"translate"),h("onClick",function(){d(e);let t=_();return u(t.submit())}),o()}i&2&&(s("label",c(1,2,"Cancel")),a(2),s("label",c(3,4,"Save")))}var Bt=(()=>{class i{constructor(){this.rateService=y(dt),this.formBuilder=y(J),this.exchangeRate=this.rateService.exchangeRate,this.rateDialogVisible=this.rateService.rateDialogVisible,this.dialogVisible=!1,Ze(()=>{this.rateForm=this.formBuilder.group({rate_value:[this.exchangeRate().rate_value]})})}toggleDialog(e){this.rateService.rateDialogVisible.set(e),setTimeout(()=>{this.rateInput&&this.rateInput.input.nativeElement.select()},50)}submit(){this.rateForm.valid&&this.rateService.updateExchangeRate(this.rateForm.value)}resetDialog(){this.rateForm.reset({rate_value:this.exchangeRate().rate_value}),this.rateService.rateDialogVisible.set(!1)}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=V({type:i,selectors:[["exchange-rate"]],viewQuery:function(r,t){if(r&1&&R(Si,5),r&2){let l;B(l=M())&&(t.rateInput=l.first)}},decls:15,vars:19,consts:[["rateInput",""],[1,"p-toolbar-group-start"],[1,"text-green-600"],[1,"p-toolbar-group-end"],["icon","pi pi-file-edit","styleClass","p-button-warning",3,"onClick","label"],["styleClass","p-fluid",3,"visibleChange","onHide","visible","header","modal","breakpoints"],["pTemplate","content"],["pTemplate","footer"],[3,"ngSubmit","formGroup"],[1,"field","mt-1"],["for","name"],["formControlName","rate_value",3,"min"],["icon","pi pi-times","severity","secondary","size","small",3,"onClick","label"],["icon","pi pi-check","severity","success","size","small",3,"onClick","label"]],template:function(r,t){r&1&&(n(0,"p-toolbar")(1,"div",1)(2,"h3"),m(3),p(4,"translate"),n(5,"span",2),m(6),p(7,"lira"),o()()(),n(8,"div",3)(9,"p-button",4),p(10,"translate"),h("onClick",function(){return t.toggleDialog(!0)}),o()()(),n(11,"p-dialog",5),p(12,"translate"),I("visibleChange",function(f){return T(t.rateDialogVisible,f)||(t.rateDialogVisible=f),f}),h("onHide",function(){return t.resetDialog()}),S(13,ki,7,5,"ng-template",6)(14,Ti,4,6,"ng-template",7),o()),r&2&&(a(3),x(" ",c(4,9,"Dollar Exchange:")," "),a(3),b(c(7,11,t.exchangeRate().rate_value)),a(3),s("label",c(10,13,"Edit")),a(2),K(E(17,wi)),k("visible",t.rateDialogVisible),s("header",c(12,15,"Exchange Rate"))("modal",!0)("breakpoints",E(18,xi)))},dependencies:[Ce,ge,fe,be,ye,P,z,D,ee,xe,Ie,F]})}}return i})();function Vi(i,C){if(i&1){let e=w();n(0,"p-button",9),h("onClick",function(){d(e);let t=_();return u(t.openBrandDialog("add"))}),o()}}function Ei(i,C){if(i&1){let e=w();n(0,"p-button",10),h("onClick",function(){d(e);let t=_();return u(t.openBrandDialog("edit"))}),o(),n(1,"p-button",11),h("onClick",function(){d(e);let t=_();return u(t.deleteSelectedBrand())}),o()}if(i&2){let e=_();s("disabled",!e.selectedBrand()),a(),s("disabled",!e.selectedBrand())}}function Pi(i,C){i&1&&(n(0,"tr")(1,"th"),m(2,"Brand Name"),o()())}function Di(i,C){if(i&1&&(n(0,"tr",12)(1,"td"),m(2),o()()),i&2){let e=C.$implicit;s("pSelectableRow",e),a(2),b(e.brand_name)}}function Bi(i,C){i&1&&(n(0,"tr")(1,"td"),m(2,"No Brands yet!"),o()())}var Rt=(()=>{class i{constructor(){this.stockService=y(L),this.confirmationService=y(A),this.brands=this.stockService.brands,this.brandsLoading=this.stockService.brandsLoading,this.selectedBrand=this.stockService.selectedBrand,this.brandDialogVisible=!1}openBrandDialog(e){this.dialogMode=e,this.brandDialogVisible=!0}onCreateBrand(e){this.brands.set([...this.brands(),e])}onUpdateBrand(e){let r=this.brands().findIndex(t=>t.brand_id===e.brand_id);this.brands.update(t=>[...t.slice(0,r),e,...t.slice(r+1)]),this.selectedBrand.set(e)}deleteSelectedBrand(){this.confirmationService.confirm({key:"home",message:`Are you sure that you want to delete "${this.selectedBrand()?.brand_name}"?`,header:"Warning",icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.stockService.deleteBrand(this.selectedBrand().brand_id)}})}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=V({type:i,selectors:[["stock-brands"]],decls:9,vars:6,consts:[["header","Brands"],["styleClass","mb-4 p-2"],["pTemplate","left"],["pTemplate","right"],["selectionMode","single","dataKey","brand_id","styleClass","p-datatable-sm",3,"selectionChange","value","selection","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"visibleChange","onCreate","onUpdate","visible","brand","mode"],["label","New Brand","icon","pi pi-plus","severity","success","size","small",3,"onClick"],["label","Edit","icon","pi pi-file-edit","styleClass","mr-2","severity","warning","size","small",3,"onClick","disabled"],["label","Delete","icon","pi pi-trash","severity","danger","size","small",3,"onClick","disabled"],[3,"pSelectableRow"]],template:function(r,t){r&1&&(n(0,"p-panel",0)(1,"p-toolbar",1),S(2,Vi,1,0,"ng-template",2)(3,Ei,2,2,"ng-template",3),o(),n(4,"p-table",4),I("selectionChange",function(f){return T(t.selectedBrand,f)||(t.selectedBrand=f),f}),S(5,Pi,3,0,"ng-template",5)(6,Di,3,2,"ng-template",6)(7,Bi,3,0,"ng-template",7),o()(),n(8,"brand-form",8),I("visibleChange",function(f){return T(t.brandDialogVisible,f)||(t.brandDialogVisible=f),f}),h("onCreate",function(f){return t.onCreateBrand(f)})("onUpdate",function(f){return t.onUpdateBrand(f)}),o()),r&2&&(a(4),s("value",t.brands()),k("selection",t.selectedBrand),s("loading",t.brandsLoading()),a(4),k("visible",t.brandDialogVisible),s("brand",t.selectedBrand())("mode",t.dialogMode))},dependencies:[H,P,W,z,D,$,Ee]})}}return i})();var Ft=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=V({type:i,selectors:[["stock-settings"]],decls:7,vars:0,consts:[[1,"grid","m-1"],[1,"col-12","md:col-6"]],template:function(r,t){r&1&&(n(0,"div",0)(1,"div",1),v(2,"exchange-rate")(3,"br")(4,"stock-value"),o(),n(5,"div",1),v(6,"stock-brands"),o()())},dependencies:[Pe,Bt,Rt]})}}return i})();var Ri=()=>[10,15,50,100],Fi=()=>["category_name"],Li=(i,C)=>({" pi-check-circle text-green-600":i,"pi-times-circle text-red-600":C});function Ni(i,C){if(i&1){let e=w();n(0,"span",11),v(1,"i",12),n(2,"input",13,1),p(4,"translate"),h("input",function(t){d(e),_();let l=O(5);return u(l.filterGlobal(t.target.value,"contains"))}),o()(),n(5,"p-button",14),p(6,"translate"),h("onClick",function(){d(e);let t=_();return u(t.refreshCategories())}),o(),n(7,"p-button",15),p(8,"translate"),h("onClick",function(){d(e);let t=_();return u(t.openCategoryDialog("add"))}),o()}if(i&2){let e=_(),r=O(5);a(2),s("placeholder",c(4,5,"Search ..."))("value",r.filters.global==null?null:r.filters.global.value),a(3),s("label",c(6,7,"Refresh"))("loading",e.categoriesLoading()),a(2),s("label",c(8,9,"New Category"))}}function Oi(i,C){if(i&1){let e=w();n(0,"p-button",16),p(1,"translate"),h("onClick",function(){d(e);let t=_();return u(t.openCategoryDialog("edit"))}),o(),n(2,"p-button",17),p(3,"translate"),h("onClick",function(){d(e);let t=_();return u(t.deleteSelectedCategory())}),o()}if(i&2){let e=_();s("label",c(1,4,"Edit"))("disabled",!e.selectedCategory()),a(2),s("label",c(3,6,"Delete"))("disabled",!e.selectedCategory())}}function Hi(i,C){i&1&&(n(0,"tr")(1,"th",18),m(2),p(3,"translate"),o(),n(4,"th",19),m(5),p(6,"translate"),o(),n(7,"th",20),m(8),p(9,"translate"),o()()),i&2&&(a(2),b(c(3,3,"Sort")),a(3),b(c(6,5,"Name")),a(3),b(c(9,7,"Visible")))}function Wi(i,C){if(i&1&&(n(0,"tr",21)(1,"td"),v(2,"span",22),o(),n(3,"td"),m(4),o(),n(5,"td"),v(6,"i",23),o()()),i&2){let e=C.$implicit,r=C.rowIndex;s("pReorderableRow",r)("pSelectableRow",e),a(4),b(e.category_name),a(2),s("ngClass",Re(4,Li,e.show_on_sell,!e.show_on_sell))}}function zi(i,C){i&1&&(n(0,"tr")(1,"td",24),m(2,"No Categories yet!"),o()())}var Lt=(()=>{class i{constructor(){this.stockService=y(L),this.confirmationService=y(A),this.notificationService=y(ue),this.translate=y(Q),this.categoryDialogVisible=!1,this.categories=this.stockService.categories,this.categoriesLoading=this.stockService.categoriesLoading,this.selectedCategory=this.stockService.selectedCategory,this.categoryForm=new et({category_id:new he,category_name:new he(null,U.required),show_on_sell:new he(!1)})}sortCategories(){this.stockService.sortCategories()}selectCategory(){this.stockService.selectedCategoryProduct.set(null)}refreshCategories(){this.stockService.getCategories()}get category_name(){return this.categoryForm.get("category_name")}openCategoryDialog(e){this.dialogMode=e,this.categoryDialogVisible=!0}onCreateCategory(e){this.categories.set([...this.categories(),e])}onUpdateCategory(e){let r=this.categories().findIndex(t=>t.category_id===e.category_id);this.categories.update(t=>[...t.slice(0,r),e,...t.slice(r+1)])}deleteSelectedCategory(){this.confirmationService.confirm({key:"home",message:this.translate.instant("Are you sure you want to delete selected category ?"),header:this.translate.instant("Warning"),acceptLabel:this.translate.instant("Yes"),rejectLabel:this.translate.instant("No"),icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.stockService.deleteCategory(this.selectedCategory().category_id)}})}resetDialog(){this.categoryForm.reset({category_name:null,show_on_sell:!1})}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=V({type:i,selectors:[["categories"]],decls:10,vars:16,consts:[["ct",""],["tableSearch",""],["header","Categories"],["styleClass","mb-4 p-2"],["pTemplate","left"],["pTemplate","right"],["selectionMode","single","dataKey","category_id","styleClass","p-datatable-sm","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} records","scrollHeight","55vh",3,"selectionChange","onRowReorder","onRowSelect","value","selection","loading","paginator","rows","showCurrentPageReport","rowsPerPageOptions","alwaysShowPaginator","scrollable","globalFilterFields","filterDelay"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"visibleChange","onCreate","onUpdate","visible","category","mode"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","search",1,"p-inputtext-sm",3,"input","placeholder","value"],["icon","pi pi-refresh","size","small","styleClass","mx-2",3,"onClick","label","loading"],["icon","pi pi-plus","severity","success","size","small",3,"onClick","label"],["icon","pi pi-file-edit","severity","warning","size","small",1,"mr-2",3,"onClick","label","disabled"],["icon","pi pi-trash","severity","danger","size","small",3,"onClick","label","disabled"],["width","10%"],["width","75%"],["width","15%"],[3,"pReorderableRow","pSelectableRow"],["pReorderableRowHandle","",1,"pi","pi-bars"],[1,"pi",3,"ngClass"],["colspan","3"]],template:function(r,t){if(r&1){let l=w();n(0,"p-panel",2)(1,"p-toolbar",3),S(2,Ni,9,11,"ng-template",4)(3,Oi,4,8,"ng-template",5),o(),n(4,"p-table",6,0),I("selectionChange",function(g){return d(l),T(t.selectedCategory,g)||(t.selectedCategory=g),u(g)}),h("onRowReorder",function(){return d(l),u(t.sortCategories())})("onRowSelect",function(){return d(l),u(t.selectCategory())}),S(6,Hi,10,9,"ng-template",7)(7,Wi,7,7,"ng-template",8)(8,zi,3,0,"ng-template",9),o()(),n(9,"category-form",10),I("visibleChange",function(g){return d(l),T(t.categoryDialogVisible,g)||(t.categoryDialogVisible=g),u(g)}),h("onCreate",function(g){return d(l),u(t.onCreateCategory(g))})("onUpdate",function(g){return d(l),u(t.onUpdateCategory(g))}),o()}r&2&&(a(4),s("value",t.categories()),k("selection",t.selectedCategory),s("loading",t.categoriesLoading())("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",E(14,Ri))("alwaysShowPaginator",!0)("scrollable",!0)("globalFilterFields",E(15,Fi))("filterDelay",0),a(5),k("visible",t.categoryDialogVisible),s("category",t.selectedCategory())("mode",t.dialogMode))},dependencies:[me,H,P,W,ct,mt,z,D,j,$,Ve,F]})}}return i})();var ji=["barcodeInput"],Qi=["itemName"],Ui=["tableSearch"],qi=["dt"],Gi=()=>[10,25,50],Ki=()=>["product_name","barcode","sku"];function Zi(i,C){if(i&1){let e=w();n(0,"span",15),v(1,"i",16),n(2,"input",17,1),p(4,"translate"),h("input",function(t){d(e),_();let l=O(7);return u(l.filterGlobal(t.target.value,"contains"))}),o()(),n(5,"p-button",18),h("onClick",function(){d(e);let t=_();return u(t.openProductDialog("add"))}),o()}if(i&2){_();let e=O(7);a(2),s("placeholder",c(4,2,"Search ..."))("value",e.filters.global==null?null:e.filters.global.value)}}function Yi(i,C){if(i&1){let e=w();n(0,"p-button",19),h("onClick",function(){d(e);let t=_();return u(t.stockDialogVisible=!0)}),o(),n(1,"p-button",20),h("onClick",function(){d(e);let t=_();return u(t.fetchHistory())}),o(),n(2,"p-button",21),h("onClick",function(){d(e);let t=_();return u(t.openLabelPrint())}),o()}if(i&2){let e=_();s("disabled",!e.selectedCategoryProduct()||!e.selectedCategoryProduct().stock_management),a(),s("disabled",!e.selectedCategoryProduct())("loading",e.historyLoading()),a(),s("disabled",!e.selectedCategoryProduct()||e.selectedCategoryProduct().barcode=="")}}function Ji(i,C){if(i&1){let e=w();n(0,"p-button",22),h("onClick",function(){d(e);let t=_();return u(t.openProductDialog("edit"))}),o(),n(1,"p-button",23),h("onClick",function(){d(e);let t=_();return u(t.deleteSelectedItem())}),o()}if(i&2){let e=_();s("disabled",!e.selectedCategoryProduct()),a(),s("disabled",!e.selectedCategoryProduct())}}function Xi(i,C){i&1&&(n(0,"th",28),m(1),p(2,"translate"),o()),i&2&&(a(),x(" ",c(2,1,"Cost")," "))}function $i(i,C){if(i&1&&(n(0,"tr")(1,"th",24),m(2),p(3,"translate"),o(),n(4,"th",25),m(5),p(6,"translate"),o(),n(7,"th",26),m(8),p(9,"translate"),o(),S(10,Xi,3,3,"th",27),n(11,"th",28),m(12),p(13,"translate"),o()()),i&2){let e=_();a(2),b(c(3,5,"Barcode")),a(3),b(c(6,7,"Name")),a(3),b(c(9,9,"Qty")),a(2),s("ngIf",e.userPermissions().show_cost),a(2),b(c(13,11,"Price"))}}function en(i,C){if(i&1&&(n(0,"td"),m(1),p(2,"currency"),o()),i&2){let e=_().$implicit;a(),x(" ",c(2,1,e.unit_cost_usd)," ")}}function tn(i,C){if(i&1&&(n(0,"tr",29)(1,"td"),m(2),o(),n(3,"td"),m(4),o(),n(5,"td"),m(6),o(),S(7,en,3,3,"td",30),n(8,"td"),m(9),p(10,"currency"),o()()),i&2){let e=C.$implicit,r=_();s("pSelectableRow",e),a(2),b(e.barcode||" --- "),a(2),b(e.product_name),a(2),x(" ",e.stock_management?e.quantity:"--"," "),a(),s("ngIf",r.userPermissions().show_cost),a(2),b(c(10,6,e.unit_price_usd))}}function nn(i,C){i&1&&(n(0,"tr")(1,"td",31),m(2),p(3,"translate"),o()()),i&2&&(a(2),b(c(3,1,"No items yet!")))}var Nt=(()=>{class i{constructor(){this.stockService=y(L),this.authService=y(_e),this.fb=y(J),this.confirmationService=y(A),this.translate=y(Q),this.userPermissions=this.authService.userPermissions,this.selectedCategory=this.stockService.selectedCategory,this.products=this.stockService.products,this.filteredProducts=Ke(()=>{let e=this.products(),r=this.selectedCategory();return r?e.filter(t=>t.category_id_fk===r.category_id):e}),this.tableLoading=this.stockService.tableLoading,this.selectedCategoryProduct=this.stockService.selectedCategoryProduct,this.sellProductsLoading=this.stockService.sellProductsLoading,this.productDialogVisible=!1,this.stockDialogVisible=!1,this.historyDialogVisible=this.stockService.historyDialogVisible,this.historyLoading=this.stockService.historyLoading,this.labelPrintDialogVisible=!1}openProductDialog(e){this.dialogMode=e,this.productDialogVisible=!0}onCreateProduct(e){this.stockService.onCreateProduct(e)}onUpdateProduct(e){this.stockService.onUpdateProduct(e)}deleteSelectedItem(){this.confirmationService.confirm({key:"home",message:this.translate.instant("Are you sure you want to delete selected item ?"),header:this.translate.instant("Warning"),acceptLabel:this.translate.instant("Yes"),rejectLabel:this.translate.instant("No"),icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.stockService.deleteItem(this.selectedCategoryProduct())}})}onSubmitStockCorrection(e){this.stockService.onUpdateProduct(e)}fetchHistory(){this.stockService.fetchStockHistory(this.selectedCategoryProduct().product_id)}closeHistoryDialog(){this.stockService.historyDialogVisible.set(!1)}openLabelPrint(){let e=this.selectedCategoryProduct();this.printData={barcode:e.barcode,shortName:e.product_name,price:e.unit_price_usd},this.labelPrintDialogVisible=!0}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=V({type:i,selectors:[["category-items"]],viewQuery:function(r,t){if(r&1&&(R(ji,5),R(Qi,5),R(Ui,5),R(qi,5)),r&2){let l;B(l=M())&&(t.barcodeInput=l.first),B(l=M())&&(t.itemName=l.first),B(l=M())&&(t.tableSearch=l.first),B(l=M())&&(t.dt=l.first)}},decls:15,vars:25,consts:[["dt",""],["tableSearch",""],[3,"header"],["styleClass","mb-4 p-2"],["pTemplate","left"],["pTemplate","center"],["pTemplate","right"],["styleClass","p-datatable-sm","selectionMode","single","dataKey","product_id",3,"selectionChange","value","selection","paginator","rows","showCurrentPageReport","rowsPerPageOptions","alwaysShowPaginator","globalFilterFields","filterDelay","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"visibleChange","onCreate","onUpdate","visible","product","mode","selectedCategory"],[3,"visibleChange","onSubmit","visible","product_id"],[3,"onClose","visible","product_id"],[3,"visibleChange","visible","printData"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","search",1,"p-inputtext-sm","mr-2",3,"input","placeholder","value"],["icon","pi pi-plus","size","small","severity","success",1,"mr-2",3,"onClick"],["size","small","severity","info","icon","pi pi-wrench",3,"onClick","disabled"],["size","small","severity","contrast","icon","pi pi-history","styleClass","ml-2",3,"onClick","disabled","loading"],["icon","pi pi-barcode","size","small","severity","help","styleClass","ml-2",3,"onClick","disabled"],["icon","pi pi-file-edit","size","small","severity","warning",1,"mr-2",3,"onClick","disabled"],["icon","pi pi-trash","size","small","severity","danger",3,"onClick","disabled"],["width","20%"],["width","40%"],["width","10%"],["width","15%",4,"ngIf"],["width","15%"],[3,"pSelectableRow"],[4,"ngIf"],["colspan","5"]],template:function(r,t){if(r&1){let l=w();n(0,"p-panel",2),p(1,"titlecase"),n(2,"p-toolbar",3),S(3,Zi,6,4,"ng-template",4)(4,Yi,3,4,"ng-template",5)(5,Ji,2,2,"ng-template",6),o(),n(6,"p-table",7,0),I("selectionChange",function(g){return d(l),T(t.selectedCategoryProduct,g)||(t.selectedCategoryProduct=g),u(g)}),S(8,$i,14,13,"ng-template",8)(9,tn,11,8,"ng-template",9)(10,nn,4,3,"ng-template",10),o()(),n(11,"product-form",11),I("visibleChange",function(g){return d(l),T(t.productDialogVisible,g)||(t.productDialogVisible=g),u(g)}),h("onCreate",function(g){return d(l),u(t.onCreateProduct(g))})("onUpdate",function(g){return d(l),u(t.onUpdateProduct(g))}),o(),n(12,"stock-correction",12),I("visibleChange",function(g){return d(l),T(t.stockDialogVisible,g)||(t.stockDialogVisible=g),u(g)}),h("onSubmit",function(g){return d(l),u(t.onSubmitStockCorrection(g))}),o(),n(13,"stock-transactions",13),h("onClose",function(){return d(l),u(t.closeHistoryDialog())}),o(),n(14,"label-print",14),I("visibleChange",function(g){return d(l),T(t.labelPrintDialogVisible,g)||(t.labelPrintDialogVisible=g),u(g)}),o()}if(r&2){let l,f;Ge("header",c(1,21,t.selectedCategory().category_name)),a(6),s("value",t.filteredProducts()),k("selection",t.selectedCategoryProduct),s("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",E(23,Gi))("alwaysShowPaginator",!1)("globalFilterFields",E(24,Ki))("filterDelay",0)("loading",t.sellProductsLoading()),a(5),k("visible",t.productDialogVisible),s("product",t.selectedCategoryProduct())("mode",t.dialogMode)("selectedCategory",t.selectedCategory()),a(),k("visible",t.stockDialogVisible),s("product_id",(l=t.selectedCategoryProduct())==null?null:l.product_id),a(),s("visible",t.historyDialogVisible())("product_id",(f=t.selectedCategoryProduct())==null?null:f.product_id),a(),k("visible",t.labelPrintDialogVisible),s("printData",t.printData)}},dependencies:[Z,H,P,W,z,D,j,$,ae,ie,se,ne,Ye,de,F]})}}return i})();function rn(i,C){i&1&&v(0,"category-items")}var Ot=(()=>{class i{constructor(){this.stockService=y(L),this.selectedCategory=this.stockService.selectedCategory}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=V({type:i,selectors:[["app-categories-home"]],decls:5,vars:1,consts:[[1,"grid","m-1"],[1,"col-12","md:col-6"],[4,"ngIf"]],template:function(r,t){r&1&&(n(0,"div",0)(1,"div",1),v(2,"categories"),o(),n(3,"div",1),S(4,rn,1,0,"category-items",2),o()()),r&2&&(a(4),s("ngIf",t.selectedCategory()))},dependencies:[Z,Lt,Nt]})}}return i})();var an=[{path:"",component:Dt,children:[{path:"items",data:{breadcrumb:"Inventory"},component:Pt},{path:"categories",data:{breadcrumb:"Categories"},component:Ot},{path:"settings",data:{breadcrumb:"Settings"},component:Ft},{path:"**",redirectTo:"/stock/items"}]}],Ht=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=q({imports:[Fe.forChild(an),Fe]})}}return i})();var rr=He([Oe({transform:"{{transform}}",opacity:0}),Ne("{{transition}}")]),ar=He([Ne("{{transition}}",Oe({transform:"{{transform}}",opacity:0}))]);var Wt=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=G({type:i});static \u0275inj=q({imports:[Y,ot,Le,at,Le]})}return i})();var oa=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=q({imports:[Y,tt,ve,Ht,Te,ft,X,te,we,Se,ke,nt,ht,Wt,rt,_t,Ct,bt,ae,yt,Pe,kt,Tt,ie,se,ne,Ve,Ee]})}}return i})();export{oa as StockModule};
