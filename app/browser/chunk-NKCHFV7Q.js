import{b as m,c as d}from"./chunk-AFTSMEUE.js";import{C as o,Vb as l,Wb as y,da as i,pb as c,r,y as n}from"./chunk-DSVZHE42.js";var b=(()=>{class h{constructor(){this.api=o(y),this.http=o(c),this.notificationsService=o(l),this.dateService=o(d),this.currencyService=o(m),this.host=this.api.host,this.defaultCurrency=this.currencyService.defaultCurrency,this.selectedCurrency=i(this.defaultCurrency()),this.startDate=i(this.dateService.getStartOfMonth(!0)),this.endDate=i(this.dateService.getEndOfDay()),this.revenue=i({}),this.revenue_loading=i(!1),this.returns=i({}),this.returns_loading=i(!1),this.totalOrdersLoading=i(!1),this.totalOrders=i({}),this.debts=i({}),this.loadingDebts=i(!1),this.customerPayments=i({}),this.loadingCustomerPayments=i(!1),this.cashBalance=i({}),this.loadingCashBalance=i(!1),this.manualCashTransactions=i({}),this.loadingManualCashTransactions=i(!1),this.loadingExpenses=i(!1),this.expenses=i({}),this.loadingSupplierPayments=i(!1),this.supplierPayments=i({}),this.loadingTopSales=i(!1),this.topSales=i([]),this.selectedProduct=i(null),this.topCategories=i([]),this.loadingSalesAnalytics=i(!1),this.salesAnalytics=i([])}getRevenue(s,e){this.revenue_loading.set(!0),s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),this.http.get(`${this.host()}/report/revenue/${s}&${e}&${this.selectedCurrency()}`).subscribe({next:t=>{this.revenue.set(t)},error:t=>{this.notificationsService.showError(t,"home"),this.revenue_loading.set(!1)},complete:()=>{this.revenue_loading.set(!1)}})}getReturns(s,e){s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),this.returns_loading.set(!0),this.http.get(`${this.host()}/report/returns/${s}&${e}&${this.selectedCurrency()}`).subscribe({next:t=>{this.returns.set(t)},error:t=>{this.notificationsService.showError(t,"home"),this.returns_loading.set(!1)},complete:()=>{this.returns_loading.set(!1)}})}getTotalOrders(s=this.startDate(),e=this.endDate()){s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),this.totalOrdersLoading.set(!0),this.http.get(`${this.host()}/report/total-orders/${s}&${e}&${this.selectedCurrency()}`).pipe(r(()=>{this.totalOrdersLoading.set(!1)})).subscribe({next:t=>{this.totalOrders.set(t),console.log(t)},error:t=>{this.notificationsService.showError(t,"home")}})}getDebts(s,e){s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),this.loadingDebts.set(!0),this.http.get(`${this.host()}/report/debts/${s}&${e}&${this.selectedCurrency()}`).pipe(r(()=>{this.loadingDebts.set(!1)})).subscribe({next:t=>{this.debts.set(t)},error:t=>{this.notificationsService.showError(t,"home")}})}getCustomerPayments(s,e){s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),this.loadingCustomerPayments.set(!0),this.http.get(`${this.host()}/report/customer-payments/${s}&${e}&${this.selectedCurrency()}`).pipe(r(()=>{this.loadingCustomerPayments.set(!1)})).subscribe({next:t=>{this.customerPayments.set(t)},error:t=>{this.notificationsService.showError(t,"home")}})}getCashBalance(s,e){this.loadingCashBalance.set(!0),s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),this.http.get(`${this.host()}/report/cash/${s}&${e}&${this.selectedCurrency()}`).pipe(r(()=>{this.loadingCashBalance.set(!1)})).subscribe({next:t=>{this.cashBalance.set(t)},error:t=>{this.notificationsService.showError(t,"home")}})}getManualCashTransactions(s,e){s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),this.loadingManualCashTransactions.set(!0),this.http.get(`${this.host()}/report/manual-cash/${s}&${e}&${this.selectedCurrency()}`).pipe(r(()=>{this.loadingManualCashTransactions.set(!1)})).subscribe({next:t=>{this.manualCashTransactions.set(t)},error:t=>{this.notificationsService.showError(t,"home")}})}getExpenses(s,e){s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),this.loadingExpenses.set(!0),this.http.get(`${this.host()}/report/expenses/${s}&${e}&${this.selectedCurrency()}`).subscribe({next:t=>{this.expenses.set(t)},error:t=>{this.notificationsService.showError(t,"home"),this.loadingExpenses.set(!1)},complete:()=>{this.loadingExpenses.set(!1)}})}getSupplierPayments(s,e){s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),this.loadingSupplierPayments.set(!0),this.http.get(`${this.host()}/report/supplier-payments/${s}&${e}&${this.selectedCurrency()}`).subscribe({next:t=>{this.supplierPayments.set(t)},error:t=>{this.notificationsService.showError(t,"home"),this.loadingSupplierPayments.set(!1)},complete:()=>{this.loadingSupplierPayments.set(!1)}})}getTopSales(s,e,t=this.selectedProduct()){s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),this.loadingTopSales.set(!0),this.http.get(`${this.host()}/report/top-sales/${s}&${e}&${t}`).subscribe({next:a=>{this.topSales.set(a),this.loadingTopSales.set(!1)},error:a=>{this.notificationsService.showError(a,"home"),this.loadingTopSales.set(!1)}})}getTopCategories(s,e){s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),this.http.get(`${this.host()}/report/categories/${s}&${e}`).subscribe({next:t=>{this.topCategories.set(t)},error:t=>{this.notificationsService.handleError(t.error,"home")}})}getSalesAnalytics(s=this.startDate(),e=this.endDate()){s=this.dateService.formatDate(s,"yyyy-MM-dd HH:mm:ss"),e=this.dateService.formatDate(e,"yyyy-MM-dd HH:mm:ss"),this.loadingSalesAnalytics.set(!0),this.http.get(`${this.host()}/report/sales-analytics/${s}&${e}`).subscribe({next:t=>{this.salesAnalytics.set(t),this.loadingSalesAnalytics.set(!1)},error:t=>{this.notificationsService.handleError(t.error,"home"),this.loadingSalesAnalytics.set(!1)}})}static{this.\u0275fac=function(e){return new(e||h)}}static{this.\u0275prov=n({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})();export{b as a};
